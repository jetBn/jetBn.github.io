<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://jetbn.github.io/"/>
  <updated>2020-04-30T07:22:17.122Z</updated>
  <id>http://jetbn.github.io/</id>
  
  <author>
    <name>jetBn</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä½ ä¸çŸ¥é“çš„CSS </title>
    <link href="http://jetbn.github.io/2020/04/30/%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84CSS/"/>
    <id>http://jetbn.github.io/2020/04/30/%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84CSS/</id>
    <published>2020-04-30T05:42:00.000Z</published>
    <updated>2020-04-30T07:22:17.122Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><hr><p>&ensp;&ensp;&ensp;&ensp;<code>CSS</code>çš„ä¸–ç•Œæ˜¯ç¥å¥‡çš„ã€‚å½“ä»Šæ‰€ä»¥ä¸ç®¡ç§»åŠ¨ç«¯è¿˜æ˜¯PCç«¯ç½‘é¡µéƒ½æ˜¯ç¦»ä¸å¼€<code>CSC</code>ï¼ˆå±‚å æ ·å¼è¡¨ï¼‰ï¼Œåƒç±»é€‰æ‹©ï¼Œidé€‰æ‹©ç­‰ç­‰è¿™äº›é€‰æ‹©å™¨ æˆ‘ä»¬å·¥ä½œéƒ½æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯éš¾å…å¿½ç•¥ä¸€äº›ï¼Œ<code>CSS</code>ä¸­æ›´å¼ºå¤§çš„å±æ€§æˆ‘ä»¬å¾ˆå°‘ç”¨åˆ°ï¼Œç‰¹æ­¤è®°å½•ä¸€äº›ã€‚</p><h2 id="ç”¨-å…„å¼Ÿé€‰æ‹©å™¨æ¥ç¾åŒ–è¡¨å•å…ƒç´ "><a href="#ç”¨-å…„å¼Ÿé€‰æ‹©å™¨æ¥ç¾åŒ–è¡¨å•å…ƒç´ " class="headerlink" title="ç”¨~/ +å…„å¼Ÿé€‰æ‹©å™¨æ¥ç¾åŒ–è¡¨å•å…ƒç´ "></a>ç”¨<code>~</code>/ <code>+</code>å…„å¼Ÿé€‰æ‹©å™¨æ¥ç¾åŒ–è¡¨å•å…ƒç´ </h2><ol><li><code>~</code>é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ çš„åé¢çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ </li><li><code>+</code>é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ çš„åé¢ç´§é‚»çš„å…„å¼Ÿå…ƒç´ </li></ol><h2 id="ç”¨font-sizeï¼š0æ¥æ¸…é™¤é—´è·"><a href="#ç”¨font-sizeï¼š0æ¥æ¸…é™¤é—´è·" class="headerlink" title="ç”¨font-sizeï¼š0æ¥æ¸…é™¤é—´è·"></a>ç”¨<code>font-sizeï¼š0</code>æ¥æ¸…é™¤é—´è·</h2><p> &ensp;&ensp;&ensp;&ensp;<code>inline-block</code>çš„å…ƒç´ ä¹‹é—´ä¼šå—ç©ºç™½åŒºåŸŸçš„å½±å“ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ ä¹‹é—´å·®ä¸å¤šä¼šæœ‰ä¸€ä¸ªå­—ç¬¦çš„é—´éš™ã€‚å¦‚æœåœ¨åŒä¸€è¡Œå†…æœ‰4ä¸ª25%ç›¸åŒå®½åº¦çš„å…ƒç´ ï¼Œä¼šå¯¼è‡´æœ€åä¸€ä¸ªå…ƒç´ æ‰ä¸‹æ¥ï¼ˆå¦‚å›¾ï¼‰ã€‚ä½ å¯ä»¥åˆ©ç”¨å…ƒç´ æµ®åŠ¨<code>float</code>ï¼Œæˆ–è€…å‹ç¼©htmlï¼Œæ¸…é™¤å…ƒç´ é—´çš„ç©ºæ ¼æ¥è§£å†³ã€‚ä½†æœ€ç®€å•æœ‰æ•ˆçš„æ–¹æ³•è¿˜æ˜¯è®¾ç½®çˆ¶å…ƒç´ çš„<code>font-size</code>å±æ€§ä¸º0ã€‚</p><h2 id="ç”¨-overflow-ä¾†æ¸…é™¤æµ®åŠ¨-åˆ›å»ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"><a href="#ç”¨-overflow-ä¾†æ¸…é™¤æµ®åŠ¨-åˆ›å»ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡" class="headerlink" title="ç”¨ overflow ä¾†æ¸…é™¤æµ®åŠ¨(åˆ›å»ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)"></a>ç”¨ overflow ä¾†æ¸…é™¤æµ®åŠ¨(åˆ›å»ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)</h2><p> é€šè¿‡è§¦å‘BFCæ–¹å¼ï¼Œå®ç°æ¸…é™¤æµ®åŠ¨(çˆ¶å…ƒç´ æ·»åŠ overflow:hidden)<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">.fahter&#123;<br>      width: 400px;<br>      border: 1px solid deeppink;<br>      overflow: hidden;<br>  &#125;<br></code></pre></td></tr></table></figure></p><h2 id="ç”¨pointer-eventæ¥ç¦ç”¨äº‹ä»¶"><a href="#ç”¨pointer-eventæ¥ç¦ç”¨äº‹ä»¶" class="headerlink" title="ç”¨pointer-eventæ¥ç¦ç”¨äº‹ä»¶"></a>ç”¨pointer-eventæ¥ç¦ç”¨äº‹ä»¶</h2><ol><li><p>é˜»æ­¢ä»»ä½•ç‚¹å‡»åŠ¨ä½œçš„æ‰§è¡Œ</p></li><li><p>ä½¿é“¾æ¥æ˜¾ç¤ºä¸ºé»˜è®¤å…‰æ ‡(cursor:default)</p></li><li><p>é˜»æ­¢è§¦å‘hoverå’ŒactiveçŠ¶æ€</p></li><li><p>é˜»æ­¢JavaScriptç‚¹å‡»äº‹ä»¶çš„è§¦å‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;ä½¿ç”¨è¯¥ç±»ï¼Œä»»ä½•ç‚¹å‡»äº‹ä»¶å°†æ— æ•ˆ<br><br>.disabled &#123; pointer-events: none; &#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="ç”¨max-widthæ¥é˜²æ­¢å›¾ç‰‡æ’‘ç ´å®¹å™¨"><a href="#ç”¨max-widthæ¥é˜²æ­¢å›¾ç‰‡æ’‘ç ´å®¹å™¨" class="headerlink" title="ç”¨max-widthæ¥é˜²æ­¢å›¾ç‰‡æ’‘ç ´å®¹å™¨"></a>ç”¨max-widthæ¥é˜²æ­¢å›¾ç‰‡æ’‘ç ´å®¹å™¨</h2><p> é’ˆå¯¹å†…å®¹æ€§çš„æ–‡æ¡ˆï¼Œå›¾ç‰‡å¤§å°éƒ½æ˜¯æœªçŸ¥çš„ï¼Œä¸ºäº†é˜²æ­¢å›¾ç‰‡è¿‡å¤§è€Œæ’‘ç ´å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å›¾ç‰‡çš„max-width:100%æ¥å¤„ç†ã€‚<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">img &#123;<br>   display:inline-block;<br>   max-width: 100%;  <br>   &#125;<br></code></pre></td></tr></table></figure></p><h2 id="å®ç°ä¸‰è§’å½¢"><a href="#å®ç°ä¸‰è§’å½¢" class="headerlink" title="å®ç°ä¸‰è§’å½¢"></a>å®ç°ä¸‰è§’å½¢</h2><p> æ–°å»ºä¸€ä¸ªå…ƒç´ ï¼Œå°†å®ƒçš„å®½é«˜éƒ½è®¾ç½®ä¸º0ï¼›ç„¶åé€šè¿‡è®¾ç½®borderå±æ€§æ¥å®ç°ä¸‰è§’å½¢æ•ˆæœ<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plain"> .arrow&#123;<br>    width: 0;<br>    height: 0;<br><br>    &#x2F;*ç›´è§’ä¸‰è§’å½¢*&#x2F;<br><br>    &#x2F;* border-width: 50px 50px 0 0;<br>    border-style: solid;<br>    border-color: transparent #000 transparent transparent; *&#x2F;<br><br>    &#x2F;*å‘ä¸‹ä¸‰è§’å½¢*&#x2F;<br>    &#x2F;* border-width: 100px 100px 0 100px;<br>    border-style: solid;<br>    border-color: brown transparent transparent transparent; *&#x2F;<br><br>&#125;<br></code></pre></td></tr></table></figure></p><h2 id="ç§»åŠ¨ç«¯ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ–‡å­—é€‰æ‹©åŠŸèƒ½"><a href="#ç§»åŠ¨ç«¯ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ–‡å­—é€‰æ‹©åŠŸèƒ½" class="headerlink" title="ç§»åŠ¨ç«¯ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ–‡å­—é€‰æ‹©åŠŸèƒ½"></a>ç§»åŠ¨ç«¯ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ–‡å­—é€‰æ‹©åŠŸèƒ½</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain"> .unselect &#123;<br>  -webkit-touch-callout:none;<br>  -webkit-user-select:none;<br>  -khtml-user-select:none;<br>  -moz-user-select:none;<br>  -ms-user-select:none;<br>  user-select:none<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–‡å­—æ¨¡ç³Š"><a href="#æ–‡å­—æ¨¡ç³Š" class="headerlink" title="æ–‡å­—æ¨¡ç³Š"></a>æ–‡å­—æ¨¡ç³Š</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain"> .blur &#123;<br>  color: transparent;<br>  text-shadow: 0 0 5px rgba(0, 0, 0, 0.5)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¶…å‡ºNè¡Œæ˜¾ç¤ºçœç•¥å·"><a href="#è¶…å‡ºNè¡Œæ˜¾ç¤ºçœç•¥å·" class="headerlink" title="è¶…å‡ºNè¡Œæ˜¾ç¤ºçœç•¥å·"></a>è¶…å‡ºNè¡Œæ˜¾ç¤ºçœç•¥å·</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain"> .hide-text-n &#123;<br>  display: -webkit-box;<br>  -webkit-box-orient: vertical;<br>  -webkit-line-clamp: n;<br>  overflow: hidden<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¡¬ä»¶åŠ é€Ÿ"><a href="#ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="ç¡¬ä»¶åŠ é€Ÿ"></a>ç¡¬ä»¶åŠ é€Ÿ</h2><p> å†™transitionã€animationæ—¶ï¼Œè¯·ç”¨transformä»£æ›¿leftã€topç­‰å±æ€§ï¼Œä»è€Œä½¿åŠ¨ç”»æ›´æµç•…</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain"> cube &#123;<br>  -webkit-transform: translateZ(0);<br>  -moz-transform: translateZ(0);<br>  -ms-transform: translateZ(0);<br>  -o-transform: translateZ(0);<br>  transform: translateZ(0)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç§»åŠ¨ç«¯å±å¹•æ—‹è½¬æ—¶ï¼Œå­—ä½“å¤§å°ä¸æ”¹å˜"><a href="#ç§»åŠ¨ç«¯å±å¹•æ—‹è½¬æ—¶ï¼Œå­—ä½“å¤§å°ä¸æ”¹å˜" class="headerlink" title="ç§»åŠ¨ç«¯å±å¹•æ—‹è½¬æ—¶ï¼Œå­—ä½“å¤§å°ä¸æ”¹å˜"></a>ç§»åŠ¨ç«¯å±å¹•æ—‹è½¬æ—¶ï¼Œå­—ä½“å¤§å°ä¸æ”¹å˜</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain"> html, body, form, p, div, h1, h2, h3, h4, h5, h6 &#123;<br> -webkit-text-size-adjust: 100%;<br> -ms-text-size-adjust: 100%;<br> text-size-adjust: 100%<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é”šç‚¹è·³è½¬å¹³æ»‘è¿‡æ¸¡"><a href="#é”šç‚¹è·³è½¬å¹³æ»‘è¿‡æ¸¡" class="headerlink" title="é”šç‚¹è·³è½¬å¹³æ»‘è¿‡æ¸¡"></a>é”šç‚¹è·³è½¬å¹³æ»‘è¿‡æ¸¡</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">body &#123;<br>   scroll-behavior: smooth;<br> &#125;<br></code></pre></td></tr></table></figure><h2 id="æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦è¾¹æ¡†ã€è¾¹è·ç­‰"><a href="#æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦è¾¹æ¡†ã€è¾¹è·ç­‰" class="headerlink" title="æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦è¾¹æ¡†ã€è¾¹è·ç­‰"></a>æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦è¾¹æ¡†ã€è¾¹è·ç­‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">ul &gt; li:not(:last-child) &#123;<br>  border-bottom: 1px solid #c5b7b7<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ¸…é™¤æµ®åŠ¨-é€‚åº”ä¼ªç±»"><a href="#æ¸…é™¤æµ®åŠ¨-é€‚åº”ä¼ªç±»" class="headerlink" title="æ¸…é™¤æµ®åŠ¨(é€‚åº”ä¼ªç±»)"></a>æ¸…é™¤æµ®åŠ¨(é€‚åº”ä¼ªç±»)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">.clearfix::after &#123;<br>  content: &#39;&#39;;<br>  display: block;<br>  height: 0;<br>  visibility: hidden;<br>  clear: both<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="CSSé€‰æ‹©å™¨é€‰åŸºæ•°é¡¹ã€å¶æ•°é¡¹ã€å€æ•°åˆ†ç»„é¡¹"><a href="#CSSé€‰æ‹©å™¨é€‰åŸºæ•°é¡¹ã€å¶æ•°é¡¹ã€å€æ•°åˆ†ç»„é¡¹" class="headerlink" title="CSSé€‰æ‹©å™¨é€‰åŸºæ•°é¡¹ã€å¶æ•°é¡¹ã€å€æ•°åˆ†ç»„é¡¹"></a>CSSé€‰æ‹©å™¨é€‰åŸºæ•°é¡¹ã€å¶æ•°é¡¹ã€å€æ•°åˆ†ç»„é¡¹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;* åŸºæ•° *&#x2F;<br>.selector:nth-child(2n-1) &#123;&#125;<br><br>&#x2F;* å¶æ•° *&#x2F;<br>.selector:nth-child(2n) &#123;&#125;<br><br>&#x2F;* å€æ•°åˆ†ç»„é¡¹ *&#x2F;<br>.selector:nth-child(3n+1) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬1ã€4ã€7ã€10... *&#x2F;<br>.selector:nth-child(3n+5) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬5ã€8ã€11ã€14... *&#x2F;<br>.selector:nth-child(5n-1) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬4ã€9ã€13ã€17... *&#x2F;<br></code></pre></td></tr></table></figure><h2 id="å½“è¾“å…¥æ¡†çš„valueçš„é•¿åº¦ä¸ä¸º0æ—¶ï¼Œæ˜¾ç¤ºæœç´¢æŒ‰é’®"><a href="#å½“è¾“å…¥æ¡†çš„valueçš„é•¿åº¦ä¸ä¸º0æ—¶ï¼Œæ˜¾ç¤ºæœç´¢æŒ‰é’®" class="headerlink" title="å½“è¾“å…¥æ¡†çš„valueçš„é•¿åº¦ä¸ä¸º0æ—¶ï¼Œæ˜¾ç¤ºæœç´¢æŒ‰é’®"></a>å½“è¾“å…¥æ¡†çš„valueçš„é•¿åº¦ä¸ä¸º0æ—¶ï¼Œæ˜¾ç¤ºæœç´¢æŒ‰é’®</h2><p>ç”¨åˆ°placeholder-shownä¼ªç±»ï¼Œç®€å•æ¥è¯´å°±æ˜¯å½“inputæ ‡ç­¾æœ‰äº†placeholderå±æ€§å¹¶ä¸”å†…å®¹ä¸ä¸ºç©ºæ—¶ï¼Œä¼šè§¦å‘è¯¥çŠ¶æ€ï¼Œä½†æ˜¯å½“inputæ ‡ç­¾æœ‰äº†valueå€¼ä¹‹åï¼Œå°±ä¼šæ¶ˆé™¤è¯¥çŠ¶æ€ï¼Œä¹Ÿè¦é…åˆ:noté€‰æ‹©å™¨</p><p><code>html</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;div class&#x3D;&quot;input-line&quot;&gt;<br>  &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;è¯·è¾“å…¥å…³é”®å­—è¿›è¡Œæœç´¢&quot;&gt;<br>  &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;search-btn&quot;&gt;æœç´¢&lt;&#x2F;button&gt;<br>&lt;&#x2F;div&gt;<br></code></pre></td></tr></table></figure><p><code>css</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain">.search-btn &#123;<br>  opacity: 0;<br>  transition: all .5s ease-in-out<br>&#125;<br><br> input:not(:placeholder-shown)~.search-btn &#123;<br>  opacity: 1<br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;code&gt;CSS&lt;/code&gt;çš„ä¸–ç•Œæ˜¯ç¥å¥‡çš„ã€‚å½“ä»Šæ‰€ä»¥ä¸ç®¡ç§»åŠ¨ç«¯è¿˜æ˜¯PCç«¯ç½‘é¡µéƒ½
      
    
    </summary>
    
    
      <category term="Webå‰ç«¯" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="CSS" scheme="http://jetBn.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Vue3.0å°è¯•</title>
    <link href="http://jetbn.github.io/2020/04/29/Vue3-0%E5%B0%9D%E8%AF%95/"/>
    <id>http://jetbn.github.io/2020/04/29/Vue3-0%E5%B0%9D%E8%AF%95/</id>
    <published>2020-04-29T02:59:17.000Z</published>
    <updated>2020-04-30T02:09:54.002Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://user-gold-cdn.xitu.io/2020/1/13/16f9e71255c62bc0?w=299&h=300&f=png&s=43799" alt=""></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><hr><p>&ensp;&ensp;&ensp;&ensp;æœ‰å…³vue2çš„ç›¸å…³ç›¸å…³è¯­æ³•æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»çš„è¯­æ³•æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»ä¼šäº†ï¼Œç°åœ¨éƒ½å·²ç»<code>2020</code>å¹´äº†vueä½œä¸ºå‰ç«¯è¿™ä¹ˆçƒ­é—¨çš„æ¡†æ¶, ä¸å»å­¦ä¸€æ³¢å¯¹çš„è‡ªå·±æ˜¯åšå‰ç«¯çš„å—ï¼Ÿå“ˆå“ˆå“ˆå“ˆğŸ¤£ğŸ¤£ğŸ¤£ã€‚<br/><br>&ensp;&ensp;&ensp;&ensp;ä¸€è·¯å°±å¼€å§‹æŠ˜è…¾ï¼Œé‚£æ˜¯ä¸€è·¯æ›²æŠ˜å•Šï¼Œé‡ä¸ä¼šåˆ°ä¼šä¹Ÿä¸çŸ¥é“è‡ªå·±ç»å†äº†ä»€ä¹ˆï¼Œåˆ°ç°åœ¨<code>vue3.x</code>é©¬ä¸Šåˆæœ‰å¼€å§‹äº†æ‰€ä»¥è‡ªå·±ä¹Ÿæ˜¯å…ˆè¯•è¯•æ°´ï¼Œç©äº†ä¸€æ³¢ç›¸å…³çš„è¯­æ³•ã€‚<br/><br>&ensp;&ensp;&ensp;&ensp; åºŸè¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç è®°å½•ä¸‹(ç”±äºæœ¬äººæ²¡æœ‰ç”¨åˆ°<code>TS</code>æ‰€ä»¥éƒ½æ˜¯è¿›è¡Œä¸<code>ES6</code>è¿›è¡Œ)</p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><ol><li>åœ¨<code>vue-cli3.0</code>ä¸‹å®‰è£… <code>composition-api</code> <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> install @vue/composition-api --save<br><span class="hljs-comment"># OR</span><br>yarn add @vue/composition-api<br></code></pre></td></tr></table></figure></li><li>åœ¨ä½¿ç”¨ä»»ä½• <code>@vue/composition-api</code> æä¾›çš„èƒ½åŠ›å‰ï¼Œå¿…é¡»å…ˆé€šè¿‡ Vue.use() è¿›è¡Œå®‰è£… <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> VueCompositionApi <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span><br><br>Vue.use(VueCompositionApi)<br></code></pre></td></tr></table></figure> å®‰è£…å®Œæˆåå°±å¯é¡¹ç›®ä¸­ä½¿ç”¨ç›¸å…³<code>composition-api</code>æ¥å¼€å‘äº†</li></ol><h2 id="setupï¼ˆå…¥å£å‡½æ•°ï¼‰"><a href="#setupï¼ˆå…¥å£å‡½æ•°ï¼‰" class="headerlink" title="setupï¼ˆå…¥å£å‡½æ•°ï¼‰"></a>setupï¼ˆå…¥å£å‡½æ•°ï¼‰</h2><p>&ensp;&ensp;&ensp;&ensp;<code>setup()</code>å‡½æ•°æ˜¯<code>vue3</code>ä¸­ï¼Œä¸“é—¨ä¸ºç»„ä»¶æä¾›çš„æ–°å±æ€§ï¼Œæ„Ÿè§‰å°±è·Ÿæ˜¯è·Ÿ<code>vue2.x</code>ä¸­çš„<code>data</code>ä¸€æ ·éœ€è¦è¿”å›ä¸€ä¸ª<code>Object</code>ä¸­åŒ…å«äº†è‡ªå·±å®šä¹‰çš„<code>function</code>, <code>computed</code>, <code>watch</code>ä»¥åŠå±æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚</p><ol><li><p>setup å‡½æ•°ä¼šåœ¨ beforeCreate ä¹‹åã€created ä¹‹å‰æ‰§è¡Œã€‚</p> <figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pf">setup(props, context) &#123;<br>    const <span class="hljs-keyword">state</span> = reactive(&#123;count: <span class="hljs-number">0</span>&#125;) // åˆ›å»ºæ•°æ®<br>    return <span class="hljs-keyword">state</span> // è¿”å›é¡µé¢ä¸­ä½¿ç”¨<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ¥æ”¶<code>props</code>æ•°æ®</p><ol><li>åœ¨<code>props</code>ä¸­å®šä¹‰å½“å‰ç»„ä»¶å…è®¸å¤–ç•Œä¼ é€’è¿‡æ¥çš„å‚æ•°åç§°ï¼š  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"> <span class="hljs-selector-tag">props</span>: &#123;<br>    <span class="hljs-attribute">name</span>: String<br>&#125;<br></code></pre></td></tr></table></figure></li><li>é€šè¿‡<code>setup</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå½¢å‚ï¼Œæ¥æ”¶ props æ•°æ®ï¼š <figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs maxima">setup(<span class="hljs-built_in">props</span>) &#123;<br>    console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">props</span>.name)<br>&#125;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>contextå½¢å‚</p><p> <code>setup</code>å‡½æ•°çš„ç¬¬äºŒä¸ªå½¢å‚æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå°±æ˜¯<code>vue2.x</code>ä¸­çš„<code>this</code>ï¼Œåœ¨<code>vue 3.x</code>ä¸­ï¼Œå®ƒä»¬çš„è®¿é—®æ–¹å¼å¦‚ä¸‹</p> <figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs maxima"> setup(<span class="hljs-built_in">props</span>, <span class="hljs-built_in">context</span>) &#123;<br>    <span class="hljs-built_in">context</span>.slots<br>    <span class="hljs-built_in">context</span>.emit<br>    <span class="hljs-built_in">context</span>.refs<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="reactiveä¸refï¼ˆå“åº”å¼æ•°æ®æºï¼‰"><a href="#reactiveä¸refï¼ˆå“åº”å¼æ•°æ®æºï¼‰" class="headerlink" title="reactiveä¸refï¼ˆå“åº”å¼æ•°æ®æºï¼‰"></a>reactiveä¸refï¼ˆå“åº”å¼æ•°æ®æºï¼‰</h2><ol><li><p><code>reactive()</code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå“åº”çš„æ•°æ®å¯¹è±¡ã€‚</p><p> è¿™ç­‰ä»·äº<code>vue2.x</code>ä¸­çš„<code>Vue.observable()</code>å‡½æ•°ï¼Œ<code>vue3.x</code>ç„¶åå°±æ˜¯å¯ä»¥ç›´æ¥ç”¨reactive()å‡½æ•°ç›´æ¥åˆ›å»ºå“åº”çš„æ•°æ®å¯¹è±¡ã€‚</p><ol><li><p>æŒ‰éœ€å¯¼å…¥<code>reactive</code>ç›¸å…³å‡½æ•°</p><p> <code>import { reactive } from &#39;@vue/composition-api&#39;</code></p></li><li><p>åœ¨<code>setup()</code>çš„å‡½æ•°ä¸­è°ƒç”¨<code>reactive()</code>å‡½æ•°ï¼Œåˆ›å»ºå¯¹åº”çš„å“åº”å¼æ•°æ®å¯¹è±¡</p> <figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pf">setup() &#123;<br>    // è¿™ä¸ªç±»ä¼¼äºvue2ä¸­çš„data()è¿”å›çš„å“åº”å¼å¯¹è±¡<br>    const <span class="hljs-keyword">state</span> = reactive(&#123; count: <span class="hljs-number">0</span> &#125;) <br>    return <span class="hljs-keyword">state</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨<code>template</code>ä¸­è®¿é—®å“åº”å¼æ•°æ®</p> <figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰çš„countå€¼ä¸º:</span><span class="hljs-template-variable">&#123;&#123;count&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li></ol></li><li><p><code>ref()</code>å‡½æ•°ç”¨æ¥æ ¹æ®ç»™å®šå€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ï¼Œ<code>ref()</code>å‡½æ•°çš„è°ƒç”¨è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ŠåªåŒ…å«ä¸€ä¸ª<code>value</code>å±æ€§ã€‚</p><ol><li><p>å¯¼å…¥ç›¸å…³<code>ref</code>ç›¸å…³å‡½æ•°</p><p> <code>import { ref } from &#39;@vue/composition-api&#39;</code></p></li><li><p>åˆ›å»ºå“åº”å¼å¯¹è±¡</p> <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs applescript">setup() &#123;<br>    const <span class="hljs-built_in">count</span> = <span class="hljs-keyword">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">        return</span> &#123;<br>            <span class="hljs-built_in">count</span>,<br>            <span class="hljs-built_in">name</span>: <span class="hljs-keyword">ref</span>('vue')<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨<code>template</code>ä¸­è®¿é—®å“åº”å¼æ•°æ®<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;count&#125;&#125;</span><span class="xml">--- </span><span class="hljs-template-variable">&#123;&#123;name&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li></ol></li></ol></li><li><p><code>isRef</code>çš„ä½¿ç”¨<br> ï¼Œ<code>isRef()</code>å‡½æ•°ä¸»è¦ç”¨æ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦ä¸º<code>ref()</code>åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼›åº”ç”¨åœºæ™¯ï¼šå½“éœ€è¦å±•å¼€æŸä¸ªå¯èƒ½ä¸º<code>ref()</code>åˆ›å»ºå‡ºæ¥çš„å€¼å¾—æ—¶å€™ï¼Œä¾‹å¦‚ï¼š</p> <figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cs">import &#123; isRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span><br><br><span class="hljs-keyword">const</span> fooData = isRef(foo) ? foo.<span class="hljs-keyword">value</span> : foo<br></code></pre></td></tr></table></figure></li><li><p><code>toRefs</code>çš„ä½¿ç”¨ï¼Œ<code>toRefs()</code>å‡½æ•°å¯ä»¥å°†<code>reactive()</code>åˆ›å»ºå‡ºæ¥çš„å“åº”å¼å¯¹è±¡ï¼Œè½¬ä¸ºæ™®é€šå¯¹è±¡ï¼Œåªä¸è¿‡è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§èŠ‚ç‚¹éƒ½æ˜¯ä»¥<code>ref()</code>ç±»å‹çš„åƒæ˜¯æ•°æ®ï¼Œ æœ€å¸¸è§åº”ç”¨åœºæ™¯</p> <figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs pf">import &#123; <span class="hljs-keyword">to</span>Refs, reactive &#125; <span class="hljs-keyword">from</span> '@vue/composition-api'<br><br>setup() &#123;<br>    // å®šä¹‰å“åº”å¼æ•°æ®å¯¹è±¡<br>    const <span class="hljs-keyword">state</span> = reactive(&#123;<br>      count: <span class="hljs-number">0</span><br>    &#125;)<br>    <br>    // å®šä¹‰é¡µé¢ä¸Šå¯ç”¨çš„äº‹ä»¶å¤„ç†å‡½æ•°<br>    const increment = () =&gt; &#123;<br>      <span class="hljs-keyword">state</span>.count++<br>    &#125;<br>    <br>    // åœ¨ setup ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡ä¾›é¡µé¢ä½¿ç”¨<br>    // è¿™ä¸ªå¯¹è±¡ä¸­å¯ä»¥åŒ…å«å“åº”å¼çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åŒ…å«äº‹ä»¶å¤„ç†å‡½æ•°<br>    return &#123;<br>      // å°† <span class="hljs-keyword">state</span> ä¸Šçš„æ¯ä¸ªå±æ€§ï¼Œéƒ½è½¬åŒ–ä¸º ref å½¢å¼çš„å“åº”å¼æ•°æ®<br>      ...<span class="hljs-keyword">to</span>Refs(<span class="hljs-keyword">state</span>),<br>      // è‡ªå¢çš„äº‹ä»¶å¤„ç†å‡½æ•°<br>      increment<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> åœ¨<code>template</code>ä¸­å°±ç›´æ¥å¯ä»¥ä½¿ç”¨<code>count</code>å±æ€§å’Œç›¸å¯¹åº”çš„<code>increment</code>æ–¹æ³•äº†ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨<code>roRefs</code>ç›´æ¥è¿”å›<code>state</code>é‚£ä¹ˆå°±å¾—é€šè¿‡<code>state.xx</code>æ¥è®¿é—®æ•°æ®</p> <figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰çš„countå€¼ä¸ºï¼š</span><span class="hljs-template-variable">&#123;&#123;count&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="computedä¸watchï¼ˆè®¡ç®—å±æ€§ä¸ç›‘å¬ï¼‰"><a href="#computedä¸watchï¼ˆè®¡ç®—å±æ€§ä¸ç›‘å¬ï¼‰" class="headerlink" title="computedä¸watchï¼ˆè®¡ç®—å±æ€§ä¸ç›‘å¬ï¼‰"></a>computedä¸watchï¼ˆè®¡ç®—å±æ€§ä¸ç›‘å¬ï¼‰</h2><ol><li><p><code>computed()</code> ç”¨æ¥åˆ›å»ºè®¡ç®—å±æ€§ï¼Œ<code>computed()</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª ref çš„å®ä¾‹ã€‚ä½¿ç”¨ <code>computed</code> ä¹‹å‰éœ€è¦æŒ‰éœ€å¯¼å…¥ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">import</span> &#123; <span class="hljs-attribute">computed</span> &#125; from <span class="hljs-string">'<span class="hljs-variable">@vue</span>/composition-api'</span><br></code></pre></td></tr></table></figure><ol><li><p>åˆ›å»ºåªè¯»çš„è®¡ç®—å±æ€§ï¼Œåœ¨è°ƒç”¨<code>computed()</code>å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥ä¸€ä¸ª<code>function</code>å‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªåªè¯»çš„è®¡ç®—å±æ€§ã€‚</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®</span><br><span class="hljs-keyword">const</span> count = <span class="hljs-keyword">ref</span>(<span class="hljs-number">1</span>) <br><br><span class="hljs-comment">// æ ¹æ®countçš„å€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§ï¼Œ å®ƒä¼šæ ¹æ®refè‡ªåŠ¨è®¡ç®—å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ref</span><br><span class="hljs-keyword">const</span> computedCount = computed(() =&gt; count.<span class="hljs-keyword">value</span> + <span class="hljs-number">1</span> ) <br><br>console.log(computedCount.<span class="hljs-keyword">value</span>) <span class="hljs-comment">// æ‰“å° 2</span><br><br>computedCount.<span class="hljs-keyword">value</span>++ <span class="hljs-comment">//æŠ¥é”™</span><br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¯è¯»å¯å†™çš„è®¡ç®—å±æ€§</p><p>åœ¨è°ƒç”¨<code>computed()</code>å‡½æ•°çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªåŒ…å«<code>get</code>å’Œ<code>set</code>çš„å¯¹è±¡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯è¯»å¯å†™çš„è®¡ç®—å±æ€§äº†ã€‚</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs q"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®</span><br>const <span class="hljs-built_in">count</span> = ref(<span class="hljs-number">1</span>) <br><br><span class="hljs-comment">// æ ¹æ®countçš„å€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§ï¼Œ å®ƒä¼šæ ¹æ®refè‡ªåŠ¨è®¡ç®—å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ref</span><br>const computedCount = computed(&#123;<br>    <span class="hljs-built_in">get</span>: () =&gt; <span class="hljs-built_in">count</span>.<span class="hljs-built_in">value</span> + <span class="hljs-number">1</span>,<br>    <span class="hljs-built_in">set</span>: (val) =&gt; <span class="hljs-built_in">count</span>.<span class="hljs-built_in">value</span> = val - <span class="hljs-number">1</span><br>&#125; ) <br><br>computedCount.<span class="hljs-built_in">count</span> = <span class="hljs-number">6</span><br><br>console.log(<span class="hljs-built_in">count</span>.<span class="hljs-built_in">value</span>) <span class="hljs-comment">// æ‰“å° 5</span><br></code></pre></td></tr></table></figure></li></ol><p>2.<code>watch()</code> å‡½æ•°ç”¨æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œè·Ÿ<code>vue2.x</code>ä¸­çš„æ˜¯ä¸€æ ·çš„ä¸è¿‡åœ¨è¿™å¾—åƒ<code>computed</code>çš„ä½¿ç”¨æ–¹æ³•ä¸€æ ·å¯¼å…¥ç›¸å…³<code>api</code>æ–¹æ³•</p><p>ä½¿ç”¨å‰å¯¼å…¥ <code>import { watch } from &#39;@vue/composition-api&#39;</code></p><ol><li><p>åŸºæœ¬ç”¨æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>)<br><br><span class="hljs-comment">// å®šä¹‰watchåªè¦countçš„å€¼å˜åŒ–ï¼Œå°±ä¼šè§¦å‘watchçš„å›è°ƒ</span><br><span class="hljs-comment">// watch ä¼šåœ¨åˆ›å»ºçš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡</span><br><br>watch(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(count.value))<br><br><br>setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    count.value++<br>&#125;, <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure></li><li><p>ç›‘å¬æŒ‡å®šæ•°æ®</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pf">/ å®šä¹‰reactiveæ•°æ®æº<br>const <span class="hljs-keyword">state</span> = reactive(&#123; count: <span class="hljs-number">0</span> &#125;)<br>// ç›‘è§† <span class="hljs-keyword">state</span>.count è¿™ä¸ªæ•°æ®èŠ‚ç‚¹çš„å˜åŒ–<br>watch(() =&gt; <span class="hljs-keyword">state</span>.count, (now, prev) =&gt; &#123; <br>    console.<span class="hljs-keyword">log</span>(now, prev)<br>&#125;)<br><br>/ å®šä¹‰refæ•°æ®æº<br>const count = ref(<span class="hljs-number">0</span>)<br>// ç›‘è§†countè¿™ä¸ªæ•°æ®çš„å˜åŒ–<br>watch(count, (now, prev) =&gt; &#123; <br>    console.<span class="hljs-keyword">log</span>(now, prev)<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="LifeCycle-Hooks-ç”Ÿå‘½å‘¨æœŸ"><a href="#LifeCycle-Hooks-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="LifeCycle Hooks(ç”Ÿå‘½å‘¨æœŸ)"></a>LifeCycle Hooks(ç”Ÿå‘½å‘¨æœŸ)</h2><p>åœ¨æ–°ç‰ˆä¸­çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦æŒ‰éœ€å¯¼å…¥ï¼Œå¹¶ä¸”åªèƒ½å†™<code>setup()</code>å‡½æ•°ä¸­ã€‚</p></li></ol></li></ol></li></ol><p>ä½¿ç”¨<code>onBeforeMount</code>, <code>onMounted</code>, <code>updated</code>ç›¸å…³ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨å‰å¯¼å…¥ç›¸å…³<code>api</code>æ–¹æ³•</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">import</span> &#123; onBeforeMount, onMounted, updated &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span><br></code></pre></td></tr></table></figure> <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">setup () &#123;<br>   onBeforeMount(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onBeforeMount!'</span>)<br>   &#125;)<br>   onMounted(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onMounted!'</span>)<br>   &#125;)<br>   updated(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'updated!'</span>)<br>   &#125;) <br>&#125;<br></code></pre></td></tr></table></figure><p> ç›¸å…³æ¯ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½æ˜¯ä¼ å…¥ä¸€ä¸ª<code>function</code>å‡½æ•°ã€‚</p><p> <code>vue2.x</code>ä¸æ–°ç‰ˆ<code>Composition API</code>ä¹‹é—´çš„æ˜ å°„å…³ç³»</p><ul><li><code>beforeCreate</code> -&gt; <code>setup</code></li><li><code>created</code> -&gt; <code>setup</code></li><li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li><li><code>mounted</code> -&gt; <code>onMounted</code></li><li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li><li><code>updated</code> -&gt; <code>onUpdated</code></li><li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li><li><code>destroyed</code> -&gt; <code>onUnmounted</code></li><li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li></ul><h2 id="provide-amp-injectï¼ˆæ•°æ®å…±äº«ï¼‰"><a href="#provide-amp-injectï¼ˆæ•°æ®å…±äº«ï¼‰" class="headerlink" title="provide &amp; injectï¼ˆæ•°æ®å…±äº«ï¼‰"></a>provide &amp; injectï¼ˆæ•°æ®å…±äº«ï¼‰</h2><p><code>provide()</code>å’Œ <code>inject()</code>å¯ä»¥å®ç°åµŒå¥—ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ã€‚è¿™ä¸ªä¸¤ä¸ªå‡½æ•°åªèƒ½åœ¨<code>setup()</code>å‡½æ•°ä¸­ä½¿ç”¨ã€‚çˆ¶çº§ç»„ä»¶ä¸­ä½¿ç”¨<code>provide()</code>å‡½æ•°å¯ä»¥ä½¿æ•°æ®å‘ä¸‹ä¼ é€’ï¼Œå­ç»„ä»¶ä¸­ä½¿ç”¨<code>inject()</code>æ¥æ”¶ä¸Šå±‚ä¼ è¿‡æ¥çš„æ•°æ®ã€‚</p><p>å®ç°ä»£ç :</p><p>æ ¹ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ï¼‰<code>parent.vue</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child-one</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-one</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child-two</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-two</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">import</span> &#123; provide &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span></span><br><span class="javascript">  <span class="hljs-keyword">import</span> ChildOne <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/Child'</span></span><br><span class="javascript">  <span class="hljs-keyword">import</span> ChildTwo <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/Child'</span></span><br><span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>    components: &#123;<br>       ChildOne,<br>       ChildTwo<br>    &#125;,<br>    setup() &#123;<br><span class="actionscript">    <span class="hljs-comment">// provide('è¦å…±äº«çš„æ•°æ®åç§°', è¢«å…±äº«çš„æ•°æ®)</span></span><br><span class="actionscript">      provide(<span class="hljs-string">'globalName'</span>, <span class="hljs-string">'vue'</span>) </span><br>    &#125;<br>  &#125;<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶1 <code>ChildOne.vue</code></p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!--é¡µé¢å±•ç¤ºæ•°æ®globalName --&gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123;globalName&#125;&#125;</span><span class="xml"> </span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  import &#123; inject &#125; from '@vue/composition-api'</span><br><span class="xml">  export default &#123;</span><br><span class="xml">    name: 'ChildOne',</span><br><span class="xml">    setup() &#123;</span><br><span class="xml">      const globalName = inject('globalName') è°ƒç”¨ inject å‡½æ•°æ—¶ï¼Œé€šè¿‡æŒ‡å®šçš„æ•°æ®åç§°ï¼Œè·å–åˆ°çˆ¶çº§å…±äº«çš„æ•°æ®</span><br><span class="xml">      return &#123;</span><br><span class="xml">        globalName</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶2 <code>ChildTwo.vue</code></p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!--é¡µé¢å±•ç¤ºæ•°æ®globalName --&gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123;globalName&#125;&#125;</span><span class="xml"> </span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  import &#123; inject &#125; from '@vue/composition-api'</span><br><span class="xml">  export default &#123;</span><br><span class="xml">    name: 'ChildTwo',</span><br><span class="xml">    setup() &#123;</span><br><span class="xml">      const globalName = inject('globalName') è°ƒç”¨ inject å‡½æ•°æ—¶ï¼Œé€šè¿‡æŒ‡å®šçš„æ•°æ®åç§°ï¼Œè·å–åˆ°çˆ¶çº§å…±äº«çš„æ•°æ®</span><br><span class="xml">      return &#123;</span><br><span class="xml">        globalName</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><code>provide</code>å‡½æ•°è¢«å…±äº«çš„æ•°æ®å¯ä»¥ä½¿<code>ref</code>å’Œ<code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œç”¨æ³•ç±»ä¼¼</p><h2 id="template-refsï¼ˆå…ƒç´ ç»„ä»¶ï¼‰"><a href="#template-refsï¼ˆå…ƒç´ ç»„ä»¶ï¼‰" class="headerlink" title="template refsï¼ˆå…ƒç´ ç»„ä»¶ï¼‰"></a>template refsï¼ˆå…ƒç´ ç»„ä»¶ï¼‰</h2><p>æˆ‘ä»¬çŸ¥é“åœ¨<code>vue2.x</code>ä¸­è·å–é¡µé¢å…ƒç´ çš„<code>DOM</code>å¯ä»¥é€šè¿‡<code>ref</code>å†™åœ¨é¡µé¢å…ƒç´ ä¸Šç„¶ååœ¨<code>js</code>ä¸­é€šè¿‡<code>$refs.x</code>æ¥æ‹¿å–å½“å‰å…ƒç´ çš„<code>DOM</code>å…ƒç´ ä¿¡æ¯ï¼Œæ“ä½œ<code>DOM</code>,åœ¨<code>composition-api</code>ä¸­æˆ‘ä»¬é€šè¿‡æä¾›çš„<code>ref</code>æ–¹æ³•ä¼ å…¥ä¸€ä¸ª<code>null</code>å¹¶ä¸”å®šä¹‰ä¸é¡µé¢å…ƒç´ ä¸Š<code>ref</code>ç›¸å¯¹åº”ã€‚</p><p>ä»£ç å®ç°ï¼š </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"h1Ref"</span>&gt;</span>Hello Word<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">import</span> &#123; ref, onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span></span><br><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>  setup() &#123;<br><span class="actionscript">    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª DOM å¼•ç”¨</span></span><br><span class="actionscript">    <span class="hljs-keyword">const</span> h1Ref = ref(<span class="hljs-literal">null</span>)</span><br><br><span class="actionscript">    <span class="hljs-comment">// åœ¨ DOM é¦–æ¬¡åŠ è½½å®Œæ¯•ä¹‹åï¼Œæ‰èƒ½è·å–åˆ°å…ƒç´ çš„å¼•ç”¨</span></span><br><span class="javascript">    onMounted(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="actionscript">      <span class="hljs-comment">// ä¸º dom å…ƒç´ è®¾ç½®å­—ä½“é¢œè‰²</span></span><br><span class="actionscript">      <span class="hljs-comment">// h1Ref.value æ˜¯åŸç”ŸDOMå¯¹è±¡</span></span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(h1Ref.value)</span><br>    &#125;)<br><br><span class="actionscript">    <span class="hljs-comment">// æŠŠåˆ›å»ºçš„å¼•ç”¨ return å‡ºå»</span></span><br><span class="actionscript">    <span class="hljs-keyword">return</span> &#123;</span><br>      h1Ref<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>&ensp;&ensp;&ensp;&ensp;æ„Ÿè§‰<code>composition-api</code>éƒ½æ˜¯ä»¥å¯¼å…¥çš„å½¢å¼ä½¿ç”¨ï¼Œæ„Ÿè§‰æ²¡æœ‰ç›´æ¥<code>vue2.x</code>ä¸­ç›´æ¥ä½¿ç”¨çš„æ–¹ä¾¿å“ˆğŸ˜‚ã€‚è™½ç„¶éƒ½æ˜¯è¯´æŒ‰éœ€å¼•å…¥ï¼Œä½¿ç”¨æƒ³ç”¨çš„æ–¹æ³•ã€‚å¯¹æ¯”äº†ä¸<code>vue2.x</code>çš„å„ç§å†™æ³•æ„Ÿè§‰çªç„¶è½¬è¿‡æ¥æœ‰å¾ˆå¤§ä¸é€‚åº”ï¼Œå†™çš„å„ç§æ•°æ®æ–¹æ³•éƒ½è¦åœ¨<code>setup</code>çš„å…¥å£å‡½æ•°ä¸­å¯¼å‡ºæ‰èƒ½åœ¨é¡µé¢ä¸Šä½¿ç”¨ã€‚è™½ç„¶<code>vue2.x</code>å®šä¹‰çš„æ•°æ®ä¹Ÿéœ€è¦é€šè¿‡<code>data</code>å‡½æ•°è¿”å›å€¼ç„¶ååœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯æ–¹æ³•ä¸ç”¨å•Šï¼Œä»€ä¹ˆè®¡ç®—å±æ€§ç›‘å¬ä¹Ÿéƒ½æ˜¯ä¸ç”¨çš„å•Šã€‚å¯èƒ½æ˜¯è‡ªå·±é€‚åº”äº†<code>vue2.x</code>çš„å„ç§å†™æ³•ï¼Œæ„Ÿè§‰ç”¨èµ·æ¥å„ç§çˆ½ã€‚è½¬å˜åˆ°<code>vue3.x</code>ä¹Ÿå°±æ˜¯ç°åœ¨çš„<code>composition-api</code>è¿˜éœ€è¦ç‚¹æ—¶é—´ã€‚</p><p>æœ€åè‡ªå·±è¿˜æ˜¯æœ‰ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³æœ‰å¤§ä½¬ç»™æˆ‘æ€è·¯å—ï¼Ÿå°±æ˜¯å­çˆ¶ç»„ä»¶çš„é€šä¿¡æ€ä¹ˆå†™ï¼Ÿä¹‹å‰ç‰ˆæœ¬æ˜¯é€šè¿‡<code>$emit</code>è¿›è¡Œï¼Œæˆ‘å‘ç°è¿™<code>setup</code>å‡½æ•°ä¸­å†™äº†çˆ¶ç»„ä»¶æ‹¿ä¸åˆ°ã€‚</p><p>æœ€åè´´ä¸Š<code>composition-api</code>å®˜æ–¹æ–‡æ¡£</p><p><a href="https://vue-composition-api-rfc.netlify.com" target="_blank" rel="noopener">https://vue-composition-api-rfc.netlify.com</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/1/13/16f9e71255c62bc0?w=299&amp;h=300&amp;f=png&amp;s=43799&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class
      
    
    </summary>
    
    
      <category term="Webå‰ç«¯" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="Vue" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/"/>
    
    
      <category term="Vue" scheme="http://jetBn.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Shopifyæ’ä»¶å¼€å‘å…¥å‘ä½“éªŒ</title>
    <link href="http://jetbn.github.io/2020/04/29/Shopify%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%85%A5%E5%9D%91%E4%BD%93%E9%AA%8C/"/>
    <id>http://jetbn.github.io/2020/04/29/Shopify%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%85%A5%E5%9D%91%E4%BD%93%E9%AA%8C/</id>
    <published>2020-04-29T02:58:15.000Z</published>
    <updated>2020-04-30T02:39:34.782Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://user-gold-cdn.xitu.io/2020/1/16/16facfbcc2c3ad20?w=500&h=144&f=png&s=18435" alt=""></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>&ensp;&ensp;&ensp;&ensp;ç”±äºå…¬å¸çš„éœ€æ±‚å¼€å‘<code>Shopify</code>çš„åº”ç”¨æ’ä»¶è‡ªå·±ç‰¹åœ°è®°å½•ä¸‹ã€‚ç®€å•çš„ä»‹ç»ä¸‹<code>Shopify</code>,å®ƒæ˜¯ç”±æ‰˜æ¯”äºšæ–¯Â·å¢å…‹åˆ›åŠçš„åŠ æ‹¿å¤§ç”µå­å•†åŠ¡è½¯ä»¶å¼€å‘å•†ï¼Œæ€»éƒ¨ä½äºåŠ æ‹¿å¤§é¦–éƒ½æ¸¥å¤ªåï¼Œå…¶æä¾›çš„æœåŠ¡è½¯ä»¶<code>Shopify</code>æ˜¯ä¸€ä¸ª<code>SaaS</code>é¢†åŸŸçš„è´­ç‰©è½¦ç³»ç»Ÿï¼Œé€‚åˆè·¨å¢ƒç”µå•†å»ºç«‹ç‹¬ç«‹ç«™ï¼Œç”¨æˆ·æ”¯ä»˜ä¸€å®šè´¹ç”¨å³å¯åœ¨å…¶ä¸Šåˆ©ç”¨å„ç§ä¸»é¢˜/æ¨¡æ¿å»ºç«‹è‡ªå·±çš„ç½‘ä¸Šå•†åº—ã€‚</p><p>&ensp;&ensp;&ensp;&ensp;ç”±äºæ˜¯å›½å¤–çš„å®˜ç½‘æ–‡æ¡£ä¹Ÿéƒ½æ˜¯è‹±æ–‡ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹åƒåŠ›å“¦ï¼ˆå°ç”Ÿè‹±æ–‡æ°´å¹³æœ‰é™ğŸ¤£ğŸ¤£ï¼‰ã€‚ä¸è¿‡ä¹‹ååº”è¯¥æœ‰ä¸­æ–‡äº†ç°åœ¨å¾ˆå¤šé¡µé¢æœ‰ä¸­æ–‡äº†å·²ç»ã€‚</p><p>&ensp;&ensp;&ensp;&ensp;è¯¥åº”è¯¥ç”¨æ’ä»¶å®˜æ–¹æ¨èæ˜¯ç”¨<code>React</code>çš„<code>next.js</code>æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ä»¥åŠ<code>node.js</code>ä½œä¸ºåç«¯è¯­è¨€ä½¿ç”¨<code>GraphQL</code>å¼€å‘ã€‚ä½œä¸ºæ²¡æ¥è§¦è¿‡<code>GraphQL</code>çš„æˆ‘èµ¶ç´§è¡¥äº†ä¸€æ³¢çŸ¥è¯†ã€‚åæ¥æˆ‘ä¸€è·¯è·Œè·Œæ’æ’ç»ˆäºç°åœ¨æ˜¯äº†è§£äº†ä¸€ä¸ªå¤§æ¦‚ã€‚æœ€ç»ˆæˆ‘è¿˜æ˜¯ä½¿ç”¨<code>node</code>ä½œä¸ºä¸»å…¥å£ç¨‹åºï¼ŒéªŒè¯åº”ç”¨æ’ä»¶è·å–ç›¸å…³çš„<code>access_token</code>å’Œå•†åº—åœ°å€ã€‚å‰©ä¸‹çš„è¯·æ±‚ä»€ä¹ˆ<code>Shopify</code>æ¥å£ä¹Ÿæ²¡æœ‰ç”¨<code>GraphQL</code>è€Œæ˜¯ä½¿ç”¨äº†<code>ResfulApi</code>è®©åç«¯å·¥ä½œäººå‘˜å»æ“ä½œäº†ï¼Œç„¶åæˆ‘è¯·æ±‚åç«¯æ¥å£è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚ï¼ˆæœ€åç†Ÿæ‚‰äº†ï¼Œä»€ä¹ˆéªŒè¯éƒ½æ˜¯ä¸¢ç»™åç«¯æ“ä½œäº†ï¼Œå‰ç«¯æˆ‘ä¹Ÿå°±å¯ä»¥ä½¿ç”¨å„ç§æ¡†æ¶äº†è€Œä¸æ˜¯å•å•åªèƒ½ä½¿ç”¨<code>next.js</code>ï¼‰ã€‚</p><h2 id="æ³¨å†Œè·å–å¼€å‘å‰æè¦ç´ "><a href="#æ³¨å†Œè·å–å¼€å‘å‰æè¦ç´ " class="headerlink" title="æ³¨å†Œè·å–å¼€å‘å‰æè¦ç´ "></a>æ³¨å†Œè·å–å¼€å‘å‰æè¦ç´ </h2><ol><li>åˆ›å»º<code>Shopify</code>å¼€å‘è€…è´¦å·<br><img src="https://user-gold-cdn.xitu.io/2020/1/16/16fadd29cd892624?w=1477&h=599&f=png&s=141044" alt=""><br>å¦‚å›¾åœ¨<a href="https://developers.shopify.com/" target="_blank" rel="noopener">https://developers.shopify.com/</a>ç½‘ç«™æ³¨å†Œç›¸å…³çš„è´¦å·ã€‚</li><li>åœ¨ç›¸å…³<code>partners</code>çš„é¡µé¢åˆ›å»ºå•†åº—(ä»¥ä¾›åé¢å¼€å‘åº”ç”¨ä½¿ç”¨)ä»¥åŠåº”ç”¨<br><img src="https://user-gold-cdn.xitu.io/2020/1/16/16fadd983d275ceb?w=1579&h=744&f=jpeg&s=164230" alt=""><ol><li>åœ¨åˆ›å»ºåº”ç”¨çš„æœ‰è‡ªå®šä¹‰åº”ç”¨å’Œå…¬å…±åº”ç”¨å¦‚å›¾ï¼š<br> <img src="https://user-gold-cdn.xitu.io/2020/1/16/16faddc034ed8c10?w=965&h=849&f=png&s=60560" alt=""><br> ä¸€èˆ¬æˆ‘ç›¸ä¿¡æˆ‘æˆ‘ä»¬éƒ½æ˜¯åˆ›å»ºçš„å…¬å…±åº”ç”¨ï¼Œåˆ°ç›®å‰æˆ‘å¼€å‘çš„åº”ç”¨ä¹Ÿéƒ½æ˜¯å…¬å…±ç±»å‹ï¼Œåœ¨åˆ›å»ºåº”ç”¨çš„æ—¶å€™<code>URL</code>å’Œç›¸å…³çš„é‡å®šå‘<code>URL</code>éƒ½æ˜¯å¿…é¡»å†™çš„å› ä¸ºæˆ‘ä¹Ÿæ²¡æœ‰æ³¨å†ŒåŸŸåå•¥çš„å§ï¼Œæ‰€ä»¥æ­¤æ—¶æ˜¯ç”¨äº†<code>ngrok</code>å†…ç½‘ç©¿é€ï¼Œåœ¨å®˜æ–¹çš„å¼€å‘ä»‹ç»ä¸­ä¹Ÿæ˜¯ä½¿ç”¨è¿™ä¸ªã€‚åœ¨æ­¤æˆ‘ä»¬å¡«å†™çš„<code>URL</code>å°±è¦å’Œä½ ä½¿ç”¨<code>ngrok</code>æš´éœ²å‡ºå»çš„åœ°å€å¯¹åº”äº†ï¼Œä¸è¿‡ä½¿ç”¨<code>node</code>çš„<code>koa</code>æ¡†æ¶æœ‰ä¸ªä¸“é—¨çš„ä¸­é—´ä»¶ä¹Ÿæ˜¯å®˜æ–¹ä½¿ç”¨çš„é‡å®šå‘åœ°å€éƒ½æ˜¯åŸŸåååŠ ä¸Šäº†<code>shopify/auth</code> ä¾‹å¦‚ï¼š  URL:<code>https://30aca829.ngrok.io</code>, é‡å®šå‘URL:<code>https://30aca829.ngrok.io/shopify/auth/</code>ï¼ˆç”µè„‘é‡å¯é‡æ–°æš´éœ²å‡ºå»è¿™ä¸ªè¿ä¸ªåœ°å€éƒ½æ˜¯è¦é‡æ–°å¡«ä¸€éï¼Œç„¶å<code>koa</code>çš„ä¸­é—´ä»¶å°±ä¼šè·³è½¬åˆ°<code>https://30aca829.ngrok.io/shopify/auth/</code>è¿›è¡Œç›¸å…³çš„éªŒè¯æ“ä½œã€‚ï¼ˆè¿™åœ¨åé¢çš„å…¥å£ï¼‰ã€‚åºä¸­ä¼šä¸Šä»£ç ï¼Œç„¶ååœ¨åæœŸæˆ‘ä»¬æ²¡æœ‰ç”¨<code>koa</code>ä½œä¸ºå…¥å£è¿™ä¸ªåœ°å€ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±æƒ³æ€ä¹ˆå¡«å°±æ€ä¹ˆå¡«ï¼‰ã€‚</li><li>åˆ›å»ºå®Œæˆï¼ˆæ‹¿å–ç›¸å…³çš„å¯†é’¥å¾ˆé‡è¦ï¼ï¼å¾ˆé‡è¦ï¼ï¼ä½œä¸ºå¼€å‘è¯»å–æ•°æ®å’Œè¯·æ±‚å®˜æ–¹<code>api</code>ä½¿ç”¨ï¼‰<br> <img src="https://user-gold-cdn.xitu.io/2020/1/16/16fade6ef2e35432?w=496&h=355&f=png&s=19659" alt=""><br> å·®ä¸å¤šäº†å‰æå°±è¿™äº›æ­¥éª¤ï¼Œæ³¨å†ŒæˆåŠŸä¹‹åå¡«å†™å¥½æ¥ä¸‹æ¥å°±æ˜¯ä¸€ç³»åˆ—ä»£ç æ“ä½œäº†ã€‚</li></ol></li></ol><h2 id="ç¼–å†™å¼€å‘ç¯å¢ƒç¨‹åº"><a href="#ç¼–å†™å¼€å‘ç¯å¢ƒç¨‹åº" class="headerlink" title="ç¼–å†™å¼€å‘ç¯å¢ƒç¨‹åº"></a>ç¼–å†™å¼€å‘ç¯å¢ƒç¨‹åº</h2><ol><li><p>åˆ›å»ºé¡¹ç›®ç›®å½•ï¼ˆsample-appï¼‰ï¼Œå¹¶ä½¿ç”¨<code>npm</code>åˆå§‹åŒ–é¡¹ç›®ç›®å½• </p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">npm init -y<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…ç›¸å…³ä¾èµ–</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">npm install --save react react-dom next<br></code></pre></td></tr></table></figure></li><li><p>å› ä¸ºæ˜¯ç”¨<code>next.js</code>æ‰€ä»¥ä¸ç†Ÿæ‚‰çš„è¿˜å¾—çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://nextjs.frontendx.cn/" target="_blank" rel="noopener">https://nextjs.frontendx.cn/</a></p><p> åˆ›å»ºæ–‡ä»¶<code>pages</code>å¹¶åœ¨ä¸‹é¢æ–°å»º<code>index.js</code></p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">const Index &#x3D; () &#x3D;&gt; (<br>  &lt;div&gt;<br>    &lt;p&gt;Sample app using React and Next.js&lt;&#x2F;p&gt;<br>  &lt;&#x2F;div&gt;<br>);<br><br>export default Index;<br></code></pre></td></tr></table></figure><p> æ·»åŠ ç›¸å…³è¿è¡Œå‘½ä»¤æ‰“å¼€<code>package.json</code>æ–‡ä»¶æ·»åŠ </p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#123;<br>  &quot;scripts&quot;: &#123;<br>    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,<br>    &quot;dev&quot;: &quot;next&quot;,<br>    &quot;build&quot;: &quot;next build&quot;,<br>    &quot;start&quot;: &quot;next start&quot;<br>  &#125;<br>&#125;<br>&#96;&#96;&#96; <br><br>è¿è¡Œå¼€å‘ç¯å¢ƒ<br></code></pre></td></tr></table></figure><p> npm run dev</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">    <br>    åˆ°è¿™é‡Œåº”è¯¥æ˜¯åˆ›å»ºä¸€ä¸ª&#96;next.js&#96;é¡¹ç›®ç„¶åæ¥ä¸‹æ¥å¯¹æ¥åˆ°&#96;Shopify&#96;<br>4. ä½¿ç”¨&#96;ngrok&#96;æš´éœ²å‡ºå»è‡ªå·±çš„&#96;3000&#96;ç«¯å£å› ä¸º&#96;next.js&#96;å¯åŠ¨çš„é»˜è®¤æ˜¯&#96;3000&#96;ç«¯å£<br></code></pre></td></tr></table></figure><p> ngrok http 3000</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">    ![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb29415dbff038?w&#x3D;976&amp;h&#x3D;519&amp;f&#x3D;png&amp;s&#x3D;30962)<br>    ç„¶ååœ¨è‡ªå·±åˆ›å»ºçš„åº”ç”¨ä¸­è®¾ç½®ä¸­æ·»åŠ &#96;å¯¹åº”çš„url&#96;ï¼ˆå¾—ç”¨&#96;https&#96;çš„ï¼‰å°±åœ¨ä¸Šé¢æ‰€è¯´çš„å¡«å†™&#96;url&#96;<br>    <br>5.  ä½¿ç”¨&#96;node&#96;çš„ &#96;koa&#96;æ¥è¿›è¡Œæ¸²æŸ“é¡µé¢æ“ä½œ<br>    1. åˆ›å»º&#96;env&#96;ç¯å¢ƒå˜é‡æ–‡ä»¶å¹¶å†™å…¥åœ¨ä¸Šé¢åˆ›å»ºçš„åº”ç”¨çš„&#96;KEY&#96;<br></code></pre></td></tr></table></figure><pre><code>SHOPIFY_API_KEY=&apos;YOUR API KEY FROM SHOPIFY PARTNERS DASHBOARD&apos;SHOPIFY_API_SECRET_KEY=&apos;YOUR API SECRET KEY FROM SHOPIFY PARTNERS DASHBOARD&apos; <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">2. å®‰è£…ç›¸å…³&#96;Shopify&#96;çš„éªŒè¯&#96;koa&#96;ä¸­é—´ä»¶<br></code></pre></td></tr></table></figure>npm install --save koa @shopify/koa-shopify-auth dotenv koa-session isomorphic-fetch<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">3. åˆ›å»º&#96;server.js&#96;å†™å…¥ç›¸å…³éªŒè¯ä»£ç <br></code></pre></td></tr></table></figure>require(&apos;isomorphic-fetch&apos;);const dotenv = require(&apos;dotenv&apos;);const Koa = require(&apos;koa&apos;);const next = require(&apos;next&apos;);const { default: createShopifyAuth } = require(&apos;@shopify/koa-shopify-auth&apos;);const { verifyRequest } = require(&apos;@shopify/koa-shopify-auth&apos;);const session = require(&apos;koa-session&apos;);dotenv.config();// graphqlçš„ç›¸å…³ä¸­é—´ä»¶const { default: graphQLProxy } = require(&apos;@shopify/koa-shopify-graphql-proxy&apos;); const { ApiVersion } = require(&apos;@shopify/koa-shopify-graphql-proxy&apos;);const port = parseInt(process.env.PORT, 10) || 3000;const dev = process.env.NODE_ENV !== &apos;production&apos;;const app = next({ dev });const handle = app.getRequestHandler();const { SHOPIFY_API_SECRET_KEY, SHOPIFY_API_KEY } = process.env; // ç¯å¢ƒå˜é‡é‡Œè¯»å– api-keyä¸api-secret-keyapp.prepare().then(() =&gt; {  const server = new Koa();  server.use(session(server));  server.keys = [SHOPIFY_API_SECRET_KEY];  server.use(    createShopifyAuth({      apiKey: SHOPIFY_API_KEY,      secret: SHOPIFY_API_SECRET_KEY,       scopes: [&apos;read_products&apos;, &apos;write_products&apos;], //å¡«å†™ç›¸å…³åº”ç”¨apiç›¸å…³è¯·æ±‚çš„æƒé™      afterAuth(ctx) {        const { shop, accessToken } = ctx.session; // é€šè¿‡sessionæ‹¿å–ç›¸å…³å•†åº—åœ°å€ä»¥åŠè¯·æ±‚apiéœ€è¦çš„accessToken        ctx.cookies.set(&apos;shopOrigin&apos;, shop, { httpOnly: false });         ctx.redirect(&apos;/&apos;); // é‡å®šå‘åˆ°indexé¦–é¡µ      },    }),  );  server.use(verifyRequest());  server.use(async (ctx) =&gt; {    await handle(ctx.req, ctx.res);    ctx.respond = false;    ctx.res.statusCode = 200;    return  });  server.use(graphQLProxy({version: ApiVersion.October19})) // è¿™é‡Œå¡«å†™ç›¸å…³apiçš„ç‰ˆæœ¬  server.listen(port, () =&gt; {    console.log(`&gt; Ready on http://localhost:${port}`); // ç›‘å¬ç«¯å£  });});<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">4. ä¿®æ”¹&#96;package.json&#96;æ–‡ä»¶ä½¿ç”¨æˆ‘ä»¬çš„&#96;server.js&#96;æ¥å¯åŠ¨é¡¹ç›®<br></code></pre></td></tr></table></figure>{  &quot;scripts&quot;: {    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,    &quot;dev&quot;: &quot;node server.js&quot;,    &quot;start&quot;: &quot;NODE_ENV=production node server.js&quot;,    &quot;build&quot;: &quot;next build&quot;,  }}<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">ç°åœ¨æˆ‘ä»¬å¯åŠ¨é¡¹ç›®å¹¶ä¸”ç”¨&#96;ngrok&#96;æš´éœ²å‡ºå»çš„åŸŸåå°±èƒ½çœ‹åˆ°<br><br>![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb2a914762cace?w&#x3D;434&amp;h&#x3D;214&amp;f&#x3D;png&amp;s&#x3D;6256)<br>è¿™é‡Œè¿˜è¦åœ¨åŸŸåçš„&#96;shop&#96;å¡«å†™æˆ‘ä»¬çš„å•†åº—åœ°å€ä¾‹å¦‚æˆ‘è‡ªå·±çš„ï¼š<br></code></pre></td></tr></table></figure>https://e44132cd.ngrok.io/auth/inline?shop=jetbn.myshopify.com<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain">        ä¸€åˆ‡å¡«å†™å°±ç»ªä¹‹åä¸€&#96;enter&#96;é¡µé¢å°±è‡ªåŠ¨è·³è½¬äº†ã€‚<br>        <br>        æœ€åå±•ç¤ºçš„é¡µé¢ï¼š<br>        ![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb2af2f6b051c0?w&#x3D;1317&amp;h&#x3D;551&amp;f&#x3D;png&amp;s&#x3D;32089)<br><br>## æŠ˜è…¾å…¶ä»–æ¡†æ¶å°è¯•<br>&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;å‰å‰ååéƒ½æ˜¯ä½¿ç”¨&#96;React&#96;çš„&#96;next.js&#96;å¼€å‘äº†ä¸¤ä¸‰ä¸ªåº”ç”¨ï¼Œæ„Ÿè§‰å°±æ˜¯å¼€å‘çš„æ—¶å€™å¤ªéº»çƒ¦äº†ï¼Œæ€»è¦å†…ç½‘ç©¿é€ï¼Œè€Œä¸”å±•ç¤ºçš„é¡µé¢éƒ½æ˜¯&#96;Shopify&#96;çš„çš„è‡ªå·±å¹³å°ä¸Šï¼Œè€Œä¸”å¼€å‘å†™å®Œä»£ç ç­‰å®ƒå“åº”è¿‡æ¥è¿˜å¾ˆæ…¢ã€‚å°±è¿™åŸå› æˆ‘åˆå¼€å§‹æŠ˜è…¾äº†å¯»æ±‚å…¶ä»–çš„æ–¹æ¡ˆçœ‹çœ‹æœ‰æ²¡æœ‰èƒ½åœ¨è‡ªå·±å¼€å‘å®Œäº†å†åˆ°å®ƒé‚£ä¸Šé¢ï¼Œè€Œä¸”è®©éªŒè¯&#96;Shopify&#96;çš„ä¸€ç³»åˆ—æ“ä½œè®©æˆ‘ä»¬çš„åç«¯å°å“¥æ¥æ“ä½œã€‚æœ€ç»ˆæˆ‘å‰ç«¯é€‰æ‹©&#96;Vue&#96;å¹¶ä¸”éªŒè¯éƒ½æ”¾åç«¯äº†ï¼Œè¿™æ ·æˆ‘å°±èƒ½åƒå¹³å¸¸å¼€å‘&#96;Vue&#96;é¡¹ä¸€æ ·äº†ã€‚<br><br>ä¸‹é¢ä»‹ç»ä¸‹æˆ‘çº¯å‰ç«¯è¿›è¡Œ&#96; Shopify&#96;çš„éªŒè¯æ“ä½œä½¿ç”¨&#96;vue&#96;ã€‚ï¼ˆå‰æè¦ç´ å†…ç½‘ç©¿é€ï¼Œä¸è¿‡å¼€å‘çš„æ—¶å€™ä¸éœ€è¦ï¼‰<br><br>1. æ·»åŠ å®‰è£…åº”ç”¨è·¯ç”±<br></code></pre></td></tr></table></figure></code></pre><p>  {</p><pre><code>path: &apos;/shopify/install&apos;,beforeEnter(to, _from, next) {  if (to.query.shop) {  //è¦åœ¨åŸŸååæ·»åŠ å¼€å‘çš„å•†åº—åœ°å€      const shop = to.query.shop,      scopes = &apos;read_orders,read_products,write_products&apos;, // apiæƒé™      // é‡å®šå‘åœ°å€å°±æ˜¯åœ¨åˆ›å»ºåº”ç”¨çš„æ—¶å€™å¡«å†™çš„ç¬¬äºŒä¸ªï¼ˆé‡å®šå‘URLå¯ä»¥è‡ªå·±éšæ„å†™äº†ï¼‰ï¼Œæˆ‘è¿™é‡Œæ˜¯åŸŸååŠ /shopify/auth      redirect_uri = &apos;https://&apos; + process.env.VUE_APP_ROOT_URL + &apos;/shopify/auth&apos;,       // æ‹¼æ¥å®‰è£…åº”ç”¨åœ°å€éœ€è¦SHOPIFY_API_KEYæˆ‘å¡«å†™åœ¨æˆ‘çš„.envæ–‡ä»¶ä¸­äº†      install_url =            &apos;http://&apos; + shop + &apos;/admin/oauth/authorize?client_id=&apos; +            process.env.VUE_APP_SHOPIFY_API_KEY +            &apos;&amp;scope=&apos; + scopes + &apos;&amp;redirect_uri=&apos; + redirect_uri    // æœ¬åœ°è·³è½¬å®‰è£…åœ°å€    window.location = install_url  } else {    next({ path: &apos;/error&apos; })  }}</code></pre><p>   },</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">    <br>2. é‡å®šå‘éªŒè¯è·¯ç”±<br></code></pre></td></tr></table></figure><p>   {</p><pre><code>path: &apos;/shopify/auth&apos;,beforeEnter(to, _from, next) {// é€šè¿‡å›è°ƒçš„urlè·å–ç›¸å…³çš„å‚æ•°  const shop = to.query.shop,    hmac = to.query.hmac,    code = to.query.code// ä½¿ç”¨SHOPIFY_API_SECRET_KEYéªŒè¯ å¹¶ä¸”ä¹‹åæ‹¿å–access_tokenï¼ˆè¿™æ­¥æ²¡å†™ï¼‰  if (shop &amp;&amp; hmac &amp;&amp; code) {    const map = Object.assign({}, to.query)    delete map[&apos;signature&apos;]    delete map[&apos;hmac&apos;]    const message = querystring.stringify(map)    const encrypted =      crypto.createHmac(&apos;sha256&apos;, process.env.VUE_APP_SHOPIFY_API_SECRET_KEY)            .update(message)            .digest(&apos;hex&apos;)    // const providedHmac =  Buffer.from(hmac, &apos;utf-8&apos;)    // const generatedHash = Buffer.from(encrypted, &apos;utf-8&apos;)    let hashEquals = false    try {      // later: Auth fails with `crypto.timingSafeEqual`      // hashEquals = crypto.timingSafeEqual(generatedHash, providedHmac)      hashEquals = hmac === encrypted    } catch (e) {      hashEquals = false    }    if (!hashEquals) {      next({ path: &apos;/error&apos; })    } else {      next(&apos;/&apos;)    }  } else {    next({ path: &apos;/error&apos; })  }}</code></pre><p>   }</p><pre><code>`Vue`è¿™ç›¸å…³çš„éªŒè¯æ–¹æ¡ˆä¹Ÿæ˜¯ä»`Github`ä¸Šé¢æçš„ï¼Œç‰¹åœ°è®°å½•ä¸‹ã€‚å…·ä½“åœ°å€å¿˜äº†ï¼Œæœ‰éœ€è¦è‡ªå·±å¯ä»¥æœæœã€‚ğŸ¤£</code></pre></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>&ensp;&ensp;&ensp;&ensp;ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç†Ÿæ‚‰ï¼Œè‡ªå·±ä¹Ÿç®—åˆæŒæ¡ä¸€é¡¹æ–°ä¸œè¥¿äº†ã€‚åˆšå¼€å§‹è¿™ä¸ª<code>Shopify</code>æ’ä»¶åº”ç”¨å¼€å‘çœŸçš„æ˜¯å·¨å‘å•Šï¼Œè™½ç„¶å®˜æ–¹æœ‰æ–‡æ¡£æµç¨‹ï¼Œä½†æ˜¯éƒ½æ˜¯è‹±æ–‡çš„è€Œä¸”åŸºç¡€çš„æ­å»ºéƒ½æ˜¯<code>api</code>éƒ½æ˜¯ç”¨<code>GraphQL</code>ç„¶åæˆ‘è‡ªå·±å°è¯•äº†éƒ½æ˜¯å„ç§è¶…æ—¶æ“ä½œï¼Œè¯·æ±‚ä¸åˆ°æœ€åå°±è‡ªå·±å¼ƒç”¨äº†ï¼Œç”¨<code>ResfulApi</code>ã€‚ç„¶åå°±æ˜¯é‡åˆ°é—®é¢˜å•Šå•¥çš„éƒ½è·Ÿæœ¬æœä¸åˆ°ï¼Œæˆ‘æƒ³ç€è¿™ä¹Ÿå¤ªéš¾äº†æˆ‘ï¼Œç„¶ååªèƒ½ç¡¬ç€å¤´çš®å»å®˜æ–¹æ–‡æ¡£é‡Œæ‰¾ï¼Œæœ€ååˆ°ç°åœ¨ä¹Ÿç®—æ˜¯èµ·èµ·ä¼ä¼ç»ˆäºéƒ½ç†Ÿæ‚‰äº†ï¼Œææ‡‚äº†ã€‚</p><p>&ensp;&ensp;&ensp;&ensp; è¿™ä¹‹åå‘ç°äº†è‹±æ–‡æ°´å¹³å¤ªé‡è¦äº†ã€‚è™½ç„¶å¼€å‘æ–‡æ¡£åŸºæœ¬å†…å®¹èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯éƒ½æ˜¯åŠçŒœåŠç–‘çš„ï¼Œç„¶åç¿»è¯‘ä¸€æ³¢ã€‚ï¼ˆå„ç§ä¸å‡†ç¡®ï¼‰ï¼Œç„¶åå¼€å§‹è¡¥è‹±æ–‡å§ã€‚ğŸ¤</p><p>&ensp;&ensp;&ensp;&ensp;  æœ€åæ”¾ä¸Šå‡ ä¸ª<code>Shopify</code>å¼€å‘å¸¸ç”¨çš„å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š</p><p>&ensp;&ensp;&ensp;&ensp;Shopify Partners(åˆ›å»ºåº”ç”¨æŸ¥çœ‹åº”ç”¨):  <a href="https://vue-composition-api-rfc.netlify.com" target="_blank" rel="noopener">https://vue-composition-api-rfc.netlify.com</a></p><p>&ensp;&ensp;&ensp;&ensp;Shopify Developers(å®˜æ–¹å¼€å‘æ–‡æ¡£):   <a href="https://developers.shopify.com" target="_blank" rel="noopener">https://developers.shopify.com</a>ï¼ˆæ­å»ºå‚è€ƒæ–‡æ¡£ï¼‰</p><p>&ensp;&ensp;&ensp;&ensp;Shopify Polaris(å®˜æ–¹UIæ¡†æ¶):   <a href="https://polaris.shopify.com" target="_blank" rel="noopener">https://developers.shopify.com</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/1/16/16facfbcc2c3ad20?w=500&amp;h=144&amp;f=png&amp;s=18435&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class
      
    
    </summary>
    
    
      <category term="Webå‰ç«¯" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="React" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/React/"/>
    
    
      <category term="Shopify" scheme="http://jetBn.github.io/tags/Shopify/"/>
    
      <category term="React" scheme="http://jetBn.github.io/tags/React/"/>
    
      <category term="Next.js" scheme="http://jetBn.github.io/tags/Next-js/"/>
    
  </entry>
  
  <entry>
    <title>mpvueå…¥å‘è®°å½•</title>
    <link href="http://jetbn.github.io/2020/04/29/mpvue%E5%85%A5%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>http://jetbn.github.io/2020/04/29/mpvue%E5%85%A5%E5%9D%91%E8%AE%B0%E5%BD%95/</id>
    <published>2020-04-29T02:57:09.000Z</published>
    <updated>2020-04-30T02:39:23.172Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•"><a href="#ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•" class="headerlink" title="ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•"></a>ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•</h2><p>&#160; &#160; &#160; &#160; å½“ä¸‹è½»åº”ç”¨ï¼Œéå¸ƒå„å¤§äº’è”ç½‘å…¬å¸ã€‚åƒç™¾åº¦ã€æ”¯ä»˜å®ã€å¾®ä¿¡ã€å­—èŠ‚éƒ½æ˜¯æœ‰è‡ªå·±çš„å°ç¨‹åºå½¢å¼ï¼Œå°±ç°åœ¨QQä¹Ÿæ¨å‡ºäº†å°ç¨‹åºçš„å½¢å¼ï¼Œåƒè¿™ç§è½»åº”ç”¨åˆä¸éœ€è¦å®‰è£…ï¼Œå°±èƒ½æ‰“å¼€ï¼Œè€Œä¸”ä¹Ÿç±»ä¼¼äº†appå½¢å¼ã€‚å½“ç„¶ç›¸å¯¹äºå½¢å¼ä¹Ÿä¸èƒ½è¯´ä¸ä¼šå¼€å‘å§ï¼Œè¯¥å­¦çš„è¿˜æ˜¯å¾—å­¦ã€‚æ‰€ä»¥ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šåŸºäºæ¡†æ¶å»¶ä¼¸è€Œå‡ºçš„æ‰“åŒ…ç”Ÿæˆå¤šä¸ªå¹³å°çš„å°ç¨‹åºï¼Œä¾‹å¦‚ åŸºäºreactçš„taroã€è¿˜æœ‰wepyã€mpvueç›®å‰åº”è¯¥è¿™ä¸ªä¸‰ä¸ªæœ€ç«çƒ­äº†ï¼Œç„¶åæˆ‘å°è¯•äº†mpvueå¼€å‘äº†è¿‡ç¨‹ä¸è¯´å‘è¿˜æ˜¯æœ‰çš„ã€‚è‡ªå·±ä¹Ÿæ˜¯ä¸€æ­¥æ­¥è§£å†³ï¼Œæ‰€ä»¥å†³å®šè®°å½•ä¸€ä¸‹ã€‚</p><ol><li><p>é¦–å…ˆå°±æ­å»ºäº†é¡¹ç›®ä½¿ç”¨ç›¸å…³ç¯å¢ƒè‡ªå·±ä¹Ÿæ˜¯å…¨éƒ¨å°è¯•äº†ä¸€éå®‰è£…äº†<code>scss</code>ç¯å¢ƒä»¥åŠ<code>vuex</code>ï¼Œå¥½åƒæœ‰è§£å†³çš„<code>vue-router</code>è‡ªå·±æ²¡æœ‰å°è¯•.</p><p>1.1  é¦–å…ˆè®²ä¸‹<code>scss</code>çš„<code>mixin</code>æˆ‘åœ¨å…¨å±€çš„æ—¶å€™å¼•å…¥åœ¨é¡µé¢é¡µé¢ä¸­èƒ½ç”¨ï¼Œä¸ºä»€ä¹ˆåœ¨ç»„ä»¶ä¸­ç”¨ä¸äº†è¿™æ˜¯å•¥æˆ‘ä¹Ÿä¸æ˜¯æ¸…æ¥šã€‚è¿˜æœ‰å°±æ˜¯æˆ‘åœ¨<code>scss</code>ä¸­ä½¿ç”¨<code>font</code>å­—ä½“çš„é—®é¢˜ï¼Œåœ¨æ­¤ä¸­æˆ‘é€šè¿‡æœ¬åœ°çš„æ–¹å¼å¼•å…¥å‘ç°å°±æ˜¯åŠ è½½ä¸äº†ï¼Œåæ¥å¯»æ‰¾æ–¹æ¡ˆåœ¨äº¤æµç¾¤ä¸­å¾—çŸ¥æ˜¯å¾—å°†æ–‡ä»¶æ”¾åœ¨<code>static</code>æ–‡ä»¶ä¸‹å¹¶ä¸”ä½¿ç”¨ç»å¯¹è·¯å¾„çš„æ–¹å¼å¼•ç”¨ï¼Œæ˜¯æœ‰æ•ˆä¸æŠ¥é”™äº†ã€‚ä½†æ˜¯å°ç¨‹åºæ‰“åŒ…åˆä¸Šä¼ äº†ä¸äº†ï¼Œåæ¥æˆ‘å°±ç›´æ¥å¹²è„†æ”¾æœåŠ¡å™¨ä¸Šäº†ï¼Œå†é€šè¿‡å¼•ç”¨ï¼Œè¿™ä¸‹æ€»æ²¡é—®é¢˜äº†ã€‚</p><p>1.2 å†æ¬¡å°±æ˜¯<code>vuex</code>åœ¨<code>main.js</code>ä¸­å¼•ç”¨åœ¨<code>vue</code>çš„åŸå‹ä¸ŠåŠ è€Œä¸æ˜¯åƒ<code>vue-cli</code>ä¸­ä½¿ç”¨ä¸€æ · ç›´æ¥å†™åœ¨<code>new VUE</code>ä¸­ã€‚</p><p>åœ¨main.jsä¸­å®šä¹‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plain">import Vue from &#39;vue&#39;<br>import App from &#39;.&#x2F;App&#39;<br>import store from &#39;.&#x2F;store&#39;<br><br>Vue.config.productionTip &#x3D; false<br>App.mpType &#x3D; &#39;app&#39;<br>Vue.prototype.$store &#x3D; store<br><br>const app &#x3D; new Vue(App)<br>app.$mount()<br></code></pre></td></tr></table></figure><p>åœ¨é¡µé¢ä¸­ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">this.$store.state<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨vuexçš„mapStateå¼•ç”¨æŸä¸ªstate</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; å¤´éƒ¨å¯¼å…¥<br>import &#123; mapState &#125; from &#39;vuex&#39;<br><br>&#x2F;&#x2F; åœ¨è®¡ç®—å±æ€§ä¸­<br><br>...mapState([<br>  &#39;carBrandCityPrev&#39; &#x2F;&#x2F; å¯¹åº”staeä¸­å®šä¹‰çš„<br>]),<br></code></pre></td></tr></table></figure></li><li><p>è‡ªå®šä¹‰TabBarè‡ªå·±åˆšå¼€å§‹ä½¿ç”¨ä¹Ÿæ˜¯ä¸€å¤´æ°´é›¾ï¼Œå¾®ä¿¡å°ç¨‹åºæ›´æ–°çš„å¾ˆå¿«ã€‚æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªå°ç¨‹åºç”¨çš„æ˜¯åŸç”Ÿå¼€å‘çš„æ—¶å€™ï¼Œé‚£æ—¶å€™è¿˜æ²¡æœ‰ä»€ä¹ˆå®šä¹‰TabBarå•Šã€å¯¼èˆªæ ã€ç»„ä»¶å•Šä»€ä¹ˆçš„ã€‚åæ¥æˆ‘ä¹Ÿæ˜¯çœ‹äº†ä¸‹å®˜æ–¹çš„demoä»¥åŠgithubä¸­mpuveé¡¹ç›®çš„issueä¸­æ‰¾è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆè¿˜æ˜¯ç›´æ¥ä¸Šæ‰‹æäº†ä¸€æ³¢ã€‚ä¸­é€”ä¹Ÿæ˜¯ååå·å·ã€‚</p><blockquote><p>è´´ä¸ªè‡ªå®šä¹‰tabbaråœ°å€: <a href="https://github.com/jetBn/mpvue-custom-tab-bar" target="_blank" rel="noopener">https://github.com/jetBn/mpvue-custom-tab-bar</a></p></blockquote></li><li><p>å°ç¨‹åºä¸­è·å–åœ°ç†ä½ç½®æˆæƒé—®é¢˜ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„ä¼šæç¤ºæ˜¯å¦æˆæƒå¦‚æœæ‹’ç»äº†æˆæƒç¬¬äºŒè¿›å…¥éƒ½ä¸ä¼šæˆæƒï¼Œéƒ½ä¼šèµ°æˆæƒä½ç½®çš„<code>fail</code>æ–¹æ³•,æ‰€ä»¥è¿™ä¸ªåŸå› é—®é¢˜ã€‚æˆ‘ä»¬åªèƒ½æ˜¯é€šè¿‡å¾®ä¿¡çš„è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®æ£€æŸ¥ <code>wx.getSetting</code>apiå»æ£€æŸ¥å½“å‰æ˜¯å¦æˆæƒï¼Œé€šè¿‡æ­¤æ–¹æ³•æ”¾åœ¨<code>fail</code>æ–¹æ³•ä¸­æ£€æµ‹å½“å‰æ˜¯å¦å¼€å¯æˆæƒåœ°ç†ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰é‡æ–°è°ƒç”¨åœ°ç†ä½ç½®æˆæƒçš„æ–¹æ³•ã€‚</p><p> ç›¸å…³æ£€æŸ¥æ˜¯å¦æˆæƒæ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; fnæŒ‡ç›¸å…³é‡æ–°æˆæƒçš„æ–¹æ³•<br>  export function checkGetLocationPermison (fn) &#123;<br>    wx.getSetting(&#123;<br>      success: (res) &#x3D;&gt; &#123;<br>        const status &#x3D; res.authSetting<br>        if (!status[&#39;scope.userLocation&#39;]) &#123;<br>          wx.showModal(&#123;<br>            title: &#39;æ˜¯å¦æˆæƒå½“å‰ä½ç½®&#39;,<br>            content: &#39;éœ€è¦è·å–æ‚¨çš„åœ°ç†ä½ç½®ï¼Œè¯·ç¡®è®¤æˆæƒï¼Œå¦åˆ™åœ°å›¾åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨è·å–ä¸äº†ä¼˜æƒ åˆ¸ä¿¡æ¯&#39;,<br>            success: (subRes) &#x3D;&gt; &#123;<br>              if (subRes.confirm) &#123;<br>                wx.openSetting(&#123;<br>                  success: (subRes) &#x3D;&gt; &#123;<br>                    if (subRes.authSetting[&#39;scope.userLocation&#39;] &#x3D;&#x3D;&#x3D; true) &#123;<br>                      wx.showToast(&#123;<br>                        title: &#39;æˆæƒæˆåŠŸ&#39;,<br>                        icon: &#39;success&#39;,<br>                        duration: 1000<br>                      &#125;)<br>                      fn()<br>                    &#125; else &#123;<br>                      wx.showToast(&#123;<br>                        title: &#39;æˆæƒå¤±è´¥&#39;,<br>                        icon: &#39;success&#39;,<br>                        duration: 1000<br>                      &#125;)<br>                    &#125;<br>                  &#125;<br>                &#125;)<br>              &#125;<br>            &#125;<br>          &#125;)<br>        &#125;<br>      &#125;,<br>      fail: () &#x3D;&gt; &#123;<br>        wx.showToast(&#123;<br>          title: &#39;è°ƒç”¨æˆæƒçª—å£å¤±è´¥&#39;,<br>          icon: &#39;success&#39;,<br>          duration: 1000<br>        &#125;)<br>      &#125;<br>    &#125;)<br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨mpvueæ˜¯axioså…¨å±€å¤„ç†è¯·æ±‚è¿”å›å€¼ä»¥åŠè¯·æ±‚å¤´è®¾ç½®ç­‰ç­‰ã€‚åœ¨<code>npm i axios qs</code>åæ–°å»º<code>request.js</code>æ–‡ä»¶ï¼Œå¼•å…¥<code>qs</code>å¤„ç†<code>axios</code>ä¸­postè¯·æ±‚ï¼Œç„¶åå¾®ä¿¡å°ç¨‹åºä¸­æ˜¯ä½¿ç”¨<code>wx.request</code>å‘é€è¯·æ±‚çš„å¹¶ä¸æ˜¯ç›´æ¥ä½¿ç”¨axioså°±å¯ä»¥çš„ï¼Œæ‰€ä»¥ä½¿ç”¨<code>axios</code>çš„<code>adapter</code> å±æ€§è¿›è¡Œæˆ‘ä»¬çš„è¯·æ±‚æ“ä½œã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; åˆ›å»ºaxioså®ä¾‹<br>const Axios &#x3D; axios.create(&#123;<br>  baseURL: &#39;&#39;, &#x2F;&#x2F; è®¾ç½®è¯·æ±‚åŸŸååœ°å€<br>  timeout: 1000 * 60 * 10, &#x2F;&#x2F; è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´<br>  responseType: &#39;json&#39; &#x2F;&#x2F; è®¾ç½®è¿”å›å€¼ç±»å‹<br>&#125;)<br><br><br>&#x2F;&#x2F; ç„¶åä½¿ç”¨Axioså®ä¾‹çš„adapterè¿›è¡Œå°è£…å¾®ä¿¡è¯·æ±‚<br>Axios.defaults.adapter &#x3D; (config) &#x3D;&gt; &#123;<br>  return new Promise((resolve, reject) &#x3D;&gt; &#123;<br>    let data &#x3D; config.method &#x3D;&#x3D;&#x3D; &#39;get&#39; ? config.params : qs.stringify(config.params)<br>    wx.request(&#123;<br>      url: config.url,<br>      method: config.method,<br>      header: &#123;&#39;Content-type&#39;: &#39;application&#x2F;x-www-form-urlencoded&#39;&#125;,<br>      data,<br>      success: (res) &#x3D;&gt; (resolve(res)),<br>      fail: (err) &#x3D;&gt; (reject(err))<br>    &#125;)<br>  &#125;)<br>&#125;<br><br>&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆª<br>Axios.interceptors.request.use((request) &#x3D;&gt; &#123;<br>  return request<br>&#125;, (error) &#x3D;&gt; &#123;<br>  return Promise.reject(error)<br>&#125;)<br><br>&#x2F;&#x2F; å“åº”æ‹¦æˆª<br>Axios.interceptors.response.use((response) &#x3D;&gt; &#123;<br>    return response<br>&#125;, (error) &#x3D;&gt; &#123;<br>     return Promise.reject(error)<br>&#125;)<br><br>&#x2F;&#x2F; å¯¼å‡ºå“åº”çš„æ–¹æ³•<br>export function fetch (options) &#123;<br>  return new Promise((resolve, reject) &#x3D;&gt; &#123;<br>    Axios(options)<br>      .then(response &#x3D;&gt; &#123;<br>        resolve(response)<br>      &#125;)<br>      .catch(error &#x3D;&gt; &#123;<br>        reject(error)<br>      &#125;)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç›¸å…³è‡ªå®šä¹‰å¤´éƒ¨å¯¼èˆªæ æ ¹æ®ç›¸å…³è®¾å¤‡åˆ¤æ–­è®¾ç½®é«˜åº¦ï¼Œç›¸å…³è®¡ç®—æ˜¯é¡¶éƒ¨çŠ¶æ€æ çš„é«˜åº¦åŠ ä¸Šç›¸å…³å®šä¹‰çš„é«˜åº¦ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;å¾®ä¿¡è·å–ç›¸å…³è®¾å¤‡ä¿¡æ¯çš„API<br>wx.getSystemInfo(&#123;<br>  success (system) &#123;<br>    &#x2F;&#x2F; console.log(&#96;system:&#96;, system)<br>    self.statusBarHeight &#x3D; system.statusBarHeight<br>    self.platform &#x3D; system.platform<br>    const windowHeight &#x3D; system.windowHeight<br>    let platformReg &#x3D; &#x2F;ios&#x2F;i<br>    if (platformReg.test(system.platform)) &#123;<br>      self.titleBarHeight &#x3D; 44  &#x2F;&#x2F; isoçš„é«˜åº¦<br>    &#125; else &#123;<br>      self.titleBarHeight &#x3D; 48  &#x2F;&#x2F;android çš„é«˜åº¦<br>    &#125;<br>    self.navBarHeight &#x3D; self.statusBarHeight + self.titleBarHeight<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>mpvueä¸­ä½¿ç”¨ç»„ä»¶å¼å°è£… ç„¶åæ˜¯å†…å®¹ä½¿ç”¨æ’æ§½å½¢å¼ï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„ä½¿ç”¨æ’æ§½å†…çš„å†…å®¹æ•°æ®æ›´æ–°é¡µé¢ä¸ä¼šå®æ—¶æ›´æ–° ã€‚ï¼ˆçˆ¶ç»„ä»¶æ’æ§½å†…å®¹å—ä¸­ä½¿ç”¨çš„ä¹Ÿæ˜¯ç»„ä»¶å°è£…çš„ç»„ä»¶ï¼‰ï¼ˆé—®é¢˜1ï¼‰ã€‚ç„¶åæˆ‘ä½¿ç”¨äº† ä¸å°è£…ç»„ä»¶ ç›´æ¥å†™é¡µé¢æ ·å¼ç‚¹å‡»ç»„ä»¶çš„äº‹ä»¶ä¼šè§¦å‘æ’æ§½ä¸­çš„äº‹ä»¶ï¼Ÿï¼Ÿï¼Ÿï¼ˆé—®é¢˜2ï¼‰ äº‹ä»¶è·Ÿæ’æ§½ä¸­çš„äº‹ä»¶ä¸åœ¨åŒä¸€ä¸ªdivä¸­ã€‚æœ€åå°±æ˜¯ä¸ç”¨æ’æ§½æ‰è§£å†³äº†ä¸Šè¿°é—®é¢˜1ï¼Œ2</p></li><li><p><code>npm run dev</code> ä¼šå¡åœ¨<code>node build/dev-server.js wx</code> æœ€åæˆ‘è‡ªå·±ä¹Ÿæ˜¯åœ¨å®˜æ–¹çš„githubä»“åº“ä¸­çš„<code>issu</code>ä¸­æ‰¾åˆ°è§£å†³æ–¹æ¡ˆåœ¨buildæ–‡ä»¶å¤¹çš„<code>build.js</code>ä¸­<code>require(&#39;./check-versions&#39;)()</code>æ³¨é‡Šæ‰ç„¶åä¹Ÿå°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚å…·ä½“çš„å¥½åƒæ˜¯åœ¨ç»è¿‡<code>check-versions</code>å‡½æ•°çš„æ—¶å€™æ‰§è¡Œç‰¹åˆ«çš„æ…¢ã€‚</p></li></ol><p>&#160; &#160; &#160; &#160;æœ€åæ€»ç»“ä¸‹<code>MpVue</code>è¿™ä¸ªç›¸å¯¹äº<code>vue</code>é’ˆå¯¹äºå°ç¨‹åºçš„æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨<code>vue</code>ç›¸å…³è¯­æ³•æ‰€ä»¥å¯¹äºç†Ÿæ‚‰<code>vue</code>çš„æ¥è¯´è¿˜æ˜¯å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚å¼€å‘æ•ˆç‡ä¹Ÿè¿˜å¯ä»¥ã€‚æ„Ÿè§‰ä¼šä½¿ç”¨<code>vue</code>å†æ¬¡ç†Ÿæ‚‰å¾®ä¿¡å°ç¨‹åºå®˜æ–¹çš„APIå¼€å‘æ•ˆç‡è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰æŒºå¤šå‘çš„ï¼Œæˆ‘è¿™è¾¹å‘å¯èƒ½æ˜¯æ²¡æœ‰é‡åˆ°å¾ˆå¤šã€‚å¾ˆå¹¸è¿ï¼Œå…·ä½“çš„ç›¸å…³çš„è¯­æ³•æƒ…å†µå¯ä»¥å¯¹åº”å®˜æ–¹ç½‘ç«™çš„ä»‹ç»æƒ…å†µã€‚</p><p>&#160; &#160; &#160; &#160;æœ€åé™„ä¸Šç›¸å…³ç½‘ç«™åœ°å€ï¼š</p><p>&#160; &#160; &#160; &#160;å®˜æ–¹ç½‘ç«™ï¼š<a href="http://mpvue.com" target="_blank" rel="noopener">http://mpvue.com</a></p><p>&#160; &#160; &#160; &#160;githubç›¸å…³ä»“åº“åœ°å€ï¼š <a href="https://github.com/Meituan-Dianping/mpvue" target="_blank" rel="noopener">https://github.com/Meituan-Dianping/mpvue</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•&quot;&gt;&lt;/a&gt;ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•&lt;/h2&gt;&lt;p&gt;&amp;#160; &amp;#160; &amp;#160; &amp;
      
    
    </summary>
    
    
      <category term="Webå‰ç«¯" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
      <category term="Vue" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/"/>
    
      <category term="å°ç¨‹åº" scheme="http://jetBn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="å°ç¨‹åº" scheme="http://jetBn.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
</feed>
