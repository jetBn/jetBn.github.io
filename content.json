{"meta":{"title":"Hexo","subtitle":"","description":"","author":"jetBn","url":"http://jetBn.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2020-04-29T02:52:27.761Z","updated":"2020-04-29T02:52:27.761Z","comments":false,"path":"about/index.html","permalink":"http://jetbn.github.io/about/index.html","excerpt":"","text":"ä¸ªäººç®€ä»‹"},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2020-04-28T09:38:58.115Z","updated":"2020-04-28T09:38:58.115Z","comments":false,"path":"/404.html","permalink":"http://jetbn.github.io/404.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2020-04-28T09:38:58.119Z","updated":"2020-04-28T09:38:58.119Z","comments":true,"path":"links/index.html","permalink":"http://jetbn.github.io/links/index.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2020-04-28T09:38:58.118Z","updated":"2020-04-28T09:38:58.118Z","comments":false,"path":"books/index.html","permalink":"http://jetbn.github.io/books/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2020-04-28T09:38:58.119Z","updated":"2020-04-28T09:38:58.119Z","comments":false,"path":"categories/index.html","permalink":"http://jetbn.github.io/categories/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2020-04-28T09:38:58.120Z","updated":"2020-04-28T09:38:58.120Z","comments":false,"path":"repository/index.html","permalink":"http://jetbn.github.io/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2020-04-28T09:38:58.121Z","updated":"2020-04-28T09:38:58.121Z","comments":false,"path":"tags/index.html","permalink":"http://jetbn.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Event Loop","slug":"Event-Loop","date":"2021-07-05T03:54:44.000Z","updated":"2021-07-05T03:56:06.653Z","comments":true,"path":"2021/07/05/Event-Loop/","link":"","permalink":"http://jetbn.github.io/2021/07/05/Event-Loop/","excerpt":"","text":"Event Loop å…³äºjavascirpt javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œ è™½ç„¶HTML5æå‡ºäº†web-workè¿™æ ·å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¾æ—§æ²¡æœ‰æ”¹å˜javascriptæ˜¯å•çº¿ç¨‹çš„æœ¬è´¨ã€‚ > å…³äºHMLT5çš„web-work å®ƒå…¶å®å°±æ˜¯å°†ä¸€äº›å¤§é‡çš„è®¡ç®—ä»£ç äº¤ç»™web workå»å¤„ç†è¿è¡Œè€Œä¸å†»ç»“ç”¨æˆ·ç•Œé¢ï¼Œå°±æ˜¯é˜»å¡UIçš„æ¸²æŸ“ï¼Œä½†æ˜¯å­çº¿ç¨‹æ˜¯å®Œå…¨å—ä¸»çº¿ç¨‹çš„æ§åˆ¶çš„ï¼Œè€Œä¸”ä¸èƒ½å’Œé¡µé¢è¿›è¡Œäº¤äº’ï¼Œå¦‚è·å–å…ƒç´ ï¼Œ alertç­‰ï¼Œä½†æ˜¯çº¿ç¨‹ä¹‹é—´æ˜¯å¯ä»¥è¿›è¡Œä¼ é€’æ•°æ®çš„ã€‚ javascriptçš„äº‹ä»¶å¾ªç¯ ç”±äºjsæ˜¯å•çº¿ç¨‹çš„ï¼Œå°±æ˜¯åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšåŒä¸€ä¸ªäº‹æƒ…ï¼Œé‚£ä¹ˆå°±å¼•å‡ºé—®é¢˜äº†ï¼Œæˆ‘ä»¬è®¿é—®ä¸€ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šçš„å›¾ç‰‡ã€è§†é¢‘ç­‰ç­‰èµ„æºï¼ŒåŠ è½½çš„æ—¶å€™æˆ‘ä»¬è‚¯å®šä¸æ˜¯åœ¨é‚£ç­‰çš„ï¼Œæ‰€ä»¥å°±å¼•å…¥ä¸¤ç§ä»»åŠ¡ åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡ã€‚ åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„åœºæ‰€åˆ†æ”¯ã€‚æ‰§è¡ŒåŒæ­¥çš„ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼Œè€Œå¼‚æ­¥ä»»åŠ¡è¿›å…¥Event Tableä¸­æ³¨å†Œå¹¶ä¸”è¿”å›å›è°ƒå‡½æ•° å½“è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œçš„ç»“æœï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå›è°ƒå‡½æ•°ç§»å…¥Event Queueä¸­è¿›å…¥ç­‰å¾…çš„ä¸€ç§çŠ¶æ€ã€‚ å½“ä¸»çº¿ç¨‹åŒæ­¥çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œ ä¼šå»Event Queueä¸­è¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶ä¸”ç»“æŸå®ƒçš„ç­‰å¾…çŠ¶æ€ï¼Œè®©å®ƒè¿›å…¥ä¸»çº¿ç¨‹ è¡Œæ‰§è¡Œã€‚ ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ç€ä¸Šé¢çš„3ä¸ªæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„Event loopäº‹ä»¶å¾ªç¯ã€‚ é‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆä¸ºç©ºçš„ï¼Ÿ å…¶å®jså¼•æ“åœ¨monitoring process ç›‘æ§è¿›ç¨‹ï¼Œä¸ä¼šä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ ä»»åŠ¡é˜Ÿåˆ—è§£é‡Š > 1. \"ä»»åŠ¡é˜Ÿåˆ—\"æ˜¯ä¸€ä¸ªäº‹ä»¶çš„é˜Ÿåˆ—ï¼ˆä¹Ÿå¯ä»¥ç†è§£æˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œ IOè®¾å¤‡å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œå°±åœ¨\"ä»»åŠ¡é˜Ÿåˆ—\"ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºç›¸å…³çš„å¼‚æ­¥ä»»åŠ¡å¯ä»¥è¿›å…¥\"æ‰§è¡Œæ ˆ\"äº†ã€‚ä¸»çº¿ç¨‹è¯»å–\"ä»»åŠ¡é˜Ÿåˆ—\"ï¼Œå°±æ˜¯è¯»å–é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ ã€‚ >2. \"ä»»åŠ¡é˜Ÿåˆ—\"ä¸­çš„äº‹ä»¶ï¼Œé™¤äº†IOè®¾å¤‡çš„äº‹ä»¶ä»¥ä¸ºï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶ï¼ˆæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ï¼Œé¡µé¢æ»šåŠ¨ç­‰ç­‰ï¼‰ã€‚åªè¦æŒ‡å®šè¿‡å›è°ƒå‡½æ•°ï¼Œè¿™äº›äº‹ä»¶å‘ç”Ÿæ—¶å°±ä¼šè¿›å…¥\"ä»»åŠ¡é˜Ÿåˆ—\"ï¼Œç­‰å¾…ä¸»çº¿ç¨‹çš„è¯»å–ã€‚ >3. æ‰€è°“\"å›è°ƒå‡½æ•°\"(callback), å°±æ˜¯é‚£äº›ä¼šè¢«ä¸»çº¿ç¨‹æŒ‚èµ·æ¥çš„ä»£ç ã€‚å¼‚æ­¥ä»»åŠ¡å¿…é¡»æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œå½“ä¸»çº¿ç¨‹å¼€å§‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå°±æ˜¯æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ > 4. \"ä»»åŠ¡é˜Ÿåˆ—\"æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ’åœ¨å‰é¢çš„äº‹ä»¶ï¼Œä¼˜å…ˆè¢«ä¸»çº¿ç¨‹è¯»å–ã€‚ä¸»çº¿ç¨‹çš„è¯»å–è¿‡ç¨‹åŸºæœ¬ä¸Šè‡ªåŠ¨çš„ï¼Œ åªè¦æ‰§è¡Œæ ˆä¸€æ¸…ç©ºï¼Œ\"ä»»åŠ¡é˜Ÿåˆ—\"ä¸Šçš„ç¬¬ä¸€ä½äº‹ä»¶å°±è‡ªåŠ¨è¿›å…¥ä¸»çº¿ç¨‹ã€‚ä½†æ˜¯ï¼Œç”±äºå­˜åœ¨åæ–‡æåˆ°çš„\"å®šæ—¶å™¨\"åŠŸèƒ½ï¼Œä¸»çº¿ç¨‹é¦–å…ˆè¦æ£€æŸ¥ä¸€ä¸‹æ‰§è¡Œæ—¶é—´ï¼ŒæŸäº›æ—¶é—´åªæœ‰åˆ°äº†è§„å®šçš„æ—¶é—´ï¼Œæ‰èƒ½è¿”å›ä¸»çº¿ç¨‹ã€‚ > 5. è¯»å–åˆ°ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œé¦–å…ˆæ˜¯å°†å¼‚æ­¥ä»»åŠ¡æ”¾è¿›äº‹ä»¶è¡¨æ ¼ï¼ˆEvent tableï¼‰ä¸­ï¼Œå½“æ”¾è¿›äº‹ä»¶è¡¨æ ¼ä¸­çš„å¼‚æ­¥ä»»åŠ¡å®ŒæˆæŸç§äº‹æƒ…æˆ–è€…è¾¾æˆæŸäº›æ¡ä»¶ï¼ˆå¦‚setTimeoutäº‹ä»¶åˆ°äº†ï¼Œé¼ æ ‡ç‚¹å‡»äº†ï¼Œ æ•°æ®æ–‡ä»¶è·å–åˆ°äº†ï¼‰ä¹‹åï¼Œæ‰å°†è¿™äº›å¼‚æ­¥ä»»åŠ¡æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰ä¸­ï¼Œè¿™æ—¶å€™çš„å¼‚æ­¥ä»»åŠ¡æ‰æ˜¯æ‰§è¡Œæ ˆä¸­ç©ºé—²çš„æ—¶å€™æ‰èƒ½è¯»å–åˆ°çš„å¼‚æ­¥ä»»åŠ¡ã€‚ å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ å®ä»»åŠ¡(macro-task)åŒ…æ‹¬ï¼šsetTimeout, setInterval, setImmediate, I/O, UIäº¤äº’äº‹ä»¶ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ å¾®ä»»åŠ¡(micro-task)åŒ…æ‹¬ï¼š Promises, Object.observe, MutationObserver, process.nextTick, ä¸”process.nextTickä¼˜å…ˆçº§å¤§äºpromise.thenã€‚å¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼› å®ä»»åŠ¡ã€å¾®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåº ä¸»è¦çš„æ¥è®²å°±æ˜¯å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥å®ä»»åŠ¡åˆ™å°†å¼‚æ­¥å®ä»»åŠ¡æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œé‡åˆ°å¼‚æ­¥å¾®ä»»åŠ¡åˆ™å°†å¼‚æ­¥å¾®ä»»åŠ¡æ”¾å…¥å¾®ä»»åŠ¡çš„é˜Ÿåˆ—ä¸­ï¼Œå½“æ‰€æœ‰çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œå†å°†å¼‚æ­¥å¾®ä»»åŠ¡ä»é˜Ÿåˆ—ä¸­è°ƒå‡ºæ¥è¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå†å°†å¼‚æ­¥å®ä»»åŠ¡ä»é˜Ÿåˆ—ä¸­è°ƒå–å‡ºæ¥åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸€ç›´å¾ªç¯ç›´è‡³æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚ ä¸€é“é¢è¯•é¢˜ä»£ç åˆ†æ 123456789101112131415161718192021222324252627282930313233343536console.log(&#39;1&#39;);async function async1() &#123; console.log(&#39;2&#39;); await async2(); console.log(&#39;3&#39;);&#125;async function async2() &#123; console.log(&#39;4&#39;);&#125;process.nextTick(function() &#123; console.log(&#39;5&#39;);&#125;)setTimeout(function() &#123; console.log(&#39;6&#39;); process.nextTick(function() &#123; console.log(&#39;7&#39;); &#125;) new Promise(function(resolve) &#123; console.log(&#39;8&#39;); resolve(); &#125;).then(function() &#123; console.log(&#39;9&#39;) &#125;)&#125;)async1();new Promise(function(resolve) &#123; console.log(&#39;10&#39;); resolve();&#125;).then(function() &#123; console.log(&#39;11&#39;);&#125;);console.log(&#39;12&#39;); ç¬¬ä¸€è½®æ—¶é—´å¾ªç¯æµç¨‹ï¼š æ•´ä½“scriptä»£ç ä½œä¸ºä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º1 é‡åˆ°async1ã€async2å‡½æ•°å£°æ˜ï¼Œ å£°æ˜æš‚æ—¶ä¸ç”¨ç®¡ é‡åˆ°process.nextTick()ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œæˆ‘ä»¬è®°ä¸ºprocess1 é‡åˆ°setTimeoutï¼Œ å®ƒçš„å›è°ƒè¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬æš‚è®°ä¸ºsetTimeout1 æ‰§è¡Œasync1ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º2 å½“ä½¿ç”¨asyncå®šä¹‰çš„å‡½æ•°ï¼Œå½“å®ƒè¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡è€Œå½“awaitåé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªPromiseæ—¶ï¼Œå®ƒçš„è¿”å›å€¼å®é™…ä¸Šæ˜¯Promiseçš„å›è°ƒresloveçš„å‚æ•° é‡åˆ°await async2()è°ƒç”¨ï¼Œå‘ç°async2ä¹Ÿæ˜¯ä¸€ä¸ªå®šä¹‰asyncçš„å‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥æ‰§è¡Œè¿”å›4ï¼ŒåŒæ—¶è¿”å›äº†ä¸€ä¸ªPromiseã€‚ï¼ˆè¿™é‡Œè¿”å›çš„Promiseè¢«åˆ†é…åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œ æˆ‘ä»¬è®°ä¸ºawait1ã€‚awaitä¼šè®©å‡ºçº¿ç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šè·³å‡ºasync1å‡½æ•°ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼‰ é‡åˆ°Promise, new Promiseç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º10ã€‚thenè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºthen1 é‡åˆ°console.log è¾“å‡º12 å®ä»»åŠ¡Event Queue å¾®ä»»åŠ¡Event Queue setTimeout1 process1 &nbsp; await1 &nbsp; then1 è¿™æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸæ—¶å€™å„ä¸ªEvent Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡º 1 2 4 10 12 è¿™æ—¶å€™å­˜åœ¨process1ï¼Œawait1ï¼Œthen1ä¸‰ä¸ªå¾®ä»»åŠ¡ï¼Œè¿›è¡Œä¾æ¬¡æ‰§è¡Œ æ‰§è¡Œprocess1è¾“å‡º5 å–åˆ°await1ï¼Œ å°±æ˜¯async1æ”¾è¿›å»çš„Promiseï¼Œæ‰§è¡ŒPromiseæ—¶å€™å‘ç°äº†é‡åˆ°äº†ä»–çš„resloveå‡½æ•°ï¼Œï¼ˆè¿™é‡Œè¿™ä¸ªresloveå‡½æ•°åˆä¼šè¢«æ”¾å…¥å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºawait2ï¼Œç„¶åå†æ¬¡è·³å‡ºasync1å‡½æ•°ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ï¼‰ æ‰§è¡Œthen1è¾“å‡º11 å®ä»»åŠ¡Event Queue å¾®ä»»åŠ¡Event Queue setTimeout1 await2 åˆ°è¿™é‡Œè¾“å‡º1 2 4 10 12 5 11ï¼Œç„¶åæˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•äº† æ–°åŠ å…¥äº†ä¸€ä¸ªawait2çš„å¾®ä»»åŠ¡åœ¨å¾®ä»»åŠ¡Event Queueä¸­ã€‚ æ­¤æ—¶æˆ‘ä»¬è¿›è¡Œæ‰§è¡Œawait2å¾®ä»»åŠ¡ï¼Œå®ƒæ˜¯async1æ”¾è¿›å»Promiseçš„resloveå›è°ƒï¼Œæ‰§è¡Œå®ƒï¼ˆå› ä¸ºasync2å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œ æ‰€ä»¥è¿™ä¸ªresloveçš„å‚æ•°æ˜¯undefinedï¼‰ï¼Œæ­¤æ—¶awaitå®šä¹‰çš„è¿™ä¸ªPromiseå·²ç»æ‰§è¡Œå®Œæ¯•å¹¶ä¸”è¿”å›äº†ç»“æœï¼Œ æ‰€ä»¥å¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œasync1å‡½æ•°åé¢çš„ä»»åŠ¡äº†ï¼Œé‚£å°±æ˜¯console.log(3)ï¼Œ è¾“å‡º 3 ç°åœ¨åˆ°è¿™é‡Œæˆ‘ä»¬ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸäº†ï¼Œæ­¤æ—¶ï¼Œè¾“å‡ºä¸º 1 2 4 10 12 5 11 3 ç°åœ¨å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œè¿›è¡Œç¬¬äºŒè½®çš„äº‹ä»¶å¾ªç¯ä»setTimeout1å®ä»»åŠ¡å¼€å§‹ é‡åˆ°console.logï¼Œè¾“å‡º6 é‡åˆ°process.nextTick()ï¼Œè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­å»ï¼Œè®°ä¸ºprocess2 é‡åˆ°new Promiseç«‹å³æ‰§è¡Œåè¾“å‡º8ï¼Œç„¶åthenè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueï¼Œè®°ä¸ºthen2 å®ä»»åŠ¡Event Queue å¾®ä»»åŠ¡Event Queue &nbsp; process2 &nbsp; then2 ä¸Šè¿°è¡¨æ ¼ä¸ºäºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸå„ä¸ªEvent Queueçš„æƒ…å†µï¼Œè¿™æ—¶å€™çš„æƒ…å†µæ˜¯å­˜åœ¨ä¸¤ä¸ªå¾®ä»»åŠ¡process2å’Œthen2 æ‰§è¡Œprocess2ï¼Œ è¾“å‡º7 æ‰§è¡Œthen2ï¼Œè¾“å‡º9 ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®ç»“æœä¸º 6 8 7 9 æ‰€ä»¥æœ€åçš„è¾“å‡ºç»“æœä¸º1 2 4 10 12 5 11 3 6 8 7 9 æœ€å é€šè¿‡é¢˜ç›®ä¸ç†è®ºçš„ç»“åˆæ›´æ·±åˆ»çš„ç†è§£javascirptä¸­Event loop","categories":[],"tags":[],"author":"jetBn"},{"title":"definePropertyä¸Proxy","slug":"efinePropertyä¸Proxy","date":"2021-07-05T03:54:31.000Z","updated":"2021-07-05T03:56:31.594Z","comments":true,"path":"2021/07/05/efinePropertyä¸Proxy/","link":"","permalink":"http://jetbn.github.io/2021/07/05/efineProperty%E4%B8%8EProxy/","excerpt":"","text":"definePropertyä¸Proxy ç®€è¿°ä»‹ç» definePropertyæ˜¯ES5å¯¹è±¡Objectçš„apiï¼Œè€ŒProxyåˆ™æ˜¯ES6å®ç°çš„çš„apiéƒ½æ˜¯å¯ä»¥å®ç°æ•°æ®ç›‘å¬ä¸åŠ«æŒï¼ŒProxyçš„è¡¨é¢æ„æ€ä¸Šæ›´åƒæ˜¯ä¸€ç§ä»£ç†çš„æ„æ€ï¼Œå®ƒæ¯”ES5çš„ definePropertyæ›´å‹å¥½çš„ç›‘å¬å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå®ƒä»£ç†çš„æ˜¯æ•´ä¸ªå¯¹è±¡ï¼Œå®ç°çš„ç›‘å¬ï¼Œè€ŒdefinePropertyæ˜¯éå†å¯¹è±¡çš„æ¯ä¸ªå±æ€§ï¼Œè€Œä¸”è¿˜ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–ã€‚Vue2.xçš„æ•°æ®ç»‘å®šå°±æ˜¯ç”¨defineProperty()å®ç°çš„ï¼Œç°åœ¨Vue3.xç‰ˆæœ¬ä¹Ÿæ˜¯æ”¹ç”¨äº†Proxyæ¥å®ç°ï¼Œæ‰€ä»¥å°±æ›´æ·±å±‚æ¬¡ç†è§£ä¸‹è¿™ä¸¤ä¸ªapiã€‚ Object.defineProperty()å¼•ç”¨MDNä¸Šçš„ç›¸å…³ä»‹ç»è¯¥æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚ Object.defineProperty(obj, prop, descriptor) å‚æ•°objè¡¨ç¤ºå®šä¹‰çš„å¯¹è±¡ï¼Œ å‚æ•°propè¡¨ç¤ºè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§åç§° å‚æ•°descriptorè¡¨ç¤ºè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„ç›¸å…³æè¿°ç¬¦ ç›¸å…³çš„å±æ€§æè¿°ç¬¦åˆ†åˆ«ä¸ºconfigurableã€enumerableã€value ã€ writableã€get ã€setè¿™é‡Œå°±ä¸ä¸€ä¸€å•çš„è¯´æ˜äº†ï¼Œé‡ç‚¹è¿˜æ˜¯setã€getè¿™ä¸¤ä¸ªã€‚æ›´è¯¦ç»†çš„MDNä¸Šæœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»æ–‡ã€‚ç„¶åå¯¹æ•°æ®çš„åŠ«æŒéƒ½æ˜¯ç”±å¯¹è±¡å±æ€§è§¦å‘getterä¸setter,ä»¥åŠå¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å°±è¡Œç‰¹å®šçš„æ“ä½œã€‚ ProxyProxyå°±åƒåç§°ä¸€æ ·ç†è§£æˆä»£ç†çš„æ„æ€ï¼Œå®ƒå…¶å®å°±åœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾äº†ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå°±æ˜¯è®¿é—®è¯¥å¯¹è±¡éƒ½å¿…é¡»é€šè¿‡è¯¥æ‹¦æˆªã€‚å› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹ç›®æ ‡å¯¹è±¡è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚ const proxyObj = new Proxy(target, handler) å‚æ•°targetè¡¨ç¤ºè¦ä½¿ç”¨ProxyåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚ handlerä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†å†æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç†proxyObjçš„è¡Œä¸ºã€‚ ç›¸å…³handlerå¯¹è±¡çš„æ–¹æ³•æœ‰setã€getã€applyã€defineProperyã€hasã€constructç­‰ç­‰ï¼Œæ›´è¯¦ç»†çš„MDNä¸Šæœ‰è¯¦ç»†çš„ä»‹ç»ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯å¯¹æ¯”ä¸Object.definePropertyçš„æ•°æ®åŠ«æŒã€‚ æ€»ç»“Proxyä¸Object.defineProperty()éƒ½èƒ½å®ç°å¯¹æ•°æ®åŠ«æŒï¼Œå¯¹æ¯”è€Œä¸‹è€ŒProxyæ›´ä¼˜ï¼Œå®ƒå¯ä»¥ç›´æ¥ç›‘å¬å¯¹è±¡è€Œéå±æ€§ï¼Œå¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œæœ‰å¾ˆå¤šçš„æ‹¦æˆªæ–¹æ³•ï¼Œå®ä¾‹è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ“ä½œè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥å®ç°å¯¹åŸå¯¹è±¡æ•°æ®çš„æ”¹å˜ã€‚è€ŒObject.defineProperty()åªèƒ½éå†å¯¹è±¡çš„å±æ€§è¿›è¡Œä¿®æ”¹æ“ä½œã€‚","categories":[],"tags":[],"author":"jetBn"},{"title":"ç†è§£call()ã€apply()ã€bind()ç”¨æ³•ä¸åŒºåˆ«","slug":"call-ã€apply-ã€bind-ç”¨æ³•ä¸åŒºåˆ«","date":"2021-07-05T03:53:26.000Z","updated":"2021-07-05T03:55:26.957Z","comments":true,"path":"2021/07/05/call-ã€apply-ã€bind-ç”¨æ³•ä¸åŒºåˆ«/","link":"","permalink":"http://jetbn.github.io/2021/07/05/call-%E3%80%81apply-%E3%80%81bind-%E7%94%A8%E6%B3%95%E4%B8%8E%E5%8C%BA%E5%88%AB/","excerpt":"","text":"ç†è§£call()ã€apply()ã€bind()ç”¨æ³•ä¸åŒºåˆ« ç›¸å…³ä»‹ç»è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯åœ¨JavaScriptä¸­æ”¹å˜å‡½æ•°è°ƒç”¨çš„thisæŒ‡å‘çš„ï¼Œå…·ä½“çš„å¯èƒ½å°±æ˜¯å‚æ•°ä¼ é€’ä¸åŒã€‚ call()æ–¹æ³•è¯¥æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œç»™å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»–ä»¬éƒ½æ˜¯Functionå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯ä¸ªå‡½æ•°éƒ½èƒ½è°ƒç”¨ã€‚å®ƒå¯ä¼ é€’ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€ä¸ªä¸ºåœ¨functionå‡½æ•°è¿è¡Œæ—¶ä½¿ç”¨çš„thiså€¼ï¼Œç¬¬äºŒä¸ªä¸ºæŒ‡å®šçš„å‚æ•°ã€‚ å…·ä½“çš„ä½¿ç”¨æ–¹æ³• 1234567891011121314151617181920let obj &#x3D; &#123;age: 11&#125;function fun(arg) &#123; console.log(arg) console.log(this.age)&#125;fun(&#39;lili&#39;) &#x2F;&#x2F;ç›´æ¥è°ƒç”¨ æ­¤æ—¶çš„thisæŒ‡å‘windowæ‰€ä»¥ ç¬¬ä¸€è¡Œæ‰“å°&#96;lili&#96;ç¬¬äºŒè¡Œæ‰“å°&#96;undefined&#96;&#x2F;&#x2F; ä½¿ç”¨callæ”¹å˜å‡½æ•°è°ƒç”¨è¿è¡Œæ—¶çš„thisfun.call(obj, &#39;lili&#39;) &#x2F;&#x2F; åˆ†åˆ«æ‰“å° lili 11&#x2F;&#x2F; å¤šä¸ªå‚æ•°function fun(arg) &#123; console.log(arguments) console.log(this.age) &#125;fun.call(obj, &#39;lili&#39;, &#39;20&#39;) &#x2F;&#x2F; æ­¤æ—¶çš„æ‰“å°åˆ†åˆ«æ˜¯argumentsä¸­ä¸¤ä¸ªå‚æ•° liliä»¥åŠ 20ï¼Œä»¥åŠ11 apply()æ–¹æ³•è¯¥æ–¹æ³•å…¶å®è·Ÿcall()æ–¹æ³•æ˜¯ä¸€æ ·çš„å°±æ˜¯ä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·,å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼‰ å…·ä½“çš„ä½¿ç”¨æ–¹æ³• 12345678let obj &#x3D; &#123;age: 11&#125;function fun() &#123; console.log(arguments) console.log(this.age)&#125;fun.apply(obj, [&#39;lili&#39;, &#39;20&#39;]) &#x2F;&#x2F;æ­¤æ—¶æ‰“å°ä¸ªè·Ÿä¸Šè¿°callä¼ é€’å¤šä¸ªå‚æ•°çš„æ—¶å€™æ˜¯ä¸€è‡´çš„ é€šè¿‡æ­¤ä¸¤ä¸ªæ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥æ¸…æ¥šå‘ç°ï¼Œcall()å’Œapply()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯æ”¹å˜thisçš„æŒ‡å‘ï¼Œè€Œcall()å’Œapply()çš„åŒºåˆ«ä»…ä»…å°±æ˜¯call()ä¼ é€’å‚æ•°éœ€è¦ä¸€é¡¹ä¸€é¡¹çš„ä¼ ï¼Œ ä½†æ˜¯apply()ç›´æ¥é€šè¿‡ä¸€ä¸ªæ•°ç»„ä¼ é€’å°±å¥½äº†ã€‚ bind()æ–¹æ³•è¯¥æ–¹æ³•ä¸apply()å’Œcall()å¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å¯ä»¥æ”¹å˜å‡½æ•°ä½“å†…çš„thisæŒ‡å‘çš„ï¼Œå®ƒæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°, åœ¨bind()è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„thisè¢«æŒ‡å®šä¸ºbind()çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™çš„çš„å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚ å…·ä½“ä½¿ç”¨ä»£ç  1234567891011let obj &#x3D; &#123;age: 11&#125;function fun() &#123; console.log(this.age)&#125;fun() &#x2F;&#x2F; undefinedlet newFun &#x3D; fun.bind(obj)newFun() &#x2F;&#x2F; 11 ç”±ä¸Šé¢çš„è¿è¡Œä»£ç åœ¨bind()å‡½æ•°æ”¹å˜thisçš„æŒ‡å‘ä¹‹å‰æˆ‘ä»¬æ‰“å°çš„æ˜¯undefined,å› ä¸ºæˆ‘æ­¤æ—¶çš„thisæŒ‡å‘æ˜¯windowåœ¨æ­¤é‡Œé¢æ²¡æœ‰å®šä¹‰ageçš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ç­”åº”çš„æ˜¯undefinedï¼Œå½“æˆ‘ä»¬é€šè¿‡bind()å‡½æ•°æ”¹å˜thisä¼ å…¥objæ­¤æ—¶åˆæ–°ç”Ÿæˆä¸€ä¸ªnewFun()å‡½æ•°,å½“æˆ‘ä»¬è°ƒç”¨æ­¤å‡½æ•°çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„thisæŒ‡å‘å°±æ˜¯objäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“å°äº† 11ã€‚ bind(), apply(), call()çš„å…±åŒå’Œä¸åŒç‚¹ï¼š ä¸‰ä¸ªéƒ½æ˜¯Fucntionå¯¹è±¡çš„æ–¹æ³•éƒ½æ˜¯æ”¹å˜å‡½æ•°çš„thiså¯¹è±¡çš„æŒ‡å‘çš„; ä¸‰ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æƒ³æŒ‡å®šçš„ä¸Šä¸‹æ–‡ï¼Œä¸Šä¸‹æ–‡å°±æ˜¯æŒ‡è°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚ï¼ˆå¦‚æœæ²¡æœ‰ä¼ ä»¥åŠnulléƒ½æ˜¯æŒ‡å‘windowï¼‰; ä¸‰ä¸ªéƒ½å¯ä»¥ä¼ é€’å‚æ•°ï¼Œapply()æ˜¯æ•°ç»„ï¼Œcall()ä¸bind()éƒ½æ˜¯æœ‰åºä¼ å…¥å‚æ•°; bindæ˜¯è¿”å›å‡½æ•°ï¼Œä¾¿äºç¨åè°ƒï¼Œè€Œapply()ä¸call()éƒ½æ˜¯ç«‹å³æ‰§è¡Œ æœ€ååˆ†åˆ«æ‰‹åŠ¨å®ç° call()å‡½æ•° 1234567891011121314151617Function.prototype.myCall &#x3D; function(context, ...args) &#123; if(typeof context &#x3D;&#x3D;&#x3D; &#39;object&#39;) &#123; context &#x3D; context || window &#125; else &#123; context &#x3D; Object.create(null) &#125; let fn &#x3D; Symbol() &#x2F;&#x2F; ä¿è¯fnçš„å”¯ä¸€æ€§ context[fn] &#x3D; this let result &#x3D; context[fn](...args) delete context[fn] return result&#125; apply()å‡½æ•° 12345678910111213141516Function.prototype.myApply &#x3D; function(context, arg) &#123; if(typeof context &#x3D;&#x3D;&#x3D; &#39;object&#39;) &#123; context &#x3D; context || window &#125; else &#123; context &#x3D; Object.create(null) &#125; let fn &#x3D; Symbol() &#x2F;&#x2F; ä¿è¯fnçš„å”¯ä¸€æ€§ context[fn] &#x3D; this let result &#x3D; context[fn](...args) delete context[fn] return result&#125; bind()å‡½æ•° 123456789101112Function.prototype.myBind &#x3D; function(context) &#123; const that &#x3D; this const args &#x3D; [...arguments].slice(1) const tempFun &#x3D; function() &#123;&#125; const resultFun &#x3D; function() &#123; const nextArgs &#x3D; [...arguments] return that.apply(this instanceof resultFun ? this : context, [...args, ...nextArgs]) &#125; tempFun.prototype &#x3D; that.prototype resultFun.prototype &#x3D; new tempFun() return resultFun&#125;","categories":[],"tags":[],"author":"jetBn"},{"title":"åŸå‹ä¸åŸå‹é“¾","slug":"å‹ä¸åŸå‹é“¾","date":"2021-07-05T03:52:54.000Z","updated":"2021-07-05T03:53:01.675Z","comments":true,"path":"2021/07/05/å‹ä¸åŸå‹é“¾/","link":"","permalink":"http://jetbn.github.io/2021/07/05/%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"","text":"åŸå‹ å‰è¨€ä»‹ç»æ¯ä¸ªå‡½æ•°éƒ½æœ‰prototypeå±æ€§, é™¤äº†Function.prototype.bind(),è¯¥å±æ€§æœ€ç»ˆæŒ‡å‘åŸå‹ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰_proto_å±æ€§ï¼Œ æŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡æ„é€ å‡½æ•°çš„åŸå‹ï¼Œå…¶å®è¿™ä¸ªå±æ€§æŒ‡å‘äº†[[prototype]],ä½†æ˜¯ç”±äº[[prototype]]æ˜¯å†…éƒ¨å±æ€§ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½è®¿é—®åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨äº†_proto_æ¥è®¿é—®ã€‚å¯¹è±¡å¯ä»¥é€šè¿‡_proto_æ¥å¯»æ‰¾ä¸å±äºæ”¹å¯¹è±¡çš„å±æ€§ï¼Œ_proto_å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ã€‚ prototypeå±æ€§è¿™ä¸ªæ˜¯ä¸€ä¸ªæ˜¾å¼çš„åŸå‹å±æ€§ï¼Œåªç”¨å‡½æ•°æ‰æ‹¥æœ‰ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰å‡½æ•°éƒ½æœ‰è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¦å¤– 1const fun &#x3D; Function.prototype.bind() è¿™ä¸ªfunå‡½æ•°çš„åˆ›å»ºå°±æ˜¯æ²¡æœ‰prototypeå±æ€§çš„ã€‚ prototypeçš„äº§ç”Ÿ å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™è‡ªåŠ¨è¢«åˆ›å»ºçš„ã€‚ 1function fun() &#123;&#125; é€šè¿‡æ–¹ä¸ºfun.prototypeæˆ‘ä»¬èƒ½çœ‹åˆ°æœ‰ä¸€ä¸ªconstructoræ–¹æ³•ï¼Œå…¶å°±æ˜¯å¯¹åº”çš„æ„é€ å‡½æ•°ä¹Ÿå°±æ˜¯fun 12fun.prototype&#123;constructor: Æ’&#125; constructor constructoræ˜¯ä¸€ä¸ªå…¬æœ‰çš„è€Œä¸”ä¸å¯æšä¸¾çš„å±æ€§ï¼Œ ä¸€æ—¦æˆ‘ä»¬æ”¹å˜äº†å‡½æ•°çš„prototype, é‚£ä¹ˆæ–°çš„å¯¹è±¡å°±æ²¡æœ‰è¿™ä¸ªå±æ€§äº†ï¼Œ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾å–åˆ°ã€‚ è¿™ä¸ªå±æ€§çš„ä½œç”¨ï¼š è®©å®ä¾‹å¯¹è±¡çŸ¥é“æ˜¯ä»€ä¹ˆå‡½æ•°æ„é€ äº†å®ƒ å¦‚æœæƒ³ç»™æŸäº›ç±»åº“ä¸­çš„æ„é€ å‡½æ•°å¢åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œå°±å¯ä»¥é€šè¿‡ xx.constructor.method æ¥æ‰©å±• _proto_å±æ€§è¿™æ˜¯æ¯ä¸ªå¯¹è±¡æœ‰çš„éšå¼åŸå‹å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ã€‚å…¶å®è¿™ä¸ªå±æ€§æŒ‡å‘äº†[[prototype]],ä½†æ˜¯[[prototype]]æ˜¯å†…éƒ¨çš„å±æ€§ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è®¿é—®åˆ°ï¼Œæ‰€ä»¥ä½¿ç”¨äº†_proto_æ¥è®¿é—®ã€‚ å› ä¸ºåœ¨jsä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œä¸ºäº†å®ç°ç±»ä¼¼çš„ç»§æ‰¿æ–¹å¼, é€šè¿‡_proto_å°†å¯¹è±¡å’ŒåŸå‹è”ç³»èµ·æ¥ç»„æˆåŸå‹é“¾ï¼Œå¾—ä»¥è®©å¯¹è±¡å¯ä»¥è®¿é—®åˆ°ä¸å±äºè‡ªå·±çš„å±æ€§ã€‚ _proto_çš„äº§ç”Ÿä»é¡¶éƒ¨çš„å›¾æˆ‘ä»¬çœ‹åˆ°ï¼Œ å½“æˆ‘æ˜¯ç”¨newå…³é”®å­—çš„æ—¶å€™ç”Ÿæˆçš„å¯¹è±¡å°±æœ‰äº†_proto_å±æ€§äº†ã€‚ 12345functon Fun() &#123;&#125;&#x2F;&#x2F; è¿™ä¸ªå‡½æ•°æ˜¯Functionçš„å®ä¾‹å¯¹è±¡&#x2F;&#x2F; functonå…¶å®å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–&#x2F;&#x2F; å†…éƒ¨è°ƒç”¨äº† new Function() æ‰€ä»¥å¯ä»¥è¯´ï¼Œ åœ¨newçš„è¿‡ç¨‹ä¸­å°±æ˜¯å‘å®šå¯¹è±¡æ·»åŠ äº†_proto_å±æ€§å¹¶ä¸”é“¾æ¥åˆ°æ„é€ å‡½æ•°çš„åŸå‹ä¸Šäº† ä¸€ä¸ªnewçš„è¿‡ç¨‹ æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ é“¾æ¥åˆ°åŸå‹ ç»‘å®šthis è¿”å›æ–°å¯¹è±¡ æ‰‹åŠ¨å®ç°ä¸€ä¸ªnewçš„è¿‡ç¨‹ 123456789101112function cusNew() &#123; &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªå¯¹è±¡ let obj &#x3D; new Object() &#x2F;&#x2F; è·å–æ„é€ å‡½æ•° const Con &#x3D; [].shift.call(arguments) &#x2F;&#x2F; é“¾æ¥åˆ°åŸå‹ obj._proto_ &#x3D; Con.prototype &#x2F;&#x2F; ç»‘å®šthisæ‰§è¡Œæ„é€ å‡½æ•° let result &#x3D; Con.apply(obj, arguments) return typeof result &#x3D;&#x3D;&#x3D; &#39;function&#39; ? result : obj&#125; å¯¹äºå®åŠ›å¯¹è±¡æ¥è¯´ï¼Œéƒ½æ˜¯é€šè¿‡newæ¥äº§ç”Ÿçš„ï¼Œä¸è®ºæ˜¯ funciton Fun()è¿˜æ˜¯ let obj = { name:&#39;js&#39; } å¯¹äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼Œåˆ›å»ºæœ€å¥½éƒ½æ˜¯ç”¨å­—é¢é‡çš„æ–¹å¼æ¥åˆ›å»ºã€‚ å› ä¸ºå½“ä½  new Object()çš„æ–¹å¼åˆ›å»ºå¯¹è±¡éœ€è¦é€šè¿‡ä½œç”¨åŸŸé“¾ä¸€å±‚å±‚æ‰¾åˆ°Objectï¼Œä½†æ˜¯ä½ ä½¿ç”¨å­—é¢çš„æ–¹å¼å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œæ€§èƒ½æ›´é«˜ã€‚ Function._proto_ === Function.prototype å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œxx._proto_.contrcutor æ˜¯è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯åœ¨ä¸Šé¢çš„å›¾ä¸­æˆ‘ä»¬å‘ç°Function._proto_ === Function.prototype,éš¾é“è¿™ä»£è¡¨Functionè‡ªå·±åˆ›å»ºäº†è‡ªå·±ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚Function.prototypeæ˜¯ç”±å¼•æ“æ¥åˆ›å»ºçš„ã€‚ ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡åŸå‹é“¾æœ€ç»ˆæ‰¾åˆ°Object.prototypeï¼Œè™½ç„¶Object.prototypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡ä¸æ˜¯Objectåˆ›é€ çš„ï¼Œè€Œæ˜¯å¼•æ“è‡ªå·±åˆ›å»ºäº†Object.prototypeã€‚æ‰€ä»¥å¯ä»¥è¿™æ ·è¯´ï¼Œæ‰€ä»¥å®ä¾‹éƒ½æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯å®ä¾‹ã€‚ æˆ‘ä»¬é€šè¿‡Function.prototypeåœ¨æµè§ˆå™¨å°†è¿™ä¸ªå¯¹è±¡æ‰“å°å‡ºæ¥ï¼Œä¼šå‘ç°å…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ 12Function.prototypeÆ’ () &#123; [native code] &#125; ç”±äºFunction.prototypeå’ŒObject.prototypeéƒ½æ˜¯æ˜¯ç”±å¼•æ“åˆ›å»ºçš„ï¼Œå®ƒé¦–å…ˆåˆ›å»ºäº†Function.prototypeï¼Œç„¶ååˆ›å»ºObject.prototypeå¹¶ä¸”é€šè¿‡_proto_å°†ä¸¤è€…è”ç³»èµ·æ¥ã€‚è¿™é‡Œå°±å¾ˆå¥½è§£é‡Šäº†ä¸ºä»€ä¹ˆlet fun = Function.prototype.bind()åˆ›å»ºæ²¡æœ‰prototypeå±æ€§ã€‚å› ä¸ºFunction.prototypeæ˜¯ç”±äºå¼•æ“åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œå¼•æ“è®¤ä¸ºä¸éœ€è¦ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ prototypeå±æ€§ã€‚ æ‰€ä»¥ï¼Œä¸æ˜¯æ‰€æœ‰å‡½æ•°éƒ½æ˜¯new Function()äº§ç”Ÿçš„ã€‚ æœ‰äº†Function.prototypeä»¥åæ‰æœ‰äº†fucntion Function()ï¼Œç„¶åå…¶ä»–çš„æ„é€ å‡½æ•°éƒ½æ˜¯fucntion Function()ç”Ÿæˆçš„ã€‚ æ‰€ä»¥Function.__proto__ === Function.prototypeè¿™ä¸ªé—®é¢˜ç†è§£å°±æ˜¯ï¼Œå…¶ä»–æ‰€æœ‰æ„é€ å‡½æ•°éƒ½å¯ä»¥é€šè¿‡åŸå‹é“¾æ‰¾åˆ°Function.prototype, å¹¶ä¸”function Function()æœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºäº†ä¸äº§ç”Ÿæ··ä¹±å°±å°†function Function()çš„__proto__è”ç³»åˆ°äº†Function.prototypeä¸Šã€‚ æ€»ç»“ Objectæ˜¯æ‰€æœ‰å¯¹è±¡çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡_proto_æ‰¾åˆ°å®ƒã€‚ Functionæ˜¯æ‰€æœ‰å‡½æ•°çš„çˆ¸çˆ¸ï¼Œæ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥é€šè¿‡_proto_æ‰¾åˆ°å®ƒã€‚ Function.prototypeå’ŒObject.prototypeæ˜¯ä¸¤ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œ æ˜¯ç”±å¼•æ“åˆ›å»ºçš„ã€‚ é™¤äº†ä»¥ä¸Šä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡éƒ½æ˜¯é€šè¿‡æ„é€ å™¨newå‡ºæ¥çš„ã€‚ å‡½æ•°çš„prototypeæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸå‹ã€‚ å¯¹è±¡çš„_protoæŒ‡å‘åŸå‹ï¼Œ_proto_å°†å¯¹è±¡å’ŒåŸå‹è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ã€‚","categories":[],"tags":[],"author":"jetBn"},{"title":"æ•°ç»„å¸¸ç”¨æ–¹æ³•","slug":"ç»„å¸¸ç”¨æ–¹æ³•","date":"2020-07-28T08:53:00.000Z","updated":"2020-07-28T08:55:50.637Z","comments":true,"path":"2020/07/28/ç»„å¸¸ç”¨æ–¹æ³•/","link":"","permalink":"http://jetbn.github.io/2020/07/28/%E7%BB%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/","excerpt":"","text":"JavaScriptä¸­æ•°ç»„å¸¸ç”¨æ–¹æ³• å‰è¨€ä»‹ç»åœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸éƒ½ä¼šä½¿ç”¨åˆ°æ•°ç»„çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚å¢ã€åˆ ã€å¾ªç¯ç­‰ç­‰ã€‚è‡ªå·±å¯¹æ­¤æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼ˆå¸¸ç”¨ä»¥åŠä¸å¸¸ç”¨çš„ï¼‰æ•´ç†ä¸€éï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚ arr.push()ä»æ•°ç»„çš„åé¢æ·»åŠ å…ƒç´ , è¿”å›å€¼ä¸ºæ•°ç»„çš„é•¿åº¦ 123let arr &#x3D; []console.log(arr.push(1)) &#x2F;&#x2F; 1console.log(arr) &#x2F;&#x2F; [1] arr.pop()ä»æ•°ç»„çš„åé¢åˆ é™¤å…ƒç´ ï¼Œåªèƒ½åˆ é™¤ä¸€ä¸ªï¼Œè¿”å›å€¼æ˜¯åˆ é™¤çš„å…ƒç´  123let arr &#x3D; [1, 2, 3]console.log(arr.pop()) &#x2F;&#x2F; 3console.log(arr) &#x2F;&#x2F; [1, 2] arr.shift()ä»æ•°ç»„å‰é¢åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œåªèƒ½åˆ é™¤ä¸€ä¸ªï¼Œè¿”å›å€¼æ˜¯åˆ é™¤çš„å…ƒç´  123let arr &#x3D; [1, 2, 3]console.log(arr.shift()) &#x2F;&#x2F; 1console.log(arr) &#x2F;&#x2F; [2, 3] arr.unshift()ä»æ•°ç»„å‰é¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼æ˜¯æ•°ç»„çš„é•¿åº¦ 123let arr &#x3D; [2, 3]console.log(arr.unshift(1)) &#x2F;&#x2F; 3console.log(arr) &#x2F;&#x2F; [1, 2, 3] arr.concat()è¿æ¥ä¸¤ä¸ªæ•°ç»„ï¼Œè¿”å›å€¼ä¸ºè¿æ¥åçš„æ–°æ•°ç»„ï¼ˆå…¶å®å°±æ˜¯åˆå¹¶ï¼‰å‚æ•°å¯ä»¥æ•°å€¼æˆ–è€…æ•°ç»„ 123let arr1 &#x3D; [1, 2]let arr2 &#x3D; [3, 4]console.log(arr1.concat(arr2)) &#x2F;&#x2F; [1, 2, 3, 4] arr.splice(i, n, item1, item2, ... ) åˆ é™¤ä»iï¼ˆç´¢å¼•ï¼‰å¼€å§‹ä¹‹åçš„é‚£ä¸ªå…ƒç´ ã€‚è¿”å›å€¼åˆ é™¤çš„å…ƒç´ çš„æ•°ç»„ å‚æ•°: i è¡¨ç¤ºç´¢å¼•ï¼Œnè¡¨ç¤ºä¸ªæ•°ï¼ˆå¯é€‰å‚æ•°ï¼‰ï¼Œ item1, item2, ... å‘æ•°ç»„æ·»åŠ é¡¹ï¼ˆå¯é€‰å‚æ•°ï¼‰ 12345let arr &#x3D; [1, 2, 3, 4, 5, 6, 7]console.log(arr.splice(2,1)) &#x2F;&#x2F; [3]console.log(arr) &#x2F;&#x2F; [1, 2, 4, 5, 6, 7]console.log(arr.splice(2,1, 3, 4)) &#x2F;&#x2F; [3, 4]console.log(arr) &#x2F;&#x2F; [1, 2, 3,4, 4, 5, 6, 7] str.split(s, n)å°†å­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ å‚æ•°så­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¿…éœ€ï¼‰ï¼Œnè¿”å›æ•°ç»„çš„æœ€å¤§é•¿åº¦(å¯é€‰å‚æ•°)ï¼Œä¸ä¼ åˆ™ä¸è§„å®šæ•°ç»„çš„é•¿åº¦ï¼Œæ ¹æ®å­—ç¬¦åˆ†å‰²ã€‚ 12let str &#x3D; &#39;1234&#39;console.log(str.split(&#39;&#39;)) &#x2F;&#x2F; [1, 2, 3, 4] arr.join(separator)å°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ï¼ˆæˆ–è€…ç±»æ•°ç»„ï¼‰çš„æ‰€æœ‰å…ƒç´ é“¾æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼šseparator(å¯é€‰)æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²åˆ†éš”æ¯ä¸ªå…ƒç´ ï¼Œé»˜è®¤ä¸ºé€—å·(,) 1234let arr &#x3D; [&#39;jon&#39;, &#39;tom&#39;, &#39;wang&#39;]console.log(arr.join()) &#x2F;&#x2F; jon,tom,wangconsole.log(elements.join(&#39;&#39;)) &#x2F;&#x2F; jontomwangconsole.log(elements.join(&#39;-&#39;)); &#x2F;&#x2F; jon-tom-wang arr.sort()å°†æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿”å›å€¼æ˜¯æ’å¥½çš„æ•°ç»„ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§æœ€å·¦è¾¹çš„æ•°å­—è¿›è¡Œæ’åºï¼Œä¸æ˜¯æŒ‰ç…§æ•°ç»„å¤§å°æ’åºã€‚ 12345678let arr &#x3D; [2, 10, 1, 4, 22, 3]console.log(arr.sort()) &#x2F;&#x2F; [1, 10, 2, 22, 3, 4]let arr1 &#x3D; arr.sort((a, b) &#x3D;&gt; a - b)console.log(arr1) &#x2F;&#x2F; [1, 2, 3, 4, 10, 22]let arr2 &#x3D; arr.sort((a, b) &#x3D;&gt; a - b)console.log(arr2) &#x2F;&#x2F; [22, 10, 4, 3, 2, 1] arr.reverse()å°†æ•°ç»„è¿›è¡Œåè½¬ï¼Œè¿”å›å€¼æ˜¯åè½¬åçš„æ•°ç»„ 123let arr &#x3D; [1, 2, 3, 4]console.log(arr.reverse()) &#x2F;&#x2F; [4, 3, 2, 1]console.log(arr) &#x2F;&#x2F; [4, 3, 2, 1] arr.slice(start, end)åˆ‡å»ç´¢å¼•å¼€å§‹å€¼startåˆ°ç´¢å¼•å€¼endçš„æ•°ç»„ï¼ˆæµ…æ‹·è´ï¼‰ï¼Œä¸åŒ…å«endçš„ç´¢å¼•çš„å€¼ï¼Œè¿”å›å€¼æ˜¯åˆ‡å‡ºæ¥çš„æ•°ç»„, åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚ å‚æ•°start(å¯é€‰)ï¼Œè¡¨ç¤ºå¼€å§‹çš„ç´¢å¼•å€¼(ä¸ä¼ ä¸º0)ï¼Œendï¼ˆå¯é€‰ï¼‰è¡¨ç¤ºç»“æŸçš„ç´¢å¼•å€¼ï¼ˆä¸ä¼ ä¸ºæ•°ç»„çš„æœ€åä¸€é¡¹ï¼‰ã€‚ 123let arr &#x3D; [1, 2, 3, 4, 5, 6]console.log(arr.slice(1, 3)) &#x2F;&#x2F; [2, 3]console.log(arr) &#x2F;&#x2F; [1, 2, 3, 4, 5, 6] arr.forEach(callback)éå†æ•°ç»„ï¼Œ æ— returnå³ä½¿æœ‰ä¹Ÿä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“åŸæ¥çš„æ•°ç»„callbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)123456789101112131415161718192021222324252627282930let arr &#x3D; [1, 2, 3, 4]arr.forEach( (value, index, array)&#x3D;&gt;&#123; console.log(&#96;value:$&#123;value&#125; index:$&#123;index&#125; array:$&#123;array&#125;&#96;)&#125;)&#x2F;* value:1 index:0 array:1,2,3,4 value:2 index:1 array:1,2,3,4 value:3 index:2 array:1,2,3,4 value:4 index:3 array:1,2,3,4 *&#x2F;let arr &#x3D; [1, 2, 3, 4]arr.forEach((value, index, array) &#x3D;&gt; &#123; value &#x3D; value * 2 console.log(&#96;value:$&#123;value&#125; index:$&#123;index&#125; array:$&#123;array&#125;&#96;)&#125;)&#x2F;* value:2 index:0 array:1,2,3,4 value:4 index:1 array:1,2,3,4 value:6 index:2 array:1,2,3,4 value:8 index:3 array:1,2,3,4 *&#x2F;let arr &#x3D; [1, 2, 3, 4]let resArr &#x3D; arr.forEach((value, index, array) &#x3D;&gt; &#123; arr[index] &#x3D; value * 2 return arr&#125;)console.log(resArr) &#x2F;&#x2F; undefinedconsole.log(arr) &#x2F;&#x2F; [2, 4, 6, 8] arr.map(callback)æ˜ å°„æ•°ç»„ï¼ˆéå†æ•°ç»„ï¼‰ï¼Œæœ‰returnè¿”å›ä¸€ä¸ªæ–°æ•°ç»„callbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)12345678910111213141516171819let arr &#x3D; [1, 2, 3, 4]arr.map((value, index, array)&#x3D;&gt; &#123; value&#x3D; value * 2 console.log(&#96;value:$&#123;value&#125; index:$&#123;index&#125; array:$&#123;array&#125;&#96;)&#125;)&#x2F;* value:2 index:0 array:1,2,3,4 value:4 index:1 array:1,2,3,4 value:6 index:2 array:1,2,3,4 value:8 index:3 array:1,2,3,4 *&#x2F;let arr1 &#x3D; [1, 2, 3, 4]let resArr &#x3D; arr1.map((value, index, array)&#x3D;&gt; &#123; item &#x3D; item * 2 return item&#125;)console.log(arr1) &#x2F;&#x2F; [1, 2, 3, 4]console.log(resArr) &#x2F;&#x2F; [2, 4, 6, 8] arr.forEach()æ˜¯å’Œ forå¾ªç¯ä¸€æ ·çš„ï¼Œæ˜¯ä»£æ›¿forã€‚arr.map()æ˜¯ä¿®æ”¹æ•°ç»„å…¶ä¸­çš„æ•°æ®ï¼Œå¹¶è¿”å›æ–°çš„æ•°æ®ã€‚ arr.forEach()æ²¡æœ‰return è¿”å›å€¼ï¼Œè€Œarr.map()æœ‰ arr.filter(callback)è¿‡æ»¤æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ•°ç»„ï¼ˆæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¸€écallbackï¼‰callbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰) 123let arr &#x3D; [1, 2, 3, 4]let resArr &#x3D; arr.filter((value, index) &#x3D;&gt; value &lt; 3)console.log(resArr) &#x2F;&#x2F; [1, 2] arr.every(callback)ä¾æ®åˆ¤æ–­æ¡ä»¶ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯å¦å…¨æ»¡è¶³ï¼Œè‹¥æ»¡è¶³è¿”å›truecallbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)123let arr &#x3D; [1, 2, 3, 4]let result &#x3D; arr.every((value, index) &#x3D;&gt; value &lt; 3) &#x2F;&#x2F; falselet result &#x3D; arr.every((value, index) &#x3D;&gt; value &lt; 6) &#x2F;&#x2F; true arr.some()ä¾æ®æ¡ä»¶åˆ¤æ–­ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯å¦æœ‰ä¸€ä¸ªæ»¡è¶³ï¼Œè‹¥æœ‰ä¸€ä¸ªæ»¡è¶³åˆ™è¿”å›truecallbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)123let arr &#x3D; [1, 2, 3, 4, 5]let result &#x3D; arr.some((value, index) &#x3D;&gt; value &lt; 3) &#x2F;&#x2F; truelet result &#x3D; arr.some((value, index) &#x3D;&gt; value &gt; 6) &#x2F;&#x2F; false arr.reduce(callback, initialValue)è¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œç´¯åŠ å™¨ã€‚æ•°ç»„ä¸­æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰åˆå¹¶ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚callbackçš„å‚æ•°ï¼š previousValue â€“ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒè¿”å›çš„å€¼ï¼Œæˆ–è€…æ˜¯æä¾›çš„åˆå§‹å€¼(initialValue)ï¼ˆå¿…é€‰ï¼‰ currentValue â€“æ•°ç»„ä¸­å½“å‰è¢«å¤„ç†çš„æ•°ç»„é¡¹ (å¿…é€‰) index â€“ å½“å‰æ•°ç»„é¡¹åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•å€¼ï¼ˆå¯é€‰ï¼‰ array â€“åŸæ•°ç»„ (å¯é€‰) initialValueå‚æ•°ï¼šåˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰å…·ä½“çš„å®è¡Œï¼šå›è°ƒå‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼ŒpreviousValueå’ŒcurrentValueå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œå¦‚æœinitialValueåœ¨è°ƒç”¨reduce()æ—¶è¢«æä¾›ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå€¼previousValueç­‰äºinitialValueï¼Œå¹¶ä¸”currentValueç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå¦‚æœinitialValueæœªè¢«æä¾›ï¼Œé‚£ä¹ˆpreviousValueå°±ç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ã€‚ 123let arr &#x3D; [1, 2, 3, 4, 5]let result &#x3D; arr.reuce((preValue, curValue)&#x3D;&gt; prevValue + cuValue)console.log(result) &#x2F;&#x2F; 15 previousValue currentValue index array è¿”å›å€¼ ç¬¬ä¸€æ¬¡å›è°ƒ 1 2 1 [1, 2, 3, 4, 5] 3 ç¬¬äºŒæ¬¡å›è°ƒ 3 3 2 [1, 2, 3, 4, 5] 6 ç¬¬ä¸‰æ¬¡å›è°ƒ 6 4 3 [1, 2, 3, 4, 5] 10 ç¬¬å››æ¬¡å›è°ƒ 10 5 4 [1, 2, 3, 4, 5] 15 12let arr2 &#x3D; arr.reduce((preValue,curValue)&#x3D;&gt;preValue + curValue,3)console.log(arr2) previousValue currentValue index array è¿”å›å€¼ ç¬¬ä¸€æ¬¡å›è°ƒ 3 1 0 [1, 2, 3, 4, 5] 4 ç¬¬äºŒæ¬¡å›è°ƒ 4 2 1 [1, 2, 3, 4, 5] 6 ç¬¬ä¸‰æ¬¡å›è°ƒ 6 3 2 [1, 2, 3, 4, 5] 9 ç¬¬å››æ¬¡å›è°ƒ 9 4 3 [1, 2, 3, 4, 5] 13 ç¬¬äº”æ¬¡å›è°ƒ 13 5 4 [1, 2, 3, 4, 5] 18 reduceçš„é«˜çº§ç”¨æ³• è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•° 12345678910let arr &#x3D; [&#39;joi&#39;, &#39;tom&#39;, &#39;tom&#39;, &#39;mary&#39;, &#39;peter&#39;, &#39;mary&#39;]let num &#x3D; arr.reduce((preVal, curVal) &#x3D;&gt; &#123; if(curVal in preVal) &#123; preVal[curVal]++ &#125; else &#123; preVal[curVal] &#x3D; 1 &#125;&#125;, &#123;&#125;)console.log(num) &#x2F;&#x2F; &#123;jio: 1, tom: 2, mary: 2, peter: 1&#125; æ•°ç»„å»é‡123456789let arr &#x3D; [1,2,3,4,2,1,1,5]let resArr &#x3D; arr.reduce((preVal, curVal)&#x3D;&gt; &#123; if(!preVal.includes(curVal)) &#123; return preVal.concat(curVal) &#125; else &#123; return preVal &#125;&#125;, [])console.log(resArr) &#x2F;&#x2F; [1, 2, 3, 4, 5] å°†å¤šç»´æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„123let arr &#x3D; [[0, 1], [2, 3], [4,[5,6,7]]]const replaceArr &#x3D; (arr) &#x3D;&gt; arr.reduce((preVal, curVal) &#x3D;&gt; preVal.concat(Array.isArray(curVal) ? replaceArr(curVal): curVal), [])console.log(replaceArr(arr)) &#x2F;&#x2F; [0, 1, 2, 3, 4, 5, 6, 7] arr.reduceRight(callback, initialValue)ä¸arr.reduceä¸€æ ·ï¼Œä¸åŒçš„æ˜¯ï¼ŒreduceRightæ˜¯ä»æ•°ç»„çš„æœ«å°¾å‘å‰å°†æ•°ç»„ä¸­æ•°ç»„é¡¹åšç´¯åŠ callbackçš„å‚æ•°ï¼š previousValue â€“ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒè¿”å›çš„å€¼ï¼Œæˆ–è€…æ˜¯æä¾›çš„åˆå§‹å€¼(initialValue)ï¼ˆå¿…é€‰ï¼‰ currentValue â€“æ•°ç»„ä¸­å½“å‰è¢«å¤„ç†çš„æ•°ç»„é¡¹ (å¿…é€‰) index â€“ å½“å‰æ•°ç»„é¡¹åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•å€¼ï¼ˆå¯é€‰ï¼‰ array â€“åŸæ•°ç»„ (å¯é€‰) initialValueå‚æ•°ï¼šåˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰å…·ä½“çš„å®è¡Œï¼šå›è°ƒå‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼ŒpreviousValueå’ŒcurrentValueå¯ä»¥æ˜¯ä¸¤ä¸ªå€¼ä¹‹ä¸€ï¼Œå¦‚æœinitialValueåœ¨è°ƒç”¨reduceRight()æ—¶è¢«æä¾›ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå€¼previousValueç­‰äºinitialValueï¼Œå¹¶ä¸”currentValueç­‰äºæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå€¼ï¼Œå¦‚æœinitialValueæœªè¢«æä¾›ï¼Œé‚£ä¹ˆpreviousValueå°±ç­‰äºæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå€¼ã€‚ 123let arr &#x3D; [1, 2, 3, 4, 5]let result &#x3D; arr.reuce((preValue, curValue)&#x3D;&gt; prevValue + cuValue)console.log(result) &#x2F;&#x2F; 15 previousValue currentValue index array è¿”å›å€¼ ç¬¬ä¸€æ¬¡å›è°ƒ 5 4 3 [1, 2, 3, 4, 5] 9 ç¬¬äºŒæ¬¡å›è°ƒ 9 3 2 [1, 2, 3, 4, 5] 12 ç¬¬ä¸‰æ¬¡å›è°ƒ 12 2 1 [1, 2, 3, 4, 5] 14 ç¬¬å››æ¬¡å›è°ƒ 14 1 0 [1, 2, 3, 4, 5] 15 12let arr2 &#x3D; arr.reduce((preValue,curValue)&#x3D;&gt;preValue + curValue,3)console.log(arr2) previousValue currentValue index array è¿”å›å€¼ ç¬¬ä¸€æ¬¡å›è°ƒ 3 5 4 [1, 2, 3, 4, 5] 8 ç¬¬äºŒæ¬¡å›è°ƒ 8 4 3 [1, 2, 3, 4, 5] 12 ç¬¬ä¸‰æ¬¡å›è°ƒ 12 3 2 [1, 2, 3, 4, 5] 15 ç¬¬å››æ¬¡å›è°ƒ 15 2 1 [1, 2, 3, 4, 5] 17 ç¬¬äº”æ¬¡å›è°ƒ 17 1 0 [1, 2, 3, 4, 5] 18 arr.indexOf()æŸ¥æ‰¾æŸä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼Œè‹¥æœ‰é‡å¤çš„ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªæŸ¥åˆ°çš„ï¼Œè‹¥æŸ¥ä¸åˆ°çš„-1 123let arr &#x3D; [1, 2, 3]console.log(arr.indexOf(2)) &#x2F;&#x2F; 1console.log(arr.indexOf(5)) &#x2F;&#x2F; -1 arr.lastIndexOf()åŠŸèƒ½å’ŒindexOf()ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å®ƒæ˜¯ä»æ•°ç»„å°¾ç«¯å¼€å§‹å¾€å‰æ‰¾ 123let arr &#x3D; [1, 2, 3, 4, 5]console.log(arr.lastIndexOf(3)) &#x2F;&#x2F; 2console.log(arr.lastIndexOf(5)) &#x2F;&#x2F; -1 Array.from()å°†ä¼ªæ•°ç»„è½¬æˆæ•°ç»„ï¼Œå°±æ˜¯åªè¦æœ‰lengthçš„å°±å¯ä»¥è½¬åŒ–æˆæ•°ç»„ 1234let str &#x3D; &#39;12345&#39;console.log(Array.from(str)) &#x2F;&#x2F; [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;]let obj &#x3D; &#123;0: &#39;a&#39;, 1:&#39;b&#39;, length: 2&#125;console.log(Array.from(obj)) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;] Array.of()å°†ä¸€å€¼è½¬ä¸ºæ•°ç»„ï¼Œç±»ä¼¼äºå£°æ˜æ•°ç»„ 12let str &#x3D; &#39;11&#39;console.log(Array.of(str)) &#x2F;&#x2F; [&#39;11&#39;] ç­‰ä»·äº 1console.log(new Array(&#39;11&#39;) new Array()æœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯å‚æ•°é—®é¢˜å¼•èµ·çš„é‡è½½ 12console.log(new Array(2)) &#x2F;&#x2F;[empty Ã— 2] æ˜¯ä¸ªç©ºæ•°ç»„console.log(Array.of(2)) &#x2F;&#x2F; [2] arr.copyWithin()åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†å®šæ—¶ä½ç½®çš„æ•°ç»„å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼Œä¼šè¦†ç›–åŸæ¥æ•°ç»„é¡¹ï¼Œè¿”å›å½“å‰æ•°ç»„å‚æ•°ï¼š target â€“ç´¢å¼•ä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°ç»„é¡¹ï¼ˆå¿…é€‰ï¼‰ start â€“ç´¢å¼•ä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°ç»„é¡¹ï¼Œé»˜è®¤ä¸º0ï¼Œå¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™ä»å³å¾€å·¦è¯»å–ã€‚ï¼ˆå¯é€‰ï¼‰ end â€“ç´¢å¼•åˆ°æ”¹ä½ç½®åœæ­¢è¯»å–çš„æ•°ç»„é¡¹ï¼Œé»˜è®¤æ˜¯Array.lengthï¼Œå¦‚æœè´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°ã€‚1234567let arr &#x3D; [1, 2, 3, 4, 5, 6, 7]let arr1 &#x3D; arr.copyWithin(1) console.log(arr1) &#x2F;&#x2F; [1, 1, 2, 3, 4, 5, 6]let arr2 &#x3D; arr.copyWithin(1, 2)console.log(arr2) &#x2F;&#x2F; [1, 3, 4, 5, 6, 7, 7]let arr3 &#x3D; arr.copyWithin(1, 2, 4)console.log(arr3) &#x2F;&#x2F; &#x2F;&#x2F; [1, 3, 4, 4, 5, 6, 7] arr.findInex(callback)æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ç´¢å¼•å€¼callbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)123let arr &#x3D; [1, 2, 3, 4]let index &#x3D; arr.findIndex((value, index, array) &#x3D;&gt; value &gt; 3)console.log(index) &#x2F;&#x2F; 3 arr.find(callback)æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜callbackçš„å‚æ•°ï¼š value â€“å½“å‰ç´¢å¼•çš„å€¼ï¼Œ index â€“ç´¢å¼•ï¼Œ (å¯é€‰) array â€“åŸæ•°ç»„ (å¯é€‰)123let arr &#x3D; [1, 2, 3, 4]let item &#x3D; arr.find((value, index, array)&#x3D;&gt; value &gt; 2)console.log(item) &#x2F;&#x2F; 3 arr.fill(target, start, end)æ˜¯ç”¨ç»™å®šçš„å€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ï¼Œå¡«å®Œä¼šæ”¹å˜åŸæ•°ç»„å‚æ•°ï¼š target â€“å¾…å¡«å……çš„å…ƒç´ ï¼Œ start â€“å¼€å§‹å¡«å……çš„ä½ç½®ç´¢å¼•ï¼Œ (å¯é€‰) end â€“ç»“æŸå¡«å……å…ƒç´ çš„ç´¢å¼• (å¯é€‰)1234567let arr &#x3D; [1, 2, 3, 4] console.log(arr.fill(4)) &#x2F;&#x2F; [4, 4, 4, 4]console.log(arr.fill(4, 1)) &#x2F;&#x2F; [1, 4, 4, 4]console.log(arr.fill(4, 1, 2)) &#x2F;&#x2F; [1, 4, 3, 4] arr.includes()åˆ¤æ–­æ•°ä¸­æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ 1234let arr &#x3D; [1, 2, 3, 4, 5, NaN]console.log(arr.includes(5)) &#x2F;&#x2F; trueconsole.log(arr.includes(8)) &#x2F;&#x2F; falseconsole.log(arr.includes(NaN)) &#x2F;&#x2F; true includes()ä¸indexOf()çš„åŒºåˆ« indexOf()è¿”å›çš„æ˜¯æ•°å€¼ï¼Œè€Œincludes()è¿”å›çš„æ˜¯å¸ƒå°”å€¼ indexOf()ä¸èƒ½åˆ¤æ–­NaNï¼Œè¿”å›ä¸º -1 ï¼Œincludes()å¯ä»¥åˆ¤æ–­ arr.keys() è·å–æ•°ç»„çš„æ‰€æœ‰é”®åï¼ˆéå†ï¼‰ 12345let arr &#x3D; [1, 2, 3, 4]let arr2 &#x3D; arr.keys()for (let key of arr2) &#123; console.log(key); &#x2F;&#x2F; 0,1,2,3&#125; arr.values() è·å–æ•°ç»„é”®å€¼ï¼ˆéå†ï¼‰ 12345let arr &#x3D; [&#39;apple&#39;, &#39;banner&#39;]let arr1 &#x3D; arr.values()for(let val of arr1) &#123; console.log(val) &#x2F;&#x2F; apple, banner&#125; arr.entries() è·å–æ•°ç»„çš„é”®åä»¥åŠé”®å€¼ï¼ˆéå†ï¼‰ 1234567891011let arr &#x3D; [1, 2, 3, 4]let arr1 &#x3D; arr.entries()for(let [key, val] of arr1) &#123; console.log(key, val)&#125;&#x2F;* key:0 value:1 key:1 value:2 key:2 value:3 key:3 value:4*&#x2F; arr.toString() å°†æ•°ç»„å…ƒç´ è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæŒ‡å®šçš„æ•°ç»„åŠå…¶å…ƒç´  12let arr &#x3D; [1, 2, 3, 4]console.log(arr.toString()) &#x2F;&#x2F; 1,2,3,4","categories":[],"tags":[],"author":"jetBn"},{"title":"Gitå¸¸ç”¨å‘½ä»¤è®°å½•","slug":"tå¸¸ç”¨å‘½ä»¤è®°å½•","date":"2020-05-09T07:34:00.000Z","updated":"2020-05-09T07:37:48.640Z","comments":true,"path":"2020/05/09/tå¸¸ç”¨å‘½ä»¤è®°å½•/","link":"","permalink":"http://jetbn.github.io/2020/05/09/t%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"gitç›¸å…³å‘½ä»¤å¸¸ç”¨ git checkout -b sub_main origin/sub_main æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°åˆ†æ”¯ å¹¶ä¸”åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ git branch æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ git branch -a æŸ¥çœ‹è¿œç¨‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ git branch -d &lt;åˆ†æ”¯åç§°&gt; æŸ¥çœ‹è¿œç¨‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ git pull æ‹‰å–æœ€æ–°çš„ä»£ç éƒ½æœ¬åœ° git commit -m è¿›è¡Œcommitæ“ä½œ git add . è¿›è¡Œæ·»åŠ åˆ°æš‚å­˜åŒº git push origin &lt;åˆ†æ”¯åç§°&gt;:&lt;è¿œç¨‹åˆ†æ”¯åç§°&gt; å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ git push -u origin mybranch å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ $ git push -u origin master ä¸Šé¢å‘½ä»¤å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushäº†ã€‚","categories":[],"tags":[],"author":"jetBn"},{"title":"JSèŠ‚æµä¸é˜²æŠ–","slug":"ä¸é˜²æŠ–","date":"2020-05-09T06:52:00.000Z","updated":"2020-05-09T07:28:46.539Z","comments":true,"path":"2020/05/09/ä¸é˜²æŠ–/","link":"","permalink":"http://jetbn.github.io/2020/05/09/%E4%B8%8E%E9%98%B2%E6%8A%96/","excerpt":"","text":"å‰è¨€ &ensp;&ensp;&ensp;&ensp;åœ¨æ—¥å¸¸å¼€å‘ä¸­è¿›è¡Œçª—å£çš„resizeã€scrollï¼Œè¾“å…¥æ¡†å†…å®¹æ ¡éªŒç­‰æ“ä½œæ—¶ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨çš„é¢‘ç‡æ— é™åˆ¶ï¼Œä¼šåŠ é‡æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•ã€‚è¿™æ—¶å€™æˆ‘ä»¬æ›´å¸Œæœ›æŠŠå¤šæ¬¡è®¡ç®—åˆå¹¶æˆä¸€æ¬¡ï¼Œåªæ“ä½œä¸€ä¸ªç²¾ç¡®ç‚¹æ¥å‡å°‘è°ƒç”¨é¢‘ç‡ï¼ŒåŒæ—¶åˆä¸å½±å“å®é™…æ•ˆæœã€‚ JSæŠŠè¿™ç§æ–¹å¼ç§°ä¸ºdebounceï¼ˆé˜²æŠ–ï¼‰å’Œthrottleï¼ˆèŠ‚æµï¼‰ã€‚ èŠ‚æµ&ensp;&ensp;&ensp;&ensp;é«˜é¢‘äº‹ä»¶è§¦å‘ï¼Œä½†åœ¨nç§’å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ åº”ç”¨åœºæ™¯ 1. DOMå…ƒç´ çš„æ‹–æ‹½åŠŸèƒ½å®ç°ï¼ˆmousemoveï¼‰ 2. å°„å‡»æ¸¸æˆçš„ mousedown/keydown äº‹ä»¶ï¼ˆå•ä½æ—¶é—´åªèƒ½å‘å°„ä¸€é¢—å­å¼¹ï¼‰3. è®¡ç®—é¼ æ ‡ç§»åŠ¨çš„è·ç¦»ï¼ˆmousemoveï¼‰ 4. æœç´¢è”æƒ³ï¼ˆkeyupï¼‰ 5. æ»šåŠ¨äº‹ä»¶scrollï¼Œï¼ˆåªè¦é¡µé¢æ»šåŠ¨å°±ä¼šé—´éš”ä¸€æ®µæ—¶é—´åˆ¤æ–­ä¸€æ¬¡ï¼‰ ä»£ç å®ç° 12345678910111213 function debounce(fn, delay, scope) &#123; let timer &#x3D; null; &#x2F;&#x2F; è¿”å›å‡½æ•°å¯¹debounceä½œç”¨åŸŸå½¢æˆé—­åŒ… return function () &#123; &#x2F;&#x2F; setTimeout()ä¸­ç”¨åˆ°å‡½æ•°ç¯å¢ƒæ€»æ˜¯window,æ•…éœ€è¦å½“å‰ç¯å¢ƒçš„å‰¯æœ¬ï¼› let context &#x3D; scope || this, args &#x3D; arguments; &#x2F;&#x2F; å¦‚æœäº‹ä»¶è¢«è§¦å‘ï¼Œæ¸…é™¤timerå¹¶é‡æ–°å¼€å§‹è®¡æ—¶ clearTimeout(timer); timer &#x3D; setTimeout(function () &#123; fn.apply(context, args); &#125;, delay); &#125;&#125; ä»£ç è§£è¯» 1. ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”ä¹‹åè¿è¡Œä»£ç ï¼› 2. å½“ç¬¬äºŒæ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå®ƒä¼šæ¸…é™¤å‰ä¸€æ¬¡çš„å®šæ—¶å™¨å¹¶è®¾ç½®å¦ä¸€ä¸ª; 3. å¦‚æœå‰ä¸€ä¸ªå®šæ—¶å™¨å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œè¿™ä¸ªæ“ä½œå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼› 4. ç„¶è€Œï¼Œå¦‚æœå‰ä¸€ä¸ªå®šæ—¶å™¨å°šæœªæ‰§è¡Œï¼Œå…¶å®å°±æ˜¯å°†å…¶æ›¿æ¢ä¸ºä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼›ç›®çš„æ˜¯åªæœ‰åœ¨æ‰§è¡Œå‡½æ•°çš„è¯·æ±‚åœæ­¢äº†delayæ—¶é—´ä¹‹åæ‰æ‰§è¡Œã€‚ é˜²æŠ–&ensp;&ensp;&ensp;&ensp;è§¦å‘é«˜é¢‘äº‹ä»¶ånç§’å†…å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœnç§’å†…é«˜é¢‘äº‹ä»¶å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´ åº”ç”¨åœºæ™¯ 1. æ‰‹æœºå·ã€é‚®ç®±è¾“å…¥æ£€æµ‹ 2. æœç´¢æ¡†æœç´¢è¾“å…¥ï¼ˆåªéœ€æœ€åä¸€æ¬¡è¾“å…¥å®Œåï¼Œå†æ”¾æ¾Ajaxè¯·æ±‚ï¼‰ 3. çª—å£å¤§å°resizeï¼ˆåªéœ€çª—å£è°ƒæ•´å®Œæˆåï¼Œè®¡ç®—çª—å£å¤§å°ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“ï¼‰ 4. æ»šåŠ¨äº‹ä»¶scrollï¼ˆåªéœ€æ‰§è¡Œè§¦å‘çš„æœ€åä¸€æ¬¡æ»šåŠ¨äº‹ä»¶çš„å¤„ç†ç¨‹åºï¼‰ 5. æ–‡æœ¬è¾“å…¥çš„éªŒè¯ï¼ˆè¿ç»­è¾“å…¥æ–‡å­—åå‘é€ AJAX è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œï¼ˆåœæ­¢è¾“å…¥åï¼‰éªŒè¯ä¸€æ¬¡å°±å¥½ é˜²æŠ–å®ç° åˆ©ç”¨æ—¶é—´æˆ³ç®€å•å®ç° 123456789101112function throttle(fn, threshold, scope) &#123; let timer; let prev &#x3D; Date.now(); return function () &#123; let context &#x3D; scope || this, args &#x3D; arguments; let now &#x3D; Date.now(); if (now - prev &gt; threshold) &#123; prev &#x3D; now; fn.apply(context, args); &#125; &#125;&#125; åˆ©ç”¨å®šæ—¶å™¨ç®€å•å®ç° 123456789101112function throttle2(fn, threshold, scope) &#123; let timer; return function () &#123; let context &#x3D; scope || this, args &#x3D; arguments; if (!timer) &#123; timer &#x3D; setTimeout(function () &#123; fn.apply(context, args); timer &#x3D; null; &#125;, threshold) &#125; &#125;&#125; æ€»ç»“ é˜²æŠ–å’ŒèŠ‚æµæœ‰å¾ˆå¤šå®ç°çš„æ–¹æ³•ï¼Œå…¶å¤§è‡´æ€è·¯åŸºæœ¬æ˜¯è¿™æ ·çš„ã€‚ é˜²æŠ–å’ŒèŠ‚æµæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºèŠ‚æµè™½ç„¶ä¸­é—´çš„å¤„ç†å‡½æ•°è¢«é™åˆ¶äº†ï¼Œä½†æ˜¯åªæ˜¯å‡å°‘äº†é¢‘ç‡ï¼Œè€Œé˜²æŠ–åˆ™æŠŠä¸­é—´çš„å¤„ç†å‡½æ•°å…¨éƒ¨è¿‡æ»¤æ‰äº†ï¼Œåªæ‰§è¡Œè§„åˆ¤å®šæ—¶é—´å†…çš„æœ€åä¸€ä¸ªäº‹ä»¶ã€‚ é˜²æŠ–å’ŒèŠ‚æµå„è‡ªæœ‰è‡ªå·±ç‰¹ç‚¹ï¼Œéœ€è¦åœ¨ä¸åŒåœºæ™¯è¿›è¡Œé€‰æ‹©ï¼Œä¸èƒ½æ··åˆä¹±ä½¿ç”¨ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[],"author":"jetBn"},{"title":"ä½ ä¸çŸ¥é“çš„CSS ","slug":"ä¸çŸ¥é“çš„CSS","date":"2020-04-30T05:42:00.000Z","updated":"2020-04-30T07:22:17.122Z","comments":true,"path":"2020/04/30/ä¸çŸ¥é“çš„CSS/","link":"","permalink":"http://jetbn.github.io/2020/04/30/%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84CSS/","excerpt":"","text":"å‰è¨€ &ensp;&ensp;&ensp;&ensp;CSSçš„ä¸–ç•Œæ˜¯ç¥å¥‡çš„ã€‚å½“ä»Šæ‰€ä»¥ä¸ç®¡ç§»åŠ¨ç«¯è¿˜æ˜¯PCç«¯ç½‘é¡µéƒ½æ˜¯ç¦»ä¸å¼€CSCï¼ˆå±‚å æ ·å¼è¡¨ï¼‰ï¼Œåƒç±»é€‰æ‹©ï¼Œidé€‰æ‹©ç­‰ç­‰è¿™äº›é€‰æ‹©å™¨ æˆ‘ä»¬å·¥ä½œéƒ½æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯éš¾å…å¿½ç•¥ä¸€äº›ï¼ŒCSSä¸­æ›´å¼ºå¤§çš„å±æ€§æˆ‘ä»¬å¾ˆå°‘ç”¨åˆ°ï¼Œç‰¹æ­¤è®°å½•ä¸€äº›ã€‚ ç”¨~/ +å…„å¼Ÿé€‰æ‹©å™¨æ¥ç¾åŒ–è¡¨å•å…ƒç´  ~é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ çš„åé¢çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´  +é€‰æ‹©å™¨ï¼šæŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ çš„åé¢ç´§é‚»çš„å…„å¼Ÿå…ƒç´  ç”¨font-sizeï¼š0æ¥æ¸…é™¤é—´è· &ensp;&ensp;&ensp;&ensp;inline-blockçš„å…ƒç´ ä¹‹é—´ä¼šå—ç©ºç™½åŒºåŸŸçš„å½±å“ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ ä¹‹é—´å·®ä¸å¤šä¼šæœ‰ä¸€ä¸ªå­—ç¬¦çš„é—´éš™ã€‚å¦‚æœåœ¨åŒä¸€è¡Œå†…æœ‰4ä¸ª25%ç›¸åŒå®½åº¦çš„å…ƒç´ ï¼Œä¼šå¯¼è‡´æœ€åä¸€ä¸ªå…ƒç´ æ‰ä¸‹æ¥ï¼ˆå¦‚å›¾ï¼‰ã€‚ä½ å¯ä»¥åˆ©ç”¨å…ƒç´ æµ®åŠ¨floatï¼Œæˆ–è€…å‹ç¼©htmlï¼Œæ¸…é™¤å…ƒç´ é—´çš„ç©ºæ ¼æ¥è§£å†³ã€‚ä½†æœ€ç®€å•æœ‰æ•ˆçš„æ–¹æ³•è¿˜æ˜¯è®¾ç½®çˆ¶å…ƒç´ çš„font-sizeå±æ€§ä¸º0ã€‚ ç”¨ overflow ä¾†æ¸…é™¤æµ®åŠ¨(åˆ›å»ºå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) é€šè¿‡è§¦å‘BFCæ–¹å¼ï¼Œå®ç°æ¸…é™¤æµ®åŠ¨(çˆ¶å…ƒç´ æ·»åŠ overflow:hidden) 12345.fahter&#123; width: 400px; border: 1px solid deeppink; overflow: hidden; &#125; ç”¨pointer-eventæ¥ç¦ç”¨äº‹ä»¶ é˜»æ­¢ä»»ä½•ç‚¹å‡»åŠ¨ä½œçš„æ‰§è¡Œ ä½¿é“¾æ¥æ˜¾ç¤ºä¸ºé»˜è®¤å…‰æ ‡(cursor:default) é˜»æ­¢è§¦å‘hoverå’ŒactiveçŠ¶æ€ é˜»æ­¢JavaScriptç‚¹å‡»äº‹ä»¶çš„è§¦å‘ 123 &#x2F;&#x2F;ä½¿ç”¨è¯¥ç±»ï¼Œä»»ä½•ç‚¹å‡»äº‹ä»¶å°†æ— æ•ˆ.disabled &#123; pointer-events: none; &#125; ç”¨max-widthæ¥é˜²æ­¢å›¾ç‰‡æ’‘ç ´å®¹å™¨ é’ˆå¯¹å†…å®¹æ€§çš„æ–‡æ¡ˆï¼Œå›¾ç‰‡å¤§å°éƒ½æ˜¯æœªçŸ¥çš„ï¼Œä¸ºäº†é˜²æ­¢å›¾ç‰‡è¿‡å¤§è€Œæ’‘ç ´å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å›¾ç‰‡çš„max-width:100%æ¥å¤„ç†ã€‚ 1234img &#123; display:inline-block; max-width: 100%; &#125; å®ç°ä¸‰è§’å½¢ æ–°å»ºä¸€ä¸ªå…ƒç´ ï¼Œå°†å®ƒçš„å®½é«˜éƒ½è®¾ç½®ä¸º0ï¼›ç„¶åé€šè¿‡è®¾ç½®borderå±æ€§æ¥å®ç°ä¸‰è§’å½¢æ•ˆæœ 12345678910111213141516 .arrow&#123; width: 0; height: 0; &#x2F;*ç›´è§’ä¸‰è§’å½¢*&#x2F; &#x2F;* border-width: 50px 50px 0 0; border-style: solid; border-color: transparent #000 transparent transparent; *&#x2F; &#x2F;*å‘ä¸‹ä¸‰è§’å½¢*&#x2F; &#x2F;* border-width: 100px 100px 0 100px; border-style: solid; border-color: brown transparent transparent transparent; *&#x2F;&#125; ç§»åŠ¨ç«¯ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ–‡å­—é€‰æ‹©åŠŸèƒ½ 12345678 .unselect &#123; -webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none&#125; æ–‡å­—æ¨¡ç³Š 1234 .blur &#123; color: transparent; text-shadow: 0 0 5px rgba(0, 0, 0, 0.5)&#125; è¶…å‡ºNè¡Œæ˜¾ç¤ºçœç•¥å· 123456 .hide-text-n &#123; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: n; overflow: hidden&#125; ç¡¬ä»¶åŠ é€Ÿ å†™transitionã€animationæ—¶ï¼Œè¯·ç”¨transformä»£æ›¿leftã€topç­‰å±æ€§ï¼Œä»è€Œä½¿åŠ¨ç”»æ›´æµç•… 1234567 cube &#123; -webkit-transform: translateZ(0); -moz-transform: translateZ(0); -ms-transform: translateZ(0); -o-transform: translateZ(0); transform: translateZ(0)&#125; ç§»åŠ¨ç«¯å±å¹•æ—‹è½¬æ—¶ï¼Œå­—ä½“å¤§å°ä¸æ”¹å˜ 12345 html, body, form, p, div, h1, h2, h3, h4, h5, h6 &#123; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-size-adjust: 100%&#125; é”šç‚¹è·³è½¬å¹³æ»‘è¿‡æ¸¡ 123body &#123; scroll-behavior: smooth; &#125; æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦è¾¹æ¡†ã€è¾¹è·ç­‰123ul &gt; li:not(:last-child) &#123; border-bottom: 1px solid #c5b7b7&#125; æ¸…é™¤æµ®åŠ¨(é€‚åº”ä¼ªç±»)1234567.clearfix::after &#123; content: &#39;&#39;; display: block; height: 0; visibility: hidden; clear: both&#125; CSSé€‰æ‹©å™¨é€‰åŸºæ•°é¡¹ã€å¶æ•°é¡¹ã€å€æ•°åˆ†ç»„é¡¹12345678910&#x2F;* åŸºæ•° *&#x2F;.selector:nth-child(2n-1) &#123;&#125;&#x2F;* å¶æ•° *&#x2F;.selector:nth-child(2n) &#123;&#125;&#x2F;* å€æ•°åˆ†ç»„é¡¹ *&#x2F;.selector:nth-child(3n+1) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬1ã€4ã€7ã€10... *&#x2F;.selector:nth-child(3n+5) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬5ã€8ã€11ã€14... *&#x2F;.selector:nth-child(5n-1) &#123;&#125; &#x2F;* åŒ¹é…ç¬¬4ã€9ã€13ã€17... *&#x2F; å½“è¾“å…¥æ¡†çš„valueçš„é•¿åº¦ä¸ä¸º0æ—¶ï¼Œæ˜¾ç¤ºæœç´¢æŒ‰é’®ç”¨åˆ°placeholder-shownä¼ªç±»ï¼Œç®€å•æ¥è¯´å°±æ˜¯å½“inputæ ‡ç­¾æœ‰äº†placeholderå±æ€§å¹¶ä¸”å†…å®¹ä¸ä¸ºç©ºæ—¶ï¼Œä¼šè§¦å‘è¯¥çŠ¶æ€ï¼Œä½†æ˜¯å½“inputæ ‡ç­¾æœ‰äº†valueå€¼ä¹‹åï¼Œå°±ä¼šæ¶ˆé™¤è¯¥çŠ¶æ€ï¼Œä¹Ÿè¦é…åˆ:noté€‰æ‹©å™¨ html 1234&lt;div class&#x3D;&quot;input-line&quot;&gt; &lt;input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;è¯·è¾“å…¥å…³é”®å­—è¿›è¡Œæœç´¢&quot;&gt; &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;search-btn&quot;&gt;æœç´¢&lt;&#x2F;button&gt;&lt;&#x2F;div&gt; css 12345678.search-btn &#123; opacity: 0; transition: all .5s ease-in-out&#125; input:not(:placeholder-shown)~.search-btn &#123; opacity: 1 &#125;","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://jetbn.github.io/tags/CSS/"}],"author":"jetBn"},{"title":"Vue3.0å°è¯•","slug":"Vue3-0å°è¯•","date":"2020-04-29T02:59:17.000Z","updated":"2020-04-30T02:09:54.002Z","comments":true,"path":"2020/04/29/Vue3-0å°è¯•/","link":"","permalink":"http://jetbn.github.io/2020/04/29/Vue3-0%E5%B0%9D%E8%AF%95/","excerpt":"","text":"å‰è¨€ &ensp;&ensp;&ensp;&ensp;æœ‰å…³vue2çš„ç›¸å…³ç›¸å…³è¯­æ³•æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»çš„è¯­æ³•æˆ‘ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»ä¼šäº†ï¼Œç°åœ¨éƒ½å·²ç»2020å¹´äº†vueä½œä¸ºå‰ç«¯è¿™ä¹ˆçƒ­é—¨çš„æ¡†æ¶, ä¸å»å­¦ä¸€æ³¢å¯¹çš„è‡ªå·±æ˜¯åšå‰ç«¯çš„å—ï¼Ÿå“ˆå“ˆå“ˆå“ˆğŸ¤£ğŸ¤£ğŸ¤£ã€‚&ensp;&ensp;&ensp;&ensp;ä¸€è·¯å°±å¼€å§‹æŠ˜è…¾ï¼Œé‚£æ˜¯ä¸€è·¯æ›²æŠ˜å•Šï¼Œé‡ä¸ä¼šåˆ°ä¼šä¹Ÿä¸çŸ¥é“è‡ªå·±ç»å†äº†ä»€ä¹ˆï¼Œåˆ°ç°åœ¨vue3.xé©¬ä¸Šåˆæœ‰å¼€å§‹äº†æ‰€ä»¥è‡ªå·±ä¹Ÿæ˜¯å…ˆè¯•è¯•æ°´ï¼Œç©äº†ä¸€æ³¢ç›¸å…³çš„è¯­æ³•ã€‚&ensp;&ensp;&ensp;&ensp; åºŸè¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç è®°å½•ä¸‹(ç”±äºæœ¬äººæ²¡æœ‰ç”¨åˆ°TSæ‰€ä»¥éƒ½æ˜¯è¿›è¡Œä¸ES6è¿›è¡Œ) å¼€å§‹ åœ¨vue-cli3.0ä¸‹å®‰è£… composition-api 123npm install @vue/composition-api --save# ORyarn add @vue/composition-api åœ¨ä½¿ç”¨ä»»ä½• @vue/composition-api æä¾›çš„èƒ½åŠ›å‰ï¼Œå¿…é¡»å…ˆé€šè¿‡ Vue.use() è¿›è¡Œå®‰è£… 1234import Vue from 'vue'import VueCompositionApi from '@vue/composition-api'Vue.use(VueCompositionApi) å®‰è£…å®Œæˆåå°±å¯é¡¹ç›®ä¸­ä½¿ç”¨ç›¸å…³composition-apiæ¥å¼€å‘äº† setupï¼ˆå…¥å£å‡½æ•°ï¼‰&ensp;&ensp;&ensp;&ensp;setup()å‡½æ•°æ˜¯vue3ä¸­ï¼Œä¸“é—¨ä¸ºç»„ä»¶æä¾›çš„æ–°å±æ€§ï¼Œæ„Ÿè§‰å°±è·Ÿæ˜¯è·Ÿvue2.xä¸­çš„dataä¸€æ ·éœ€è¦è¿”å›ä¸€ä¸ªObjectä¸­åŒ…å«äº†è‡ªå·±å®šä¹‰çš„function, computed, watchä»¥åŠå±æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚ setup å‡½æ•°ä¼šåœ¨ beforeCreate ä¹‹åã€created ä¹‹å‰æ‰§è¡Œã€‚ 1234setup(props, context) &#123; const state = reactive(&#123;count: 0&#125;) // åˆ›å»ºæ•°æ® return state // è¿”å›é¡µé¢ä¸­ä½¿ç”¨&#125; æ¥æ”¶propsæ•°æ® åœ¨propsä¸­å®šä¹‰å½“å‰ç»„ä»¶å…è®¸å¤–ç•Œä¼ é€’è¿‡æ¥çš„å‚æ•°åç§°ï¼š 123 props: &#123; name: String&#125; é€šè¿‡setupå‡½æ•°çš„ç¬¬ä¸€ä¸ªå½¢å‚ï¼Œæ¥æ”¶ props æ•°æ®ï¼š 123setup(props) &#123; console.log(props.name)&#125; contextå½¢å‚ setupå‡½æ•°çš„ç¬¬äºŒä¸ªå½¢å‚æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå°±æ˜¯vue2.xä¸­çš„thisï¼Œåœ¨vue 3.xä¸­ï¼Œå®ƒä»¬çš„è®¿é—®æ–¹å¼å¦‚ä¸‹ 12345 setup(props, context) &#123; context.slots context.emit context.refs&#125; reactiveä¸refï¼ˆå“åº”å¼æ•°æ®æºï¼‰ reactive()å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå“åº”çš„æ•°æ®å¯¹è±¡ã€‚ è¿™ç­‰ä»·äºvue2.xä¸­çš„Vue.observable()å‡½æ•°ï¼Œvue3.xç„¶åå°±æ˜¯å¯ä»¥ç›´æ¥ç”¨reactive()å‡½æ•°ç›´æ¥åˆ›å»ºå“åº”çš„æ•°æ®å¯¹è±¡ã€‚ æŒ‰éœ€å¯¼å…¥reactiveç›¸å…³å‡½æ•° import { reactive } from &#39;@vue/composition-api&#39; åœ¨setup()çš„å‡½æ•°ä¸­è°ƒç”¨reactive()å‡½æ•°ï¼Œåˆ›å»ºå¯¹åº”çš„å“åº”å¼æ•°æ®å¯¹è±¡ 12345setup() &#123; // è¿™ä¸ªç±»ä¼¼äºvue2ä¸­çš„data()è¿”å›çš„å“åº”å¼å¯¹è±¡ const state = reactive(&#123; count: 0 &#125;) return state&#125; åœ¨templateä¸­è®¿é—®å“åº”å¼æ•°æ® 123&lt;template&gt; &lt;span&gt;å½“å‰çš„countå€¼ä¸º:&#123;&#123;count&#125;&#125;&lt;/span&gt;&lt;/template&gt; ref()å‡½æ•°ç”¨æ¥æ ¹æ®ç»™å®šå€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ï¼Œref()å‡½æ•°çš„è°ƒç”¨è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ŠåªåŒ…å«ä¸€ä¸ªvalueå±æ€§ã€‚ å¯¼å…¥ç›¸å…³refç›¸å…³å‡½æ•° import { ref } from &#39;@vue/composition-api&#39; åˆ›å»ºå“åº”å¼å¯¹è±¡ 1234567setup() &#123; const count = ref(0) return &#123; count, name: ref('vue') &#125;&#125; åœ¨templateä¸­è®¿é—®å“åº”å¼æ•°æ®123&lt;template&gt; &lt;span&gt;&#123;&#123;count&#125;&#125;--- &#123;&#123;name&#125;&#125;&lt;/span&gt;&lt;/template&gt; isRefçš„ä½¿ç”¨ ï¼ŒisRef()å‡½æ•°ä¸»è¦ç”¨æ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦ä¸ºref()åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼›åº”ç”¨åœºæ™¯ï¼šå½“éœ€è¦å±•å¼€æŸä¸ªå¯èƒ½ä¸ºref()åˆ›å»ºå‡ºæ¥çš„å€¼å¾—æ—¶å€™ï¼Œä¾‹å¦‚ï¼š 123import &#123; isRef &#125; from '@vue/composition-api'const fooData = isRef(foo) ? foo.value : foo toRefsçš„ä½¿ç”¨ï¼ŒtoRefs()å‡½æ•°å¯ä»¥å°†reactive()åˆ›å»ºå‡ºæ¥çš„å“åº”å¼å¯¹è±¡ï¼Œè½¬ä¸ºæ™®é€šå¯¹è±¡ï¼Œåªä¸è¿‡è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§èŠ‚ç‚¹éƒ½æ˜¯ä»¥ref()ç±»å‹çš„åƒæ˜¯æ•°æ®ï¼Œ æœ€å¸¸è§åº”ç”¨åœºæ™¯ 12345678910111213141516171819202122import &#123; toRefs, reactive &#125; from '@vue/composition-api'setup() &#123; // å®šä¹‰å“åº”å¼æ•°æ®å¯¹è±¡ const state = reactive(&#123; count: 0 &#125;) // å®šä¹‰é¡µé¢ä¸Šå¯ç”¨çš„äº‹ä»¶å¤„ç†å‡½æ•° const increment = () =&gt; &#123; state.count++ &#125; // åœ¨ setup ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡ä¾›é¡µé¢ä½¿ç”¨ // è¿™ä¸ªå¯¹è±¡ä¸­å¯ä»¥åŒ…å«å“åº”å¼çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åŒ…å«äº‹ä»¶å¤„ç†å‡½æ•° return &#123; // å°† state ä¸Šçš„æ¯ä¸ªå±æ€§ï¼Œéƒ½è½¬åŒ–ä¸º ref å½¢å¼çš„å“åº”å¼æ•°æ® ...toRefs(state), // è‡ªå¢çš„äº‹ä»¶å¤„ç†å‡½æ•° increment &#125;&#125; åœ¨templateä¸­å°±ç›´æ¥å¯ä»¥ä½¿ç”¨countå±æ€§å’Œç›¸å¯¹åº”çš„incrementæ–¹æ³•äº†ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨roRefsç›´æ¥è¿”å›stateé‚£ä¹ˆå°±å¾—é€šè¿‡state.xxæ¥è®¿é—®æ•°æ® 123456&lt;template&gt; &lt;div&gt; &lt;span&gt;å½“å‰çš„countå€¼ä¸ºï¼š&#123;&#123;count&#125;&#125;&lt;/span&gt; &lt;button @click=\"increment\"&gt;add&lt;/button&gt; &lt;/div&gt;&lt;/template&gt; computedä¸watchï¼ˆè®¡ç®—å±æ€§ä¸ç›‘å¬ï¼‰ computed() ç”¨æ¥åˆ›å»ºè®¡ç®—å±æ€§ï¼Œcomputed() å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª ref çš„å®ä¾‹ã€‚ä½¿ç”¨ computed ä¹‹å‰éœ€è¦æŒ‰éœ€å¯¼å…¥ï¼š 1import &#123; computed &#125; from '@vue/composition-api' åˆ›å»ºåªè¯»çš„è®¡ç®—å±æ€§ï¼Œåœ¨è°ƒç”¨computed()å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥ä¸€ä¸ªfunctionå‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªåªè¯»çš„è®¡ç®—å±æ€§ã€‚ 123456789// åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®const count = ref(1) // æ ¹æ®countçš„å€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§ï¼Œ å®ƒä¼šæ ¹æ®refè‡ªåŠ¨è®¡ç®—å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„refconst computedCount = computed(() =&gt; count.value + 1 ) console.log(computedCount.value) // æ‰“å° 2computedCount.value++ //æŠ¥é”™ åˆ›å»ºå¯è¯»å¯å†™çš„è®¡ç®—å±æ€§ åœ¨è°ƒç”¨computed()å‡½æ•°çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªåŒ…å«getå’Œsetçš„å¯¹è±¡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯è¯»å¯å†™çš„è®¡ç®—å±æ€§äº†ã€‚ 123456789101112// åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®const count = ref(1) // æ ¹æ®countçš„å€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§ï¼Œ å®ƒä¼šæ ¹æ®refè‡ªåŠ¨è®¡ç®—å¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„refconst computedCount = computed(&#123; get: () =&gt; count.value + 1, set: (val) =&gt; count.value = val - 1&#125; ) computedCount.count = 6console.log(count.value) // æ‰“å° 5 2.watch() å‡½æ•°ç”¨æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œè·Ÿvue2.xä¸­çš„æ˜¯ä¸€æ ·çš„ä¸è¿‡åœ¨è¿™å¾—åƒcomputedçš„ä½¿ç”¨æ–¹æ³•ä¸€æ ·å¯¼å…¥ç›¸å…³apiæ–¹æ³• ä½¿ç”¨å‰å¯¼å…¥ import { watch } from &#39;@vue/composition-api&#39; åŸºæœ¬ç”¨æ³• 1234567891011const count = ref(0)// å®šä¹‰watchåªè¦countçš„å€¼å˜åŒ–ï¼Œå°±ä¼šè§¦å‘watchçš„å›è°ƒ// watch ä¼šåœ¨åˆ›å»ºçš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡watch(() =&gt; console.log(count.value))setTimeout(() =&gt; &#123; count.value++&#125;, 1000) ç›‘å¬æŒ‡å®šæ•°æ® 12345678910111213/ å®šä¹‰reactiveæ•°æ®æºconst state = reactive(&#123; count: 0 &#125;)// ç›‘è§† state.count è¿™ä¸ªæ•°æ®èŠ‚ç‚¹çš„å˜åŒ–watch(() =&gt; state.count, (now, prev) =&gt; &#123; console.log(now, prev)&#125;)/ å®šä¹‰refæ•°æ®æºconst count = ref(0)// ç›‘è§†countè¿™ä¸ªæ•°æ®çš„å˜åŒ–watch(count, (now, prev) =&gt; &#123; console.log(now, prev)&#125;) LifeCycle Hooks(ç”Ÿå‘½å‘¨æœŸ)åœ¨æ–°ç‰ˆä¸­çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦æŒ‰éœ€å¯¼å…¥ï¼Œå¹¶ä¸”åªèƒ½å†™setup()å‡½æ•°ä¸­ã€‚ ä½¿ç”¨onBeforeMount, onMounted, updatedç›¸å…³ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨å‰å¯¼å…¥ç›¸å…³apiæ–¹æ³• 1import &#123; onBeforeMount, onMounted, updated &#125; from '@vue/composition-api' 1234567891011setup () &#123; onBeforeMount(() =&gt; &#123; console.log('onBeforeMount!') &#125;) onMounted(() =&gt; &#123; console.log('onMounted!') &#125;) updated(() =&gt; &#123; console.log('updated!') &#125;) &#125; ç›¸å…³æ¯ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½æ˜¯ä¼ å…¥ä¸€ä¸ªfunctionå‡½æ•°ã€‚ vue2.xä¸æ–°ç‰ˆComposition APIä¹‹é—´çš„æ˜ å°„å…³ç³» beforeCreate -&gt; setup created -&gt; setup beforeMount -&gt; onBeforeMount mounted -&gt; onMounted beforeUpdate -&gt; onBeforeUpdate updated -&gt; onUpdated beforeDestroy -&gt; onBeforeUnmount destroyed -&gt; onUnmounted errorCaptured -&gt; onErrorCaptured provide &amp; injectï¼ˆæ•°æ®å…±äº«ï¼‰provide()å’Œ inject()å¯ä»¥å®ç°åµŒå¥—ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ã€‚è¿™ä¸ªä¸¤ä¸ªå‡½æ•°åªèƒ½åœ¨setup()å‡½æ•°ä¸­ä½¿ç”¨ã€‚çˆ¶çº§ç»„ä»¶ä¸­ä½¿ç”¨provide()å‡½æ•°å¯ä»¥ä½¿æ•°æ®å‘ä¸‹ä¼ é€’ï¼Œå­ç»„ä»¶ä¸­ä½¿ç”¨inject()æ¥æ”¶ä¸Šå±‚ä¼ è¿‡æ¥çš„æ•°æ®ã€‚ å®ç°ä»£ç : æ ¹ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ï¼‰parent.vue 1234567891011121314151617181920212223&lt;template&gt; &lt;div&gt; &lt;child-one&gt;&lt;/child-one&gt; &lt;child-two&gt;&lt;/child-two&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; provide &#125; from '@vue/composition-api' import ChildOne from '@/components/Child' import ChildTwo from '@/components/Child' export default &#123; components: &#123; ChildOne, ChildTwo &#125;, setup() &#123; // provide('è¦å…±äº«çš„æ•°æ®åç§°', è¢«å…±äº«çš„æ•°æ®) provide('globalName', 'vue') &#125; &#125;&lt;/script&gt; å­ç»„ä»¶1 ChildOne.vue 12345678910111213141516171819&lt;template&gt; &lt;div&gt; &lt;!--é¡µé¢å±•ç¤ºæ•°æ®globalName --&gt; &#123;&#123;globalName&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; inject &#125; from '@vue/composition-api' export default &#123; name: 'ChildOne', setup() &#123; const globalName = inject('globalName') è°ƒç”¨ inject å‡½æ•°æ—¶ï¼Œé€šè¿‡æŒ‡å®šçš„æ•°æ®åç§°ï¼Œè·å–åˆ°çˆ¶çº§å…±äº«çš„æ•°æ® return &#123; globalName &#125; &#125; &#125;&lt;/script&gt; å­ç»„ä»¶2 ChildTwo.vue 12345678910111213141516171819&lt;template&gt; &lt;div&gt; &lt;!--é¡µé¢å±•ç¤ºæ•°æ®globalName --&gt; &#123;&#123;globalName&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; inject &#125; from '@vue/composition-api' export default &#123; name: 'ChildTwo', setup() &#123; const globalName = inject('globalName') è°ƒç”¨ inject å‡½æ•°æ—¶ï¼Œé€šè¿‡æŒ‡å®šçš„æ•°æ®åç§°ï¼Œè·å–åˆ°çˆ¶çº§å…±äº«çš„æ•°æ® return &#123; globalName &#125; &#125; &#125;&lt;/script&gt; provideå‡½æ•°è¢«å…±äº«çš„æ•°æ®å¯ä»¥ä½¿refå’Œreactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œç”¨æ³•ç±»ä¼¼ template refsï¼ˆå…ƒç´ ç»„ä»¶ï¼‰æˆ‘ä»¬çŸ¥é“åœ¨vue2.xä¸­è·å–é¡µé¢å…ƒç´ çš„DOMå¯ä»¥é€šè¿‡refå†™åœ¨é¡µé¢å…ƒç´ ä¸Šç„¶ååœ¨jsä¸­é€šè¿‡$refs.xæ¥æ‹¿å–å½“å‰å…ƒç´ çš„DOMå…ƒç´ ä¿¡æ¯ï¼Œæ“ä½œDOM,åœ¨composition-apiä¸­æˆ‘ä»¬é€šè¿‡æä¾›çš„refæ–¹æ³•ä¼ å…¥ä¸€ä¸ªnullå¹¶ä¸”å®šä¹‰ä¸é¡µé¢å…ƒç´ ä¸Šrefç›¸å¯¹åº”ã€‚ ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div&gt; &lt;h1 ref=\"h1Ref\"&gt;Hello Word&lt;/h1&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref, onMounted &#125; from '@vue/composition-api'export default &#123; setup() &#123; // åˆ›å»ºä¸€ä¸ª DOM å¼•ç”¨ const h1Ref = ref(null) // åœ¨ DOM é¦–æ¬¡åŠ è½½å®Œæ¯•ä¹‹åï¼Œæ‰èƒ½è·å–åˆ°å…ƒç´ çš„å¼•ç”¨ onMounted(() =&gt; &#123; // ä¸º dom å…ƒç´ è®¾ç½®å­—ä½“é¢œè‰² // h1Ref.value æ˜¯åŸç”ŸDOMå¯¹è±¡ console.log(h1Ref.value) &#125;) // æŠŠåˆ›å»ºçš„å¼•ç”¨ return å‡ºå» return &#123; h1Ref &#125; &#125;&#125;&lt;/script&gt; ç»“å°¾&ensp;&ensp;&ensp;&ensp;æ„Ÿè§‰composition-apiéƒ½æ˜¯ä»¥å¯¼å…¥çš„å½¢å¼ä½¿ç”¨ï¼Œæ„Ÿè§‰æ²¡æœ‰ç›´æ¥vue2.xä¸­ç›´æ¥ä½¿ç”¨çš„æ–¹ä¾¿å“ˆğŸ˜‚ã€‚è™½ç„¶éƒ½æ˜¯è¯´æŒ‰éœ€å¼•å…¥ï¼Œä½¿ç”¨æƒ³ç”¨çš„æ–¹æ³•ã€‚å¯¹æ¯”äº†ä¸vue2.xçš„å„ç§å†™æ³•æ„Ÿè§‰çªç„¶è½¬è¿‡æ¥æœ‰å¾ˆå¤§ä¸é€‚åº”ï¼Œå†™çš„å„ç§æ•°æ®æ–¹æ³•éƒ½è¦åœ¨setupçš„å…¥å£å‡½æ•°ä¸­å¯¼å‡ºæ‰èƒ½åœ¨é¡µé¢ä¸Šä½¿ç”¨ã€‚è™½ç„¶vue2.xå®šä¹‰çš„æ•°æ®ä¹Ÿéœ€è¦é€šè¿‡dataå‡½æ•°è¿”å›å€¼ç„¶ååœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯æ–¹æ³•ä¸ç”¨å•Šï¼Œä»€ä¹ˆè®¡ç®—å±æ€§ç›‘å¬ä¹Ÿéƒ½æ˜¯ä¸ç”¨çš„å•Šã€‚å¯èƒ½æ˜¯è‡ªå·±é€‚åº”äº†vue2.xçš„å„ç§å†™æ³•ï¼Œæ„Ÿè§‰ç”¨èµ·æ¥å„ç§çˆ½ã€‚è½¬å˜åˆ°vue3.xä¹Ÿå°±æ˜¯ç°åœ¨çš„composition-apiè¿˜éœ€è¦ç‚¹æ—¶é—´ã€‚ æœ€åè‡ªå·±è¿˜æ˜¯æœ‰ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³æœ‰å¤§ä½¬ç»™æˆ‘æ€è·¯å—ï¼Ÿå°±æ˜¯å­çˆ¶ç»„ä»¶çš„é€šä¿¡æ€ä¹ˆå†™ï¼Ÿä¹‹å‰ç‰ˆæœ¬æ˜¯é€šè¿‡$emitè¿›è¡Œï¼Œæˆ‘å‘ç°è¿™setupå‡½æ•°ä¸­å†™äº†çˆ¶ç»„ä»¶æ‹¿ä¸åˆ°ã€‚ æœ€åè´´ä¸Šcomposition-apiå®˜æ–¹æ–‡æ¡£ https://vue-composition-api-rfc.netlify.com","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"Webå‰ç«¯/Vue","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://jetbn.github.io/tags/Vue/"}]},{"title":"Shopifyæ’ä»¶å¼€å‘å…¥å‘ä½“éªŒ","slug":"Shopifyæ’ä»¶å¼€å‘å…¥å‘ä½“éªŒ","date":"2020-04-29T02:58:15.000Z","updated":"2020-04-30T02:39:34.782Z","comments":true,"path":"2020/04/29/Shopifyæ’ä»¶å¼€å‘å…¥å‘ä½“éªŒ/","link":"","permalink":"http://jetbn.github.io/2020/04/29/Shopify%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%85%A5%E5%9D%91%E4%BD%93%E9%AA%8C/","excerpt":"","text":"å‰è¨€&ensp;&ensp;&ensp;&ensp;ç”±äºå…¬å¸çš„éœ€æ±‚å¼€å‘Shopifyçš„åº”ç”¨æ’ä»¶è‡ªå·±ç‰¹åœ°è®°å½•ä¸‹ã€‚ç®€å•çš„ä»‹ç»ä¸‹Shopify,å®ƒæ˜¯ç”±æ‰˜æ¯”äºšæ–¯Â·å¢å…‹åˆ›åŠçš„åŠ æ‹¿å¤§ç”µå­å•†åŠ¡è½¯ä»¶å¼€å‘å•†ï¼Œæ€»éƒ¨ä½äºåŠ æ‹¿å¤§é¦–éƒ½æ¸¥å¤ªåï¼Œå…¶æä¾›çš„æœåŠ¡è½¯ä»¶Shopifyæ˜¯ä¸€ä¸ªSaaSé¢†åŸŸçš„è´­ç‰©è½¦ç³»ç»Ÿï¼Œé€‚åˆè·¨å¢ƒç”µå•†å»ºç«‹ç‹¬ç«‹ç«™ï¼Œç”¨æˆ·æ”¯ä»˜ä¸€å®šè´¹ç”¨å³å¯åœ¨å…¶ä¸Šåˆ©ç”¨å„ç§ä¸»é¢˜/æ¨¡æ¿å»ºç«‹è‡ªå·±çš„ç½‘ä¸Šå•†åº—ã€‚ &ensp;&ensp;&ensp;&ensp;ç”±äºæ˜¯å›½å¤–çš„å®˜ç½‘æ–‡æ¡£ä¹Ÿéƒ½æ˜¯è‹±æ–‡ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹åƒåŠ›å“¦ï¼ˆå°ç”Ÿè‹±æ–‡æ°´å¹³æœ‰é™ğŸ¤£ğŸ¤£ï¼‰ã€‚ä¸è¿‡ä¹‹ååº”è¯¥æœ‰ä¸­æ–‡äº†ç°åœ¨å¾ˆå¤šé¡µé¢æœ‰ä¸­æ–‡äº†å·²ç»ã€‚ &ensp;&ensp;&ensp;&ensp;è¯¥åº”è¯¥ç”¨æ’ä»¶å®˜æ–¹æ¨èæ˜¯ç”¨Reactçš„next.jsæœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ä»¥åŠnode.jsä½œä¸ºåç«¯è¯­è¨€ä½¿ç”¨GraphQLå¼€å‘ã€‚ä½œä¸ºæ²¡æ¥è§¦è¿‡GraphQLçš„æˆ‘èµ¶ç´§è¡¥äº†ä¸€æ³¢çŸ¥è¯†ã€‚åæ¥æˆ‘ä¸€è·¯è·Œè·Œæ’æ’ç»ˆäºç°åœ¨æ˜¯äº†è§£äº†ä¸€ä¸ªå¤§æ¦‚ã€‚æœ€ç»ˆæˆ‘è¿˜æ˜¯ä½¿ç”¨nodeä½œä¸ºä¸»å…¥å£ç¨‹åºï¼ŒéªŒè¯åº”ç”¨æ’ä»¶è·å–ç›¸å…³çš„access_tokenå’Œå•†åº—åœ°å€ã€‚å‰©ä¸‹çš„è¯·æ±‚ä»€ä¹ˆShopifyæ¥å£ä¹Ÿæ²¡æœ‰ç”¨GraphQLè€Œæ˜¯ä½¿ç”¨äº†ResfulApiè®©åç«¯å·¥ä½œäººå‘˜å»æ“ä½œäº†ï¼Œç„¶åæˆ‘è¯·æ±‚åç«¯æ¥å£è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚ï¼ˆæœ€åç†Ÿæ‚‰äº†ï¼Œä»€ä¹ˆéªŒè¯éƒ½æ˜¯ä¸¢ç»™åç«¯æ“ä½œäº†ï¼Œå‰ç«¯æˆ‘ä¹Ÿå°±å¯ä»¥ä½¿ç”¨å„ç§æ¡†æ¶äº†è€Œä¸æ˜¯å•å•åªèƒ½ä½¿ç”¨next.jsï¼‰ã€‚ æ³¨å†Œè·å–å¼€å‘å‰æè¦ç´  åˆ›å»ºShopifyå¼€å‘è€…è´¦å·å¦‚å›¾åœ¨https://developers.shopify.com/ç½‘ç«™æ³¨å†Œç›¸å…³çš„è´¦å·ã€‚ åœ¨ç›¸å…³partnersçš„é¡µé¢åˆ›å»ºå•†åº—(ä»¥ä¾›åé¢å¼€å‘åº”ç”¨ä½¿ç”¨)ä»¥åŠåº”ç”¨ åœ¨åˆ›å»ºåº”ç”¨çš„æœ‰è‡ªå®šä¹‰åº”ç”¨å’Œå…¬å…±åº”ç”¨å¦‚å›¾ï¼š ä¸€èˆ¬æˆ‘ç›¸ä¿¡æˆ‘æˆ‘ä»¬éƒ½æ˜¯åˆ›å»ºçš„å…¬å…±åº”ç”¨ï¼Œåˆ°ç›®å‰æˆ‘å¼€å‘çš„åº”ç”¨ä¹Ÿéƒ½æ˜¯å…¬å…±ç±»å‹ï¼Œåœ¨åˆ›å»ºåº”ç”¨çš„æ—¶å€™URLå’Œç›¸å…³çš„é‡å®šå‘URLéƒ½æ˜¯å¿…é¡»å†™çš„å› ä¸ºæˆ‘ä¹Ÿæ²¡æœ‰æ³¨å†ŒåŸŸåå•¥çš„å§ï¼Œæ‰€ä»¥æ­¤æ—¶æ˜¯ç”¨äº†ngrokå†…ç½‘ç©¿é€ï¼Œåœ¨å®˜æ–¹çš„å¼€å‘ä»‹ç»ä¸­ä¹Ÿæ˜¯ä½¿ç”¨è¿™ä¸ªã€‚åœ¨æ­¤æˆ‘ä»¬å¡«å†™çš„URLå°±è¦å’Œä½ ä½¿ç”¨ngrokæš´éœ²å‡ºå»çš„åœ°å€å¯¹åº”äº†ï¼Œä¸è¿‡ä½¿ç”¨nodeçš„koaæ¡†æ¶æœ‰ä¸ªä¸“é—¨çš„ä¸­é—´ä»¶ä¹Ÿæ˜¯å®˜æ–¹ä½¿ç”¨çš„é‡å®šå‘åœ°å€éƒ½æ˜¯åŸŸåååŠ ä¸Šäº†shopify/auth ä¾‹å¦‚ï¼š URL:https://30aca829.ngrok.io, é‡å®šå‘URL:https://30aca829.ngrok.io/shopify/auth/ï¼ˆç”µè„‘é‡å¯é‡æ–°æš´éœ²å‡ºå»è¿™ä¸ªè¿ä¸ªåœ°å€éƒ½æ˜¯è¦é‡æ–°å¡«ä¸€éï¼Œç„¶åkoaçš„ä¸­é—´ä»¶å°±ä¼šè·³è½¬åˆ°https://30aca829.ngrok.io/shopify/auth/è¿›è¡Œç›¸å…³çš„éªŒè¯æ“ä½œã€‚ï¼ˆè¿™åœ¨åé¢çš„å…¥å£ï¼‰ã€‚åºä¸­ä¼šä¸Šä»£ç ï¼Œç„¶ååœ¨åæœŸæˆ‘ä»¬æ²¡æœ‰ç”¨koaä½œä¸ºå…¥å£è¿™ä¸ªåœ°å€ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±æƒ³æ€ä¹ˆå¡«å°±æ€ä¹ˆå¡«ï¼‰ã€‚ åˆ›å»ºå®Œæˆï¼ˆæ‹¿å–ç›¸å…³çš„å¯†é’¥å¾ˆé‡è¦ï¼ï¼å¾ˆé‡è¦ï¼ï¼ä½œä¸ºå¼€å‘è¯»å–æ•°æ®å’Œè¯·æ±‚å®˜æ–¹apiä½¿ç”¨ï¼‰ å·®ä¸å¤šäº†å‰æå°±è¿™äº›æ­¥éª¤ï¼Œæ³¨å†ŒæˆåŠŸä¹‹åå¡«å†™å¥½æ¥ä¸‹æ¥å°±æ˜¯ä¸€ç³»åˆ—ä»£ç æ“ä½œäº†ã€‚ ç¼–å†™å¼€å‘ç¯å¢ƒç¨‹åº åˆ›å»ºé¡¹ç›®ç›®å½•ï¼ˆsample-appï¼‰ï¼Œå¹¶ä½¿ç”¨npmåˆå§‹åŒ–é¡¹ç›®ç›®å½• 1npm init -y å®‰è£…ç›¸å…³ä¾èµ– 1npm install --save react react-dom next å› ä¸ºæ˜¯ç”¨next.jsæ‰€ä»¥ä¸ç†Ÿæ‚‰çš„è¿˜å¾—çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ https://nextjs.frontendx.cn/ åˆ›å»ºæ–‡ä»¶pageså¹¶åœ¨ä¸‹é¢æ–°å»ºindex.js 1234567const Index &#x3D; () &#x3D;&gt; ( &lt;div&gt; &lt;p&gt;Sample app using React and Next.js&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;);export default Index; æ·»åŠ ç›¸å…³è¿è¡Œå‘½ä»¤æ‰“å¼€package.jsonæ–‡ä»¶æ·»åŠ  1234567891011&#123; &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;dev&quot;: &quot;next&quot;, &quot;build&quot;: &quot;next build&quot;, &quot;start&quot;: &quot;next start&quot; &#125;&#125;&#96;&#96;&#96; è¿è¡Œå¼€å‘ç¯å¢ƒ npm run dev 123 åˆ°è¿™é‡Œåº”è¯¥æ˜¯åˆ›å»ºä¸€ä¸ª&#96;next.js&#96;é¡¹ç›®ç„¶åæ¥ä¸‹æ¥å¯¹æ¥åˆ°&#96;Shopify&#96;4. ä½¿ç”¨&#96;ngrok&#96;æš´éœ²å‡ºå»è‡ªå·±çš„&#96;3000&#96;ç«¯å£å› ä¸º&#96;next.js&#96;å¯åŠ¨çš„é»˜è®¤æ˜¯&#96;3000&#96;ç«¯å£ ngrok http 3000 12345 ![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb29415dbff038?w&#x3D;976&amp;h&#x3D;519&amp;f&#x3D;png&amp;s&#x3D;30962) ç„¶ååœ¨è‡ªå·±åˆ›å»ºçš„åº”ç”¨ä¸­è®¾ç½®ä¸­æ·»åŠ &#96;å¯¹åº”çš„url&#96;ï¼ˆå¾—ç”¨&#96;https&#96;çš„ï¼‰å°±åœ¨ä¸Šé¢æ‰€è¯´çš„å¡«å†™&#96;url&#96; 5. ä½¿ç”¨&#96;node&#96;çš„ &#96;koa&#96;æ¥è¿›è¡Œæ¸²æŸ“é¡µé¢æ“ä½œ 1. åˆ›å»º&#96;env&#96;ç¯å¢ƒå˜é‡æ–‡ä»¶å¹¶å†™å…¥åœ¨ä¸Šé¢åˆ›å»ºçš„åº”ç”¨çš„&#96;KEY&#96; SHOPIFY_API_KEY=&apos;YOUR API KEY FROM SHOPIFY PARTNERS DASHBOARD&apos; SHOPIFY_API_SECRET_KEY=&apos;YOUR API SECRET KEY FROM SHOPIFY PARTNERS DASHBOARD&apos; 12. å®‰è£…ç›¸å…³&#96;Shopify&#96;çš„éªŒè¯&#96;koa&#96;ä¸­é—´ä»¶ npm install --save koa @shopify/koa-shopify-auth dotenv koa-session isomorphic-fetch 13. åˆ›å»º&#96;server.js&#96;å†™å…¥ç›¸å…³éªŒè¯ä»£ç  require(&apos;isomorphic-fetch&apos;); const dotenv = require(&apos;dotenv&apos;); const Koa = require(&apos;koa&apos;); const next = require(&apos;next&apos;); const { default: createShopifyAuth } = require(&apos;@shopify/koa-shopify-auth&apos;); const { verifyRequest } = require(&apos;@shopify/koa-shopify-auth&apos;); const session = require(&apos;koa-session&apos;); dotenv.config(); // graphqlçš„ç›¸å…³ä¸­é—´ä»¶ const { default: graphQLProxy } = require(&apos;@shopify/koa-shopify-graphql-proxy&apos;); const { ApiVersion } = require(&apos;@shopify/koa-shopify-graphql-proxy&apos;); const port = parseInt(process.env.PORT, 10) || 3000; const dev = process.env.NODE_ENV !== &apos;production&apos;; const app = next({ dev }); const handle = app.getRequestHandler(); const { SHOPIFY_API_SECRET_KEY, SHOPIFY_API_KEY } = process.env; // ç¯å¢ƒå˜é‡é‡Œè¯»å– api-keyä¸api-secret-key app.prepare().then(() =&gt; { const server = new Koa(); server.use(session(server)); server.keys = [SHOPIFY_API_SECRET_KEY]; server.use( createShopifyAuth({ apiKey: SHOPIFY_API_KEY, secret: SHOPIFY_API_SECRET_KEY, scopes: [&apos;read_products&apos;, &apos;write_products&apos;], //å¡«å†™ç›¸å…³åº”ç”¨apiç›¸å…³è¯·æ±‚çš„æƒé™ afterAuth(ctx) { const { shop, accessToken } = ctx.session; // é€šè¿‡sessionæ‹¿å–ç›¸å…³å•†åº—åœ°å€ä»¥åŠè¯·æ±‚apiéœ€è¦çš„accessToken ctx.cookies.set(&apos;shopOrigin&apos;, shop, { httpOnly: false }); ctx.redirect(&apos;/&apos;); // é‡å®šå‘åˆ°indexé¦–é¡µ }, }), ); server.use(verifyRequest()); server.use(async (ctx) =&gt; { await handle(ctx.req, ctx.res); ctx.respond = false; ctx.res.statusCode = 200; return }); server.use(graphQLProxy({version: ApiVersion.October19})) // è¿™é‡Œå¡«å†™ç›¸å…³apiçš„ç‰ˆæœ¬ server.listen(port, () =&gt; { console.log(`&gt; Ready on http://localhost:${port}`); // ç›‘å¬ç«¯å£ }); }); 14. ä¿®æ”¹&#96;package.json&#96;æ–‡ä»¶ä½¿ç”¨æˆ‘ä»¬çš„&#96;server.js&#96;æ¥å¯åŠ¨é¡¹ç›® { &quot;scripts&quot;: { &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;dev&quot;: &quot;node server.js&quot;, &quot;start&quot;: &quot;NODE_ENV=production node server.js&quot;, &quot;build&quot;: &quot;next build&quot;, } } 1234ç°åœ¨æˆ‘ä»¬å¯åŠ¨é¡¹ç›®å¹¶ä¸”ç”¨&#96;ngrok&#96;æš´éœ²å‡ºå»çš„åŸŸåå°±èƒ½çœ‹åˆ°![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb2a914762cace?w&#x3D;434&amp;h&#x3D;214&amp;f&#x3D;png&amp;s&#x3D;6256)è¿™é‡Œè¿˜è¦åœ¨åŸŸåçš„&#96;shop&#96;å¡«å†™æˆ‘ä»¬çš„å•†åº—åœ°å€ä¾‹å¦‚æˆ‘è‡ªå·±çš„ï¼š https://e44132cd.ngrok.io/auth/inline?shop=jetbn.myshopify.com 1234567891011 ä¸€åˆ‡å¡«å†™å°±ç»ªä¹‹åä¸€&#96;enter&#96;é¡µé¢å°±è‡ªåŠ¨è·³è½¬äº†ã€‚ æœ€åå±•ç¤ºçš„é¡µé¢ï¼š ![](https:&#x2F;&#x2F;user-gold-cdn.xitu.io&#x2F;2020&#x2F;1&#x2F;17&#x2F;16fb2af2f6b051c0?w&#x3D;1317&amp;h&#x3D;551&amp;f&#x3D;png&amp;s&#x3D;32089)## æŠ˜è…¾å…¶ä»–æ¡†æ¶å°è¯•&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;å‰å‰ååéƒ½æ˜¯ä½¿ç”¨&#96;React&#96;çš„&#96;next.js&#96;å¼€å‘äº†ä¸¤ä¸‰ä¸ªåº”ç”¨ï¼Œæ„Ÿè§‰å°±æ˜¯å¼€å‘çš„æ—¶å€™å¤ªéº»çƒ¦äº†ï¼Œæ€»è¦å†…ç½‘ç©¿é€ï¼Œè€Œä¸”å±•ç¤ºçš„é¡µé¢éƒ½æ˜¯&#96;Shopify&#96;çš„çš„è‡ªå·±å¹³å°ä¸Šï¼Œè€Œä¸”å¼€å‘å†™å®Œä»£ç ç­‰å®ƒå“åº”è¿‡æ¥è¿˜å¾ˆæ…¢ã€‚å°±è¿™åŸå› æˆ‘åˆå¼€å§‹æŠ˜è…¾äº†å¯»æ±‚å…¶ä»–çš„æ–¹æ¡ˆçœ‹çœ‹æœ‰æ²¡æœ‰èƒ½åœ¨è‡ªå·±å¼€å‘å®Œäº†å†åˆ°å®ƒé‚£ä¸Šé¢ï¼Œè€Œä¸”è®©éªŒè¯&#96;Shopify&#96;çš„ä¸€ç³»åˆ—æ“ä½œè®©æˆ‘ä»¬çš„åç«¯å°å“¥æ¥æ“ä½œã€‚æœ€ç»ˆæˆ‘å‰ç«¯é€‰æ‹©&#96;Vue&#96;å¹¶ä¸”éªŒè¯éƒ½æ”¾åç«¯äº†ï¼Œè¿™æ ·æˆ‘å°±èƒ½åƒå¹³å¸¸å¼€å‘&#96;Vue&#96;é¡¹ä¸€æ ·äº†ã€‚ä¸‹é¢ä»‹ç»ä¸‹æˆ‘çº¯å‰ç«¯è¿›è¡Œ&#96; Shopify&#96;çš„éªŒè¯æ“ä½œä½¿ç”¨&#96;vue&#96;ã€‚ï¼ˆå‰æè¦ç´ å†…ç½‘ç©¿é€ï¼Œä¸è¿‡å¼€å‘çš„æ—¶å€™ä¸éœ€è¦ï¼‰1. æ·»åŠ å®‰è£…åº”ç”¨è·¯ç”± { path: &apos;/shopify/install&apos;, beforeEnter(to, _from, next) { if (to.query.shop) { //è¦åœ¨åŸŸååæ·»åŠ å¼€å‘çš„å•†åº—åœ°å€ const shop = to.query.shop, scopes = &apos;read_orders,read_products,write_products&apos;, // apiæƒé™ // é‡å®šå‘åœ°å€å°±æ˜¯åœ¨åˆ›å»ºåº”ç”¨çš„æ—¶å€™å¡«å†™çš„ç¬¬äºŒä¸ªï¼ˆé‡å®šå‘URLå¯ä»¥è‡ªå·±éšæ„å†™äº†ï¼‰ï¼Œæˆ‘è¿™é‡Œæ˜¯åŸŸååŠ /shopify/auth redirect_uri = &apos;https://&apos; + process.env.VUE_APP_ROOT_URL + &apos;/shopify/auth&apos;, // æ‹¼æ¥å®‰è£…åº”ç”¨åœ°å€éœ€è¦SHOPIFY_API_KEYæˆ‘å¡«å†™åœ¨æˆ‘çš„.envæ–‡ä»¶ä¸­äº† install_url = &apos;http://&apos; + shop + &apos;/admin/oauth/authorize?client_id=&apos; + process.env.VUE_APP_SHOPIFY_API_KEY + &apos;&amp;scope=&apos; + scopes + &apos;&amp;redirect_uri=&apos; + redirect_uri // æœ¬åœ°è·³è½¬å®‰è£…åœ°å€ window.location = install_url } else { next({ path: &apos;/error&apos; }) } } }, 12 2. é‡å®šå‘éªŒè¯è·¯ç”± { path: &apos;/shopify/auth&apos;, beforeEnter(to, _from, next) { // é€šè¿‡å›è°ƒçš„urlè·å–ç›¸å…³çš„å‚æ•° const shop = to.query.shop, hmac = to.query.hmac, code = to.query.code // ä½¿ç”¨SHOPIFY_API_SECRET_KEYéªŒè¯ å¹¶ä¸”ä¹‹åæ‹¿å–access_tokenï¼ˆè¿™æ­¥æ²¡å†™ï¼‰ if (shop &amp;&amp; hmac &amp;&amp; code) { const map = Object.assign({}, to.query) delete map[&apos;signature&apos;] delete map[&apos;hmac&apos;] const message = querystring.stringify(map) const encrypted = crypto.createHmac(&apos;sha256&apos;, process.env.VUE_APP_SHOPIFY_API_SECRET_KEY) .update(message) .digest(&apos;hex&apos;) // const providedHmac = Buffer.from(hmac, &apos;utf-8&apos;) // const generatedHash = Buffer.from(encrypted, &apos;utf-8&apos;) let hashEquals = false try { // later: Auth fails with `crypto.timingSafeEqual` // hashEquals = crypto.timingSafeEqual(generatedHash, providedHmac) hashEquals = hmac === encrypted } catch (e) { hashEquals = false } if (!hashEquals) { next({ path: &apos;/error&apos; }) } else { next(&apos;/&apos;) } } else { next({ path: &apos;/error&apos; }) } } } `Vue`è¿™ç›¸å…³çš„éªŒè¯æ–¹æ¡ˆä¹Ÿæ˜¯ä»`Github`ä¸Šé¢æçš„ï¼Œç‰¹åœ°è®°å½•ä¸‹ã€‚å…·ä½“åœ°å€å¿˜äº†ï¼Œæœ‰éœ€è¦è‡ªå·±å¯ä»¥æœæœã€‚ğŸ¤£ æ€»ç»“&ensp;&ensp;&ensp;&ensp;ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç†Ÿæ‚‰ï¼Œè‡ªå·±ä¹Ÿç®—åˆæŒæ¡ä¸€é¡¹æ–°ä¸œè¥¿äº†ã€‚åˆšå¼€å§‹è¿™ä¸ªShopifyæ’ä»¶åº”ç”¨å¼€å‘çœŸçš„æ˜¯å·¨å‘å•Šï¼Œè™½ç„¶å®˜æ–¹æœ‰æ–‡æ¡£æµç¨‹ï¼Œä½†æ˜¯éƒ½æ˜¯è‹±æ–‡çš„è€Œä¸”åŸºç¡€çš„æ­å»ºéƒ½æ˜¯apiéƒ½æ˜¯ç”¨GraphQLç„¶åæˆ‘è‡ªå·±å°è¯•äº†éƒ½æ˜¯å„ç§è¶…æ—¶æ“ä½œï¼Œè¯·æ±‚ä¸åˆ°æœ€åå°±è‡ªå·±å¼ƒç”¨äº†ï¼Œç”¨ResfulApiã€‚ç„¶åå°±æ˜¯é‡åˆ°é—®é¢˜å•Šå•¥çš„éƒ½è·Ÿæœ¬æœä¸åˆ°ï¼Œæˆ‘æƒ³ç€è¿™ä¹Ÿå¤ªéš¾äº†æˆ‘ï¼Œç„¶ååªèƒ½ç¡¬ç€å¤´çš®å»å®˜æ–¹æ–‡æ¡£é‡Œæ‰¾ï¼Œæœ€ååˆ°ç°åœ¨ä¹Ÿç®—æ˜¯èµ·èµ·ä¼ä¼ç»ˆäºéƒ½ç†Ÿæ‚‰äº†ï¼Œææ‡‚äº†ã€‚ &ensp;&ensp;&ensp;&ensp; è¿™ä¹‹åå‘ç°äº†è‹±æ–‡æ°´å¹³å¤ªé‡è¦äº†ã€‚è™½ç„¶å¼€å‘æ–‡æ¡£åŸºæœ¬å†…å®¹èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯éƒ½æ˜¯åŠçŒœåŠç–‘çš„ï¼Œç„¶åç¿»è¯‘ä¸€æ³¢ã€‚ï¼ˆå„ç§ä¸å‡†ç¡®ï¼‰ï¼Œç„¶åå¼€å§‹è¡¥è‹±æ–‡å§ã€‚ğŸ¤ &ensp;&ensp;&ensp;&ensp; æœ€åæ”¾ä¸Šå‡ ä¸ªShopifyå¼€å‘å¸¸ç”¨çš„å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š &ensp;&ensp;&ensp;&ensp;Shopify Partners(åˆ›å»ºåº”ç”¨æŸ¥çœ‹åº”ç”¨): https://vue-composition-api-rfc.netlify.com &ensp;&ensp;&ensp;&ensp;Shopify Developers(å®˜æ–¹å¼€å‘æ–‡æ¡£): https://developers.shopify.comï¼ˆæ­å»ºå‚è€ƒæ–‡æ¡£ï¼‰ &ensp;&ensp;&ensp;&ensp;Shopify Polaris(å®˜æ–¹UIæ¡†æ¶): https://developers.shopify.com","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"},{"name":"React","slug":"Webå‰ç«¯/React","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/React/"}],"tags":[{"name":"Shopify","slug":"Shopify","permalink":"http://jetbn.github.io/tags/Shopify/"},{"name":"React","slug":"React","permalink":"http://jetbn.github.io/tags/React/"},{"name":"Next.js","slug":"Next-js","permalink":"http://jetbn.github.io/tags/Next-js/"}]},{"title":"mpvueå…¥å‘è®°å½•","slug":"mpvueå…¥å‘è®°å½•","date":"2020-04-29T02:57:09.000Z","updated":"2020-04-30T02:39:23.172Z","comments":true,"path":"2020/04/29/mpvueå…¥å‘è®°å½•/","link":"","permalink":"http://jetbn.github.io/2020/04/29/mpvue%E5%85%A5%E5%9D%91%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ä½¿ç”¨MpVueå¼€å‘å°ç¨‹åºè®°å½•&#160; &#160; &#160; &#160; å½“ä¸‹è½»åº”ç”¨ï¼Œéå¸ƒå„å¤§äº’è”ç½‘å…¬å¸ã€‚åƒç™¾åº¦ã€æ”¯ä»˜å®ã€å¾®ä¿¡ã€å­—èŠ‚éƒ½æ˜¯æœ‰è‡ªå·±çš„å°ç¨‹åºå½¢å¼ï¼Œå°±ç°åœ¨QQä¹Ÿæ¨å‡ºäº†å°ç¨‹åºçš„å½¢å¼ï¼Œåƒè¿™ç§è½»åº”ç”¨åˆä¸éœ€è¦å®‰è£…ï¼Œå°±èƒ½æ‰“å¼€ï¼Œè€Œä¸”ä¹Ÿç±»ä¼¼äº†appå½¢å¼ã€‚å½“ç„¶ç›¸å¯¹äºå½¢å¼ä¹Ÿä¸èƒ½è¯´ä¸ä¼šå¼€å‘å§ï¼Œè¯¥å­¦çš„è¿˜æ˜¯å¾—å­¦ã€‚æ‰€ä»¥ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šåŸºäºæ¡†æ¶å»¶ä¼¸è€Œå‡ºçš„æ‰“åŒ…ç”Ÿæˆå¤šä¸ªå¹³å°çš„å°ç¨‹åºï¼Œä¾‹å¦‚ åŸºäºreactçš„taroã€è¿˜æœ‰wepyã€mpvueç›®å‰åº”è¯¥è¿™ä¸ªä¸‰ä¸ªæœ€ç«çƒ­äº†ï¼Œç„¶åæˆ‘å°è¯•äº†mpvueå¼€å‘äº†è¿‡ç¨‹ä¸è¯´å‘è¿˜æ˜¯æœ‰çš„ã€‚è‡ªå·±ä¹Ÿæ˜¯ä¸€æ­¥æ­¥è§£å†³ï¼Œæ‰€ä»¥å†³å®šè®°å½•ä¸€ä¸‹ã€‚ é¦–å…ˆå°±æ­å»ºäº†é¡¹ç›®ä½¿ç”¨ç›¸å…³ç¯å¢ƒè‡ªå·±ä¹Ÿæ˜¯å…¨éƒ¨å°è¯•äº†ä¸€éå®‰è£…äº†scssç¯å¢ƒä»¥åŠvuexï¼Œå¥½åƒæœ‰è§£å†³çš„vue-routerè‡ªå·±æ²¡æœ‰å°è¯•. 1.1 é¦–å…ˆè®²ä¸‹scssçš„mixinæˆ‘åœ¨å…¨å±€çš„æ—¶å€™å¼•å…¥åœ¨é¡µé¢é¡µé¢ä¸­èƒ½ç”¨ï¼Œä¸ºä»€ä¹ˆåœ¨ç»„ä»¶ä¸­ç”¨ä¸äº†è¿™æ˜¯å•¥æˆ‘ä¹Ÿä¸æ˜¯æ¸…æ¥šã€‚è¿˜æœ‰å°±æ˜¯æˆ‘åœ¨scssä¸­ä½¿ç”¨fontå­—ä½“çš„é—®é¢˜ï¼Œåœ¨æ­¤ä¸­æˆ‘é€šè¿‡æœ¬åœ°çš„æ–¹å¼å¼•å…¥å‘ç°å°±æ˜¯åŠ è½½ä¸äº†ï¼Œåæ¥å¯»æ‰¾æ–¹æ¡ˆåœ¨äº¤æµç¾¤ä¸­å¾—çŸ¥æ˜¯å¾—å°†æ–‡ä»¶æ”¾åœ¨staticæ–‡ä»¶ä¸‹å¹¶ä¸”ä½¿ç”¨ç»å¯¹è·¯å¾„çš„æ–¹å¼å¼•ç”¨ï¼Œæ˜¯æœ‰æ•ˆä¸æŠ¥é”™äº†ã€‚ä½†æ˜¯å°ç¨‹åºæ‰“åŒ…åˆä¸Šä¼ äº†ä¸äº†ï¼Œåæ¥æˆ‘å°±ç›´æ¥å¹²è„†æ”¾æœåŠ¡å™¨ä¸Šäº†ï¼Œå†é€šè¿‡å¼•ç”¨ï¼Œè¿™ä¸‹æ€»æ²¡é—®é¢˜äº†ã€‚ 1.2 å†æ¬¡å°±æ˜¯vuexåœ¨main.jsä¸­å¼•ç”¨åœ¨vueçš„åŸå‹ä¸ŠåŠ è€Œä¸æ˜¯åƒvue-cliä¸­ä½¿ç”¨ä¸€æ · ç›´æ¥å†™åœ¨new VUEä¸­ã€‚ åœ¨main.jsä¸­å®šä¹‰ 12345678910import Vue from &#39;vue&#39;import App from &#39;.&#x2F;App&#39;import store from &#39;.&#x2F;store&#39;Vue.config.productionTip &#x3D; falseApp.mpType &#x3D; &#39;app&#39;Vue.prototype.$store &#x3D; storeconst app &#x3D; new Vue(App)app.$mount() åœ¨é¡µé¢ä¸­ä½¿ç”¨ 1this.$store.state ä¹Ÿå¯ä»¥ä½¿ç”¨vuexçš„mapStateå¼•ç”¨æŸä¸ªstate 12345678&#x2F;&#x2F; å¤´éƒ¨å¯¼å…¥import &#123; mapState &#125; from &#39;vuex&#39;&#x2F;&#x2F; åœ¨è®¡ç®—å±æ€§ä¸­...mapState([ &#39;carBrandCityPrev&#39; &#x2F;&#x2F; å¯¹åº”staeä¸­å®šä¹‰çš„]), è‡ªå®šä¹‰TabBarè‡ªå·±åˆšå¼€å§‹ä½¿ç”¨ä¹Ÿæ˜¯ä¸€å¤´æ°´é›¾ï¼Œå¾®ä¿¡å°ç¨‹åºæ›´æ–°çš„å¾ˆå¿«ã€‚æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªå°ç¨‹åºç”¨çš„æ˜¯åŸç”Ÿå¼€å‘çš„æ—¶å€™ï¼Œé‚£æ—¶å€™è¿˜æ²¡æœ‰ä»€ä¹ˆå®šä¹‰TabBarå•Šã€å¯¼èˆªæ ã€ç»„ä»¶å•Šä»€ä¹ˆçš„ã€‚åæ¥æˆ‘ä¹Ÿæ˜¯çœ‹äº†ä¸‹å®˜æ–¹çš„demoä»¥åŠgithubä¸­mpuveé¡¹ç›®çš„issueä¸­æ‰¾è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆè¿˜æ˜¯ç›´æ¥ä¸Šæ‰‹æäº†ä¸€æ³¢ã€‚ä¸­é€”ä¹Ÿæ˜¯ååå·å·ã€‚ è´´ä¸ªè‡ªå®šä¹‰tabbaråœ°å€: https://github.com/jetBn/mpvue-custom-tab-bar å°ç¨‹åºä¸­è·å–åœ°ç†ä½ç½®æˆæƒé—®é¢˜ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„ä¼šæç¤ºæ˜¯å¦æˆæƒå¦‚æœæ‹’ç»äº†æˆæƒç¬¬äºŒè¿›å…¥éƒ½ä¸ä¼šæˆæƒï¼Œéƒ½ä¼šèµ°æˆæƒä½ç½®çš„failæ–¹æ³•,æ‰€ä»¥è¿™ä¸ªåŸå› é—®é¢˜ã€‚æˆ‘ä»¬åªèƒ½æ˜¯é€šè¿‡å¾®ä¿¡çš„è·å–ç”¨æˆ·çš„å½“å‰è®¾ç½®æ£€æŸ¥ wx.getSettingapiå»æ£€æŸ¥å½“å‰æ˜¯å¦æˆæƒï¼Œé€šè¿‡æ­¤æ–¹æ³•æ”¾åœ¨failæ–¹æ³•ä¸­æ£€æµ‹å½“å‰æ˜¯å¦å¼€å¯æˆæƒåœ°ç†ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰é‡æ–°è°ƒç”¨åœ°ç†ä½ç½®æˆæƒçš„æ–¹æ³•ã€‚ ç›¸å…³æ£€æŸ¥æ˜¯å¦æˆæƒæ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243&#x2F;&#x2F; fnæŒ‡ç›¸å…³é‡æ–°æˆæƒçš„æ–¹æ³• export function checkGetLocationPermison (fn) &#123; wx.getSetting(&#123; success: (res) &#x3D;&gt; &#123; const status &#x3D; res.authSetting if (!status[&#39;scope.userLocation&#39;]) &#123; wx.showModal(&#123; title: &#39;æ˜¯å¦æˆæƒå½“å‰ä½ç½®&#39;, content: &#39;éœ€è¦è·å–æ‚¨çš„åœ°ç†ä½ç½®ï¼Œè¯·ç¡®è®¤æˆæƒï¼Œå¦åˆ™åœ°å›¾åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨è·å–ä¸äº†ä¼˜æƒ åˆ¸ä¿¡æ¯&#39;, success: (subRes) &#x3D;&gt; &#123; if (subRes.confirm) &#123; wx.openSetting(&#123; success: (subRes) &#x3D;&gt; &#123; if (subRes.authSetting[&#39;scope.userLocation&#39;] &#x3D;&#x3D;&#x3D; true) &#123; wx.showToast(&#123; title: &#39;æˆæƒæˆåŠŸ&#39;, icon: &#39;success&#39;, duration: 1000 &#125;) fn() &#125; else &#123; wx.showToast(&#123; title: &#39;æˆæƒå¤±è´¥&#39;, icon: &#39;success&#39;, duration: 1000 &#125;) &#125; &#125; &#125;) &#125; &#125; &#125;) &#125; &#125;, fail: () &#x3D;&gt; &#123; wx.showToast(&#123; title: &#39;è°ƒç”¨æˆæƒçª—å£å¤±è´¥&#39;, icon: &#39;success&#39;, duration: 1000 &#125;) &#125; &#125;) &#125; åœ¨mpvueæ˜¯axioså…¨å±€å¤„ç†è¯·æ±‚è¿”å›å€¼ä»¥åŠè¯·æ±‚å¤´è®¾ç½®ç­‰ç­‰ã€‚åœ¨npm i axios qsåæ–°å»ºrequest.jsæ–‡ä»¶ï¼Œå¼•å…¥qså¤„ç†axiosä¸­postè¯·æ±‚ï¼Œç„¶åå¾®ä¿¡å°ç¨‹åºä¸­æ˜¯ä½¿ç”¨wx.requestå‘é€è¯·æ±‚çš„å¹¶ä¸æ˜¯ç›´æ¥ä½¿ç”¨axioså°±å¯ä»¥çš„ï¼Œæ‰€ä»¥ä½¿ç”¨axiosçš„adapter å±æ€§è¿›è¡Œæˆ‘ä»¬çš„è¯·æ±‚æ“ä½œã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&#x2F;&#x2F; åˆ›å»ºaxioså®ä¾‹const Axios &#x3D; axios.create(&#123; baseURL: &#39;&#39;, &#x2F;&#x2F; è®¾ç½®è¯·æ±‚åŸŸååœ°å€ timeout: 1000 * 60 * 10, &#x2F;&#x2F; è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ responseType: &#39;json&#39; &#x2F;&#x2F; è®¾ç½®è¿”å›å€¼ç±»å‹&#125;)&#x2F;&#x2F; ç„¶åä½¿ç”¨Axioså®ä¾‹çš„adapterè¿›è¡Œå°è£…å¾®ä¿¡è¯·æ±‚Axios.defaults.adapter &#x3D; (config) &#x3D;&gt; &#123; return new Promise((resolve, reject) &#x3D;&gt; &#123; let data &#x3D; config.method &#x3D;&#x3D;&#x3D; &#39;get&#39; ? config.params : qs.stringify(config.params) wx.request(&#123; url: config.url, method: config.method, header: &#123;&#39;Content-type&#39;: &#39;application&#x2F;x-www-form-urlencoded&#39;&#125;, data, success: (res) &#x3D;&gt; (resolve(res)), fail: (err) &#x3D;&gt; (reject(err)) &#125;) &#125;)&#125;&#x2F;&#x2F; è¯·æ±‚æ‹¦æˆªAxios.interceptors.request.use((request) &#x3D;&gt; &#123; return request&#125;, (error) &#x3D;&gt; &#123; return Promise.reject(error)&#125;)&#x2F;&#x2F; å“åº”æ‹¦æˆªAxios.interceptors.response.use((response) &#x3D;&gt; &#123; return response&#125;, (error) &#x3D;&gt; &#123; return Promise.reject(error)&#125;)&#x2F;&#x2F; å¯¼å‡ºå“åº”çš„æ–¹æ³•export function fetch (options) &#123; return new Promise((resolve, reject) &#x3D;&gt; &#123; Axios(options) .then(response &#x3D;&gt; &#123; resolve(response) &#125;) .catch(error &#x3D;&gt; &#123; reject(error) &#125;) &#125;)&#125; ç›¸å…³è‡ªå®šä¹‰å¤´éƒ¨å¯¼èˆªæ æ ¹æ®ç›¸å…³è®¾å¤‡åˆ¤æ–­è®¾ç½®é«˜åº¦ï¼Œç›¸å…³è®¡ç®—æ˜¯é¡¶éƒ¨çŠ¶æ€æ çš„é«˜åº¦åŠ ä¸Šç›¸å…³å®šä¹‰çš„é«˜åº¦ã€‚ 12345678910111213141516&#x2F;&#x2F;å¾®ä¿¡è·å–ç›¸å…³è®¾å¤‡ä¿¡æ¯çš„APIwx.getSystemInfo(&#123; success (system) &#123; &#x2F;&#x2F; console.log(&#96;system:&#96;, system) self.statusBarHeight &#x3D; system.statusBarHeight self.platform &#x3D; system.platform const windowHeight &#x3D; system.windowHeight let platformReg &#x3D; &#x2F;ios&#x2F;i if (platformReg.test(system.platform)) &#123; self.titleBarHeight &#x3D; 44 &#x2F;&#x2F; isoçš„é«˜åº¦ &#125; else &#123; self.titleBarHeight &#x3D; 48 &#x2F;&#x2F;android çš„é«˜åº¦ &#125; self.navBarHeight &#x3D; self.statusBarHeight + self.titleBarHeight &#125;&#125;) mpvueä¸­ä½¿ç”¨ç»„ä»¶å¼å°è£… ç„¶åæ˜¯å†…å®¹ä½¿ç”¨æ’æ§½å½¢å¼ï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„ä½¿ç”¨æ’æ§½å†…çš„å†…å®¹æ•°æ®æ›´æ–°é¡µé¢ä¸ä¼šå®æ—¶æ›´æ–° ã€‚ï¼ˆçˆ¶ç»„ä»¶æ’æ§½å†…å®¹å—ä¸­ä½¿ç”¨çš„ä¹Ÿæ˜¯ç»„ä»¶å°è£…çš„ç»„ä»¶ï¼‰ï¼ˆé—®é¢˜1ï¼‰ã€‚ç„¶åæˆ‘ä½¿ç”¨äº† ä¸å°è£…ç»„ä»¶ ç›´æ¥å†™é¡µé¢æ ·å¼ç‚¹å‡»ç»„ä»¶çš„äº‹ä»¶ä¼šè§¦å‘æ’æ§½ä¸­çš„äº‹ä»¶ï¼Ÿï¼Ÿï¼Ÿï¼ˆé—®é¢˜2ï¼‰ äº‹ä»¶è·Ÿæ’æ§½ä¸­çš„äº‹ä»¶ä¸åœ¨åŒä¸€ä¸ªdivä¸­ã€‚æœ€åå°±æ˜¯ä¸ç”¨æ’æ§½æ‰è§£å†³äº†ä¸Šè¿°é—®é¢˜1ï¼Œ2 npm run dev ä¼šå¡åœ¨node build/dev-server.js wx æœ€åæˆ‘è‡ªå·±ä¹Ÿæ˜¯åœ¨å®˜æ–¹çš„githubä»“åº“ä¸­çš„issuä¸­æ‰¾åˆ°è§£å†³æ–¹æ¡ˆåœ¨buildæ–‡ä»¶å¤¹çš„build.jsä¸­require(&#39;./check-versions&#39;)()æ³¨é‡Šæ‰ç„¶åä¹Ÿå°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚å…·ä½“çš„å¥½åƒæ˜¯åœ¨ç»è¿‡check-versionså‡½æ•°çš„æ—¶å€™æ‰§è¡Œç‰¹åˆ«çš„æ…¢ã€‚ &#160; &#160; &#160; &#160;æœ€åæ€»ç»“ä¸‹MpVueè¿™ä¸ªç›¸å¯¹äºvueé’ˆå¯¹äºå°ç¨‹åºçš„æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨vueç›¸å…³è¯­æ³•æ‰€ä»¥å¯¹äºç†Ÿæ‚‰vueçš„æ¥è¯´è¿˜æ˜¯å¾ˆå®¹æ˜“ä¸Šæ‰‹çš„ã€‚å¼€å‘æ•ˆç‡ä¹Ÿè¿˜å¯ä»¥ã€‚æ„Ÿè§‰ä¼šä½¿ç”¨vueå†æ¬¡ç†Ÿæ‚‰å¾®ä¿¡å°ç¨‹åºå®˜æ–¹çš„APIå¼€å‘æ•ˆç‡è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰æŒºå¤šå‘çš„ï¼Œæˆ‘è¿™è¾¹å‘å¯èƒ½æ˜¯æ²¡æœ‰é‡åˆ°å¾ˆå¤šã€‚å¾ˆå¹¸è¿ï¼Œå…·ä½“çš„ç›¸å…³çš„è¯­æ³•æƒ…å†µå¯ä»¥å¯¹åº”å®˜æ–¹ç½‘ç«™çš„ä»‹ç»æƒ…å†µã€‚ &#160; &#160; &#160; &#160;æœ€åé™„ä¸Šç›¸å…³ç½‘ç«™åœ°å€ï¼š &#160; &#160; &#160; &#160;å®˜æ–¹ç½‘ç«™ï¼šhttp://mpvue.com &#160; &#160; &#160; &#160;githubç›¸å…³ä»“åº“åœ°å€ï¼š https://github.com/Meituan-Dianping/mpvue","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"Webå‰ç«¯/Vue","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/"},{"name":"å°ç¨‹åº","slug":"Webå‰ç«¯/Vue/å°ç¨‹åº","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}],"tags":[{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://jetbn.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]}],"categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/"},{"name":"Vue","slug":"Webå‰ç«¯/Vue","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/"},{"name":"React","slug":"Webå‰ç«¯/React","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/React/"},{"name":"å°ç¨‹åº","slug":"Webå‰ç«¯/Vue/å°ç¨‹åº","permalink":"http://jetbn.github.io/categories/Web%E5%89%8D%E7%AB%AF/Vue/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://jetbn.github.io/tags/CSS/"},{"name":"Vue","slug":"Vue","permalink":"http://jetbn.github.io/tags/Vue/"},{"name":"Shopify","slug":"Shopify","permalink":"http://jetbn.github.io/tags/Shopify/"},{"name":"React","slug":"React","permalink":"http://jetbn.github.io/tags/React/"},{"name":"Next.js","slug":"Next-js","permalink":"http://jetbn.github.io/tags/Next-js/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","permalink":"http://jetbn.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]}